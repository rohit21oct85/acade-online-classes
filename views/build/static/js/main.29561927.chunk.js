(this.webpackJsonpresources=this.webpackJsonpresources||[]).push([[0],{111:function(e,t,a){},113:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},166:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(22),i=a.n(s),o=(a(111),a(6)),l=a(17),d=a(2),r=a.n(d),u=a(3),j=a(8),v=(a(113),a(219)),m=a(5),b=a(0),p=localStorage.getItem("fullname"),h=localStorage.getItem("email"),O=localStorage.getItem("role"),f=localStorage.getItem("user_type"),x=localStorage.getItem("school_id"),_=localStorage.getItem("school_slug"),g=localStorage.getItem("school_logo"),N=localStorage.getItem("created_at"),y=localStorage.getItem("isLoggedIn"),k=localStorage.getItem("access_token"),w=localStorage.getItem("refresh_token"),C={isLoggedIn:y||!1,fullname:p||null,email:h||null,role:O||null,user_type:f||null,school_id:x||null,school_slug:_||null,school_logo:g||null,created_at:N||null,access_token:k||null,refresh_token:w||null},S=c.a.createContext(C),T=function(e,t){switch(t.type){case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,fullname:t.payload.fullname,email:t.payload.email,role:t.payload.role,user_type:t.payload.user_type,school_id:t.payload.school_id,school_slug:t.payload.school_slug,school_logo:t.payload.school_logo,created_at:t.payload.created_at,access_token:t.payload.access_token,refresh_token:t.payload.refresh_token});case"LOGOUT":return localStorage.clear(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("role"),localStorage.removeItem("school_id"),localStorage.removeItem("school_slug"),localStorage.removeItem("school_logo"),Object(m.a)(Object(m.a)({},e),{},{isLoggedIn:!1,fullname:null,email:null,access_token:null,refresh_token:null});default:return e}};var A=function(e){var t=e.children,a=Object(n.useReducer)(T,C),c=Object(j.a)(a,2),s=c[0],i=c[1];return Object(b.jsx)(S.Provider,{value:{state:s,dispatch:i},children:t})},D=a(221),L=a(4),F=a.n(L),I="http://admin-acadelearn.herokuapp.com/api/";function q(){var e=Object(n.useContext)(S).state;return Object(D.a)("app-modules",Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token||"master_admin"!=(null===e||void 0===e?void 0:e.user_type)){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/module/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}function B(e){var t=e.isLoading;return Object(b.jsx)("div",{children:t&&Object(b.jsx)("div",{className:"spinner-border",style:{width:"16px",height:"16px"},role:"status",children:Object(b.jsx)("span",{className:"sr-only",children:"Loading..."})})})}function M(){var e=Object(n.useContext)(S).state,t=null===e||void 0===e?void 0:e.user_type,a=null===e||void 0===e?void 0:e.email;return Object(D.a)("other-modules",Object(u.a)(r.a.mark((function n(){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===t){n.next=5;break}return n.next=3,F.a.get("".concat(I,"v1/permission/module/").concat(t,"/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return c=n.sent,n.abrupt("return",c.data.data);case 5:case"end":return n.stop()}}),n)}))))}var E=a(7);function z(){var e,t=Object(l.g)(),a=(Object(l.h)(),Object(l.i)(),Object(n.useContext)(S)),c=a.state,s=a.dispatch,i=q(),d=i.data,m=i.isLoading,p=M(),h=p.data,O=p.isLoading,f=Object(n.useState)({}),x=Object(j.a)(f,2),_=x[0],g=(x[1],Object(E.useToasts)().addToast);function N(){return(N=Object(u.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.email=c.email,e.next=3,F.a.delete("".concat(I,"v1/admin/logout"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}});case 3:201===(a=e.sent).status&&(g(a.data.message,{appearance:"error",autoDismiss:!0}),setTimeout((function(){s({type:"LOGOUT"}),t.push("/")}),1e3));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)(b.Fragment,{children:c.isLoggedIn&&Object(b.jsxs)("div",{className:"login_menu col-lg-2 col-md-2 col-12",bg:"dark",variant:"dark",expand:"lg",children:[Object(b.jsxs)("div",{className:"webLogo row",style:{paddingLeft:"30px"},children:[Object(b.jsx)("img",{src:"/logo.png",className:"mr-2",style:{width:"15%"},alt:"User"}),Object(b.jsx)("h4",{children:"AcadeLearn"})]}),Object(b.jsxs)("div",{className:"user_area",children:[Object(b.jsx)("div",{className:"col-md-12 user_icon",children:Object(b.jsx)("div",{className:"col-md-12 p-0",children:Object(b.jsx)("img",{src:"/profile.jpg",className:"profileImage"})})}),Object(b.jsxs)("div",{className:"user_options mt-1",children:[Object(b.jsx)("div",{className:"col-md-12 p-0 user_details",children:Object(b.jsx)("span",{className:"user_name",children:null===c||void 0===c?void 0:c.email})}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{as:o.b,children:Object(b.jsxs)("button",{className:"bg-success dark br-10 pl-2 pr-2",children:[Object(b.jsx)("span",{className:"fa fa-lock mr-2"})," ",null===c||void 0===c||null===(e=c.user_type)||void 0===e?void 0:e.replace("_"," ")]})}),Object(b.jsx)("li",{as:o.b,onClick:function(){return N.apply(this,arguments)},alt:"Logout",children:Object(b.jsxs)("button",{className:"bg-danger dark br-10  pl-2 pr-2",children:[Object(b.jsx)("span",{className:"fa fa-power-off mr-2"}),"Logout"]})})]})]})]}),Object(b.jsx)("div",{className:"navbar_menus",children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(v.a,{className:"ml-auto",children:Object(b.jsxs)(o.c,{to:"/admin/dashboard",children:[" ",Object(b.jsx)("span",{className:"bi bi-speedometer text-warning"})," Dashboard "]})})}),"master_admin"==(null===c||void 0===c?void 0:c.user_type)&&m&&Object(b.jsx)(B,{isLoading:m}),"master_admin"==(null===c||void 0===c?void 0:c.user_type)&&(null===d||void 0===d?void 0:d.map((function(e){if("master_admin"===(null===e||void 0===e?void 0:e.module_type))return Object(b.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(b.jsx)(v.a,{className:"ml-auto",children:Object(b.jsxs)(o.c,{to:"/admin/".concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(b.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e?void 0:e.module_name," "]})})},null===e||void 0===e?void 0:e._id)}))),"master_admin"==(null===c||void 0===c?void 0:c.user_type)&&(null===d||void 0===d?void 0:d.map((function(e){if("sub_admin"===(null===e||void 0===e?void 0:e.module_type))return Object(b.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(b.jsx)(v.a,{className:"ml-auto",children:Object(b.jsxs)(o.c,{to:"/admin/".concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(b.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e?void 0:e.module_name," "]})})},null===e||void 0===e?void 0:e._id)}))),(null===c||void 0===c?void 0:c.user_type)==c.user_type&&"master_admin"!==(null===c||void 0===c?void 0:c.user_type)&&O&&Object(b.jsx)(B,{isLoading:m}),(null===c||void 0===c?void 0:c.user_type)===c.user_type&&"master_admin"!==(null===c||void 0===c?void 0:c.user_type)&&(null===h||void 0===h?void 0:h.map((function(e){if((null===e||void 0===e?void 0:e.role_slug)==c.user_type)return Object(b.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(b.jsx)(v.a,{className:"ml-auto",children:Object(b.jsxs)(o.c,{to:"/admin/".concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(b.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e?void 0:e.module_slug," "]})})},null===e||void 0===e?void 0:e._id)})))]})})]})})}a(145);var U=a(53),Q=function(e){var t=e.component,a=Object(U.a)(e,["component"]),c=Object(n.useContext)(S).state;return Object(b.jsx)(l.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return"true"==c.isLoggedIn?Object(b.jsx)(t,Object(m.a)({},e)):Object(b.jsx)(l.a,{to:{pathname:"/admin/login"}})}}))},P=function(e){var t=e.component,a=Object(U.a)(e,["component"]),c=Object(n.useContext)(S).state;return Object(b.jsx)(l.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return"1"==c.role?Object(b.jsx)(t,Object(m.a)({},e)):Object(b.jsx)(l.a,{to:{pathname:"/403"}})}}))};a(146);function H(){var e=Object(l.g)(),t=(Object(l.h)(),Object(E.useToasts)().addToast),a=Object(n.useRef)(),c=Object(n.useRef)(),s=Object(n.useState)(null),i=Object(j.a)(s,2),d=(i[0],i[1],Object(n.useContext)(S)),v=d.dispatch,m=d.state,p=Object(n.useState)(!1),h=Object(j.a)(p,2),O=h[0],f=h[1],x=function(){var e=Object(u.a)(r.a.mark((function e(n){var s,i,o,l,d,u,j,m,b,p,h,O,x,_,g,N,y,k,w,C,S,T,A,D,L;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s=a.current.value,i=c.current.value,""!==s){e.next=8;break}return t("Please enter email address",{appearance:"error",autoDismiss:!0}),e.abrupt("return",!1);case 8:if(""!==i){e.next=14;break}return t("Please enter password",{appearance:"error",autoDismiss:!0}),c.current.focus(),e.abrupt("return",!1);case 14:return f(!0),o={email:a.current.value,password:c.current.value},e.next=18,F.a.post("".concat(I,"v1/admin/login"),o);case 18:203===(null===(l=e.sent)||void 0===l?void 0:l.status)?(t("".concat(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message),{appearance:"error",autoDismiss:!0}),f(!1)):(k=null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.accessToken,w=null===l||void 0===l||null===(j=l.data)||void 0===j?void 0:j.refreshToken,C=null===l||void 0===l||null===(m=l.data)||void 0===m||null===(b=m.admin)||void 0===b?void 0:b.fullname,S=null===l||void 0===l||null===(p=l.data)||void 0===p||null===(h=p.admin)||void 0===h?void 0:h.email,T=null===l||void 0===l||null===(O=l.data)||void 0===O||null===(x=O.admin)||void 0===x?void 0:x.role,A=null===l||void 0===l||null===(_=l.data)||void 0===_||null===(g=_.admin)||void 0===g?void 0:g.role_name,"1"==T?A="master_admin":"2"==T?A="sub_admin":"3"==T&&(A="mapping_admin"),D=null===l||void 0===l||null===(N=l.data)||void 0===N||null===(y=N.admin)||void 0===y?void 0:y.created_at,L=!0,localStorage.setItem("access_token",k),localStorage.setItem("refresh_token",w),localStorage.setItem("fullname",C),localStorage.setItem("email",S),localStorage.setItem("role",T),localStorage.setItem("user_type",A),localStorage.setItem("created_at",D),localStorage.setItem("isLoggedIn",L),v({type:"LOGIN",payload:{isLoggedIn:L,fullname:C,email:S,role:T,user_type:A,created_at:D,access_token:k,refresh_token:w}}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _(){return(_=Object(u.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===m||void 0===m?void 0:m.isLoggedIn)?window.location.href="/admin/dashboard":e.push("/admin/login");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return _.apply(this,arguments)}),[m]),Object(b.jsxs)("div",{className:"container-fluid p-0 m-0 text-center LoginBg",style:{background:"url('/bg.jpg')"},children:[Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(o.c,{to:"/",children:Object(b.jsx)("img",{className:"logo img-responsive",style:{width:"75px"},alt:"company Logo",src:"/logo.png"})})}),Object(b.jsx)("div",{className:"row no-gutter",children:Object(b.jsxs)("div",{className:"col-md-3 adminLoginDiv",children:[Object(b.jsx)("h4",{children:"Administrator Login "}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{autoComplete:"Off",onSubmit:x,children:[Object(b.jsxs)("div",{className:"form-group text-left",children:[Object(b.jsxs)("label",{children:[" ",Object(b.jsx)("span",{className:"fa fa-send mr-2"})," Email address"]}),Object(b.jsx)("input",{className:"form-control",type:"email",autoComplete:"off",ref:a,placeholder:"Enter email"}),Object(b.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your email with anyone else."})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"form-group text-left",children:[Object(b.jsxs)("label",{children:[" ",Object(b.jsx)("span",{className:"fa fa-lock mr-2"})," Password"]}),Object(b.jsx)("input",{className:"form-control",type:"password",autoComplete:"Off",ref:c,placeholder:"Password"}),Object(b.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your password with anyone else"})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("button",{className:"btn btn-md btn-block btn-success dark w-100",type:"submit",disabled:O,children:O?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2",children:" "})," Authenticating..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-lock mr-2",children:" "})," Login Your Account"]})})]})]})})]})}a(147);function R(){var e=Object(l.g)(),t=Object(l.h)(),a=null===t||void 0===t?void 0:t.pathname,c=Object(n.useContext)(S),s=c.state;c.dispatch;function i(){return(i=Object(u.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"/admin/"===a&&e.push("/admin/dashboard");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return i.apply(this,arguments)}),[s]),Object(b.jsx)(b.Fragment,{children:s.isLoggedIn&&Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Dashboard"})}),Object(b.jsx)("div",{className:"dash_over_view",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-12 pl-0",children:1===s.role&&Object(b.jsx)("div",{className:"col-md-3 card ml-3  pt-2 pb-2 main-box gradient-ibiza",children:Object(b.jsxs)("div",{className:"card-body pt-0 pb-0 pl-0",children:[Object(b.jsxs)("div",{className:"box-head",children:[Object(b.jsx)("h4",{children:"Admin"}),Object(b.jsx)("div",{className:"box-icon",children:Object(b.jsx)("span",{className:"fa fa-users"})})]}),Object(b.jsx)("div",{className:"main-box-text",children:Object(b.jsx)("b",{children:"Total: 1 "})})]})})})})})]})})})})}var W=a(12),J=(a(101),function(e){var t,a,n;return null===e||void 0===e||null===(t=e.trim())||void 0===t||null===(a=t.toLowerCase())||void 0===a||null===(n=a.replace(/[^\w ]+/g,""))||void 0===n?void 0:n.replace(/ +/g,"-")}),V=function(e){var t,a,n;return null===e||void 0===e||null===(t=e.trim())||void 0===t||null===(a=t.toLowerCase())||void 0===a||null===(n=a.replace(/[^\w ]+/g,""))||void 0===n?void 0:n.replace(/ +/g,"_")};var X=a(46),Y=a(222);function G(){var e=Object(n.useContext)(S).state;return Object(D.a)("roles",Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/role/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}function K(e,t,a,n){if("undefined"!==typeof e){var c,s=null===Array||void 0===Array||null===(c=Array.from(e))||void 0===c?void 0:c.filter((function(e){return e[t]==a}));if(s)return s&&s[0][n]}}function Z(e,t,a){if("undefined"!==typeof e){var n,c=null===Array||void 0===Array||null===(n=Array.from(e))||void 0===n?void 0:n.filter((function(e){return e[t]==a}));if(c)return c&&c[0]}}function $(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if("undefined"!==typeof t)return null===(e=Array.from(t))||void 0===e?void 0:e.some((function(e){return e[a]===n}))}function ee(e){var t,a={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},n="";for(t in a)for(;e>=a[t];)n+=t,e-=a[t];return n}function te(e){var t="";if(e.match("-")){var a,n=null===(a=e.split("-"))||void 0===a?void 0:a.map((function(e){return t+=e.charAt(0)}));return n[n.length-1]}return e.charAt(0)}function ae(e,t){for(var a=[],n=document.querySelectorAll("table tr"),c=0;c<n.length;c++){for(var s=[],i=n[c].querySelectorAll("td:not(.hidden_col), th:not(.hidden_col)"),o=0;o<i.length;o++)s.push(i[o].innerText);a.push(s.join(","))}!function(e,t){var a,n;a=new Blob([e],{type:"text/csv"}),(n=document.createElement("a")).download=t,n.href=window.URL.createObjectURL(a),n.style.display="none",document.body.appendChild(n),n.click()}(a.join("\n"),t)}function ne(){var e,t=Object(l.g)(),a=Object(l.i)(),c=(Object(l.h)().pathname,Object(n.useState)(!1)),s=Object(j.a)(c,2),i=(s[0],s[1]),o=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.admin_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-admin-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/admin/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,d=G().data,v=Object(n.useState)(),p=Object(j.a)(v,2),h=p[0],O=p[1],f=Object(n.useState)({}),x=Object(j.a)(f,2),_=x[0],g=x[1];Object(n.useEffect)((function(){O(o)}),[o]);var N=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/admin/register"),e,s)}),{onSuccess:function(){t.invalidateQueries("sub-admins"),i("App Module added successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/manage-sub-admin/")},onError:function(){i("Error White Creating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),y=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/admin/update"),e,s)}),{onSuccess:function(){t.invalidateQueries("sub-admins"),i("Module updated successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/manage-sub-admin")},onError:function(){i("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),k=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/admin/delete"),e,s)}),{onSuccess:function(){t.invalidateQueries("sub-admins"),i("Module deleted successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/manage-sub-admin")},onError:function(){i("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),w=function(){var e=Object(u.a)(r.a.mark((function e(t){var n,c,s,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i(!0),!(null===a||void 0===a?void 0:a.admin_id)){e.next=14;break}return _.first_name=null!==(n=null===_||void 0===_?void 0:_.first_name)&&void 0!==n?n:null===h||void 0===h?void 0:h.first_name,_.last_name=null!==(c=null===_||void 0===_?void 0:_.last_name)&&void 0!==c?c:null===h||void 0===h?void 0:h.last_name,_.admin_id=null===a||void 0===a?void 0:a.admin_id,_.role=null===a||void 0===a?void 0:a.role,s=K(d,"role_id",null===a||void 0===a?void 0:a.role,"role_slug"),void 0===_.role_name?_.role_name=s:_.role_name=_.role_name,console.log(_),e.next=12,y.mutate(_);case 12:e.next=20;break;case 14:return o=_.role_name,l=K(d,"role_id",o,"role_slug"),_.role_name=l,_.role=o,e.next=20,N.mutate(_);case 20:g({}),i(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(){return(C=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_.admin_id=null===a||void 0===a?void 0:a.admin_id,e.next=4,k.mutate(_);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"New SubAdmin"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:w,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",name:"role_name",value:null===a||void 0===a?void 0:a.role,onChange:function(e){if(null===a||void 0===a?void 0:a.admin_id){var n,c=K(d,"role_id",e.target.value,"role_slug");g(Object(m.a)(Object(m.a)({},_),{},(n={},Object(W.a)(n,"role",e.target.value),Object(W.a)(n,"role_name",c),n))),t.push("/admin/manage-sub-admin/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(e.target.value,"/").concat(null===a||void 0===a?void 0:a.admin_id))}else g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},e.target.name,e.target.value)))},children:[Object(b.jsx)("option",{value:"_",children:"Select Roles"}),null===d||void 0===d?void 0:d.map((function(e){if((null===e||void 0===e?void 0:e.role_id)>1)return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.role_id,"data-role_name":null===e||void 0===e?void 0:e.role_name,children:null===e||void 0===e?void 0:e.role_name},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"first_name",value:(null===a||void 0===a?void 0:a.admin_id)?null===h||void 0===h?void 0:h.first_name:null===_||void 0===_?void 0:_.first_name,onChange:function(e){(null===a||void 0===a?void 0:a.admin_id)?O(Object(m.a)(Object(m.a)({},h),{},{first_name:e.target.value})):g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},e.target.name,e.target.value)))},placeholder:"First Name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"last_name",value:(null===a||void 0===a?void 0:a.admin_id)?null===h||void 0===h?void 0:h.last_name:null===_||void 0===_?void 0:_.last_name,onChange:function(e){(null===a||void 0===a?void 0:a.admin_id)?O(Object(m.a)(Object(m.a)({},h),{},{last_name:e.target.value})):g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},e.target.name,e.target.value)))},placeholder:"Last Name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"email",value:(null===a||void 0===a?void 0:a.admin_id)?null===h||void 0===h?void 0:h.email:null===_||void 0===_?void 0:_.email,onChange:function(e){(null===a||void 0===a?void 0:a.admin_id)?O(Object(m.a)(Object(m.a)({},h),{},{email:e.target.value})):g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},e.target.name,e.target.value)))},placeholder:"Email address"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"password",onChange:function(e){(null===a||void 0===a?void 0:a.admin_id)?O(Object(m.a)(Object(m.a)({},h),{},{password:e.target.value})):g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},e.target.name,e.target.value)))},placeholder:"password"})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",children:(null===N||void 0===N?void 0:N.isLoading)||(null===y||void 0===y?void 0:y.isLoading)?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(b.jsx)(b.Fragment,{children:(null===a||void 0===a?void 0:a.admin_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===a||void 0===a?void 0:a.admin_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-sm dark bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),t.push("/admin/manage-sub-admin")},children:[Object(b.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return C.apply(this,arguments)},disbaled:null===k||void 0===k||null===(e=k.isLoading)||void 0===e?void 0:e.toString(),children:(null===k||void 0===k?void 0:k.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})]})]})]})]})}function ce(e){var t=e.sub_admin,a=Object(l.g)();return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(e){e.preventDefault(),a.push("/admin/manage-sub-admin/update/".concat(null===t||void 0===t?void 0:t.role,"/").concat(null===t||void 0===t?void 0:t._id))},children:Object(b.jsx)("span",{className:"fa fa-pencil-square text-white"})})})}function se(e){var t=e.sub_admin;return Object(b.jsx)("div",{className:"lg-card",children:Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"label-name",children:[Object(b.jsx)("span",{className:"bi bi-person-circle mt-1 mr-3"}),null===t||void 0===t?void 0:t.first_name," ",null===t||void 0===t?void 0:t.last_name]}),Object(b.jsxs)("div",{className:"label-name",children:[Object(b.jsx)("span",{className:"fa fa-send mt-1 mr-3"}),null===t||void 0===t?void 0:t.email]}),Object(b.jsxs)("div",{className:"label-name",children:[Object(b.jsx)("span",{className:"fa fa-lock mt-1 mr-3"}),null===t||void 0===t?void 0:t.role_name]})]}),Object(b.jsx)(ce,{sub_admin:t})]})})}function ie(){var e=function(){var e=Object(n.useContext)(S).state;return Object(D.a)("sub-admins",Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token||"master_admin"!=(null===e||void 0===e?void 0:e.user_type)){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/admin/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}(),t=e.data,a=e.isLoading;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App admins"]}),Object(b.jsx)("hr",{className:"mt-1"}),a&&Object(b.jsx)(B,{isLoading:a}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container pr-0",children:null===t||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(se,{sub_admin:e},null===e||void 0===e?void 0:e._id)}))})]})}a(148);function oe(){var e=Object(l.g)(),t=Object(l.i)(),a=Object(E.useToasts)().addToast,c=function(e){Object(l.i)();var t=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(e),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===e){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/school/view/").concat(e),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}(null===t||void 0===t?void 0:t.school_id).data,s=Object(n.useState)({}),i=Object(j.a)(s,2),o=i[0],d=i[1],v={name:"",address:"",school_logo:"",pincode:"",contact_email:"",conatct_mobile:""},p=Object(n.useState)({}),h=Object(j.a)(p,2),O=h[0],f=h[1];Object(n.useEffect)((function(){f(v),d(v)}),[null===t||void 0===t?void 0:t.page_type]),Object(n.useEffect)((function(){void 0!==c&&d(c)}),[c]);var x=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/school/create"),e,s)}),{onSuccess:function(){t.invalidateQueries("schools"),i("School added successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/school-management")}})}(),_=function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)()),c=Object(X.b)(),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.school_id;return F.a.patch("".concat(I,"v1/school/update/").concat(a),e,s)}),{onSuccess:function(){c.invalidateQueries("schools"),i("Category Updated successfully",{appearance:"success",autoDismiss:!0}),a.push("/admin/school-management")}})}(),g=function(e){Object(l.h)().pathname;var t=Object(l.g)(),a=Object(X.b)(),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/school/delete"),e,c)}),{onSuccess:function(){a.invalidateQueries("schools"),t.push("/admin/school-management"),s("Schools deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),N=(function(e){Object(X.b)();var t=Object(n.useContext)(S).state,a=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}}),c=Object(E.useToasts)().addToast;Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/school/subdomain"),e,a)}),{onSuccess:function(e){var t,a,n;1===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count)?c(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message,{appearance:"error",autoDismiss:!0}):c(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,{appearance:"success",autoDismiss:!0})}})}(),function(){var e=Object(u.a)(r.a.mark((function e(n){var c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),O.school_name=(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.school_name:null===O||void 0===O?void 0:O.school_name,c=J((null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.school_name:null===O||void 0===O?void 0:O.school_name),O.school_slug=c,O.short=te(c),console.log(O),!(null===t||void 0===t?void 0:t.school_id)){e.next=13;break}return o.school_slug=c,o.short=te(c),e.next=11,_.mutate(o);case 11:e.next=39;break;case 13:if(""!=(null===O||void 0===O?void 0:O.school_name)){e.next=17;break}a("Please Enter school name",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 17:if(""!=(null===O||void 0===O?void 0:O.contact_email)){e.next=21;break}a("Please provide contact email",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 21:if(!1!==C(null===O||void 0===O?void 0:O.pincode)){e.next=25;break}a("Please enter numbers only",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 25:if(!((null===O||void 0===O||null===(s=O.pincode)||void 0===s?void 0:s.length)<6)){e.next=29;break}a("Please provide valid zip code",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 29:if(!((null===O||void 0===O||null===(i=O.contact_mobile)||void 0===i?void 0:i.length)<10)){e.next=33;break}a("Please enter validcontact_ mobile number",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 33:if(!1!==C(null===O||void 0===O?void 0:O.contact_mobile)){e.next=37;break}a("Please enter valid mobile number",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 37:return e.next=39,x.mutate(O);case 39:f({}),d({});case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function y(){return(y=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(null===t||void 0===t?void 0:t.school_id)){e.next=5;break}return O.school_id=null===t||void 0===t?void 0:t.school_id,e.next=5,g.mutate(O);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.school_id)?d(Object(m.a)(Object(m.a)({},o),{},Object(W.a)({},a.target.name,a.target.value))):f(Object(m.a)(Object(m.a)({},O),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t=(e=e||window.event).which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}function T(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===C(t.target.value)?(a("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerText="",document.getElementsByName("".concat(t.target.name))[0].focus()):("mobile"===t.target.name&&(null===(n=t.target.value)||void 0===n?void 0:n.length)<10||"pincode"===t.target.name&&(null===(c=t.target.value)||void 0===c?void 0:c.length)<6)&&(a("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerHTML=null,document.getElementsByName("".concat(t.target.name))[0].focus());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t.target.value).toLowerCase())&&(a("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerHTML=null,document.getElementsByName("".concat(t.target.name))[0].focus());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(u.a)(r.a.mark((function e(a){var n,c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),(n=a.target.value).length>0&&n.match("/")&&(c=n.split("/d/"),s=c[1].split("/"),i=s[0],(null===t||void 0===t?void 0:t.school_id)?d(Object(m.a)(Object(m.a)({},o),{},{school_logo:i})):f(Object(m.a)(Object(m.a)({},O),{},{school_logo:i})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New School"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:N,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"school_name",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.school_name:null===O||void 0===O?void 0:O.school_name,onChange:k,autoComplete:"Off",placeholder:"School Name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"sub_domain",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.sub_domain:null===O||void 0===O?void 0:O.sub_domain,onChange:k,autoComplete:"no-password",placeholder:"Sub domain"})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"text",className:"form-control",name:"school_logo",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.school_logo:null===O||void 0===O?void 0:O.school_logo,onChange:k,onBlur:function(e){return q.apply(this,arguments)},autoComplete:"no-password",placeholder:"School logo image urls"}),Object(b.jsx)("span",{style:{fontSize:"0.7rem"},children:"Note: Please copy public image url."})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"address",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.address:null===O||void 0===O?void 0:O.address,onChange:k,autoComplete:"no-password",placeholder:"address"})}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"city",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.city:null===O||void 0===O?void 0:O.city,onChange:k,autoComplete:"no-password",placeholder:"city"})})}),Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"state",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.state:null===O||void 0===O?void 0:O.state,onChange:k,autoComplete:"no-password",placeholder:"state"})})})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"pincode",maxLength:6,value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.pincode:null===O||void 0===O?void 0:O.pincode,onChange:k,autoComplete:"no-password",onBlur:T,placeholder:"pincode"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"contact_name",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.contact_name:null===O||void 0===O?void 0:O.contact_name,onChange:k,autoComplete:"no-password",placeholder:"contact_name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"email",className:"form-control",name:"contact_email",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.contact_email:null===O||void 0===O?void 0:O.contact_email,onChange:k,onBlur:function(e){return L.apply(this,arguments)},autoComplete:"no-password",placeholder:"contact_email"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"contact_mobile",value:(null===t||void 0===t?void 0:t.school_id)?null===o||void 0===o?void 0:o.contact_mobile:null===O||void 0===O?void 0:O.contact_mobile,onChange:k,maxLength:10,onBlur:T,autoComplete:"no-password",placeholder:"contact_mobile"})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",children:x.isLoading||_.isLoading?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.school_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"}),"Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"}),"Save"]})})}),(null===t||void 0===t?void 0:t.school_id)&&Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("button",{type:"button",className:"btn btn-sm bg-danger br-5 text-white ml-2",onClick:function(t){t.preventDefault(),f({}),d({}),e.push("/admin/school-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})}),Object(b.jsx)("button",{type:"button",className:"btn btn-sm bg-warning br-5 text-white ml-2",onClick:function(e){return y.apply(this,arguments)},children:g.isLoading?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(b.jsx)("span",{className:"fa fa-trash"})})]})]})]})]})}function le(){var e=Object(n.useContext)(S).state;return Object(D.a)("schools",Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/school/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}function de(e){var t=e.update,a=le(),n=a.data,c=a.isLoading,s=Object(l.g)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New School"]}),Object(b.jsx)("hr",{className:"mt-1"}),c&&Object(b.jsx)(B,{isLoading:c}),Object(b.jsx)("div",{className:"col-md-12 row",style:{height:"auto !important",maxHeight:"380px",overflowY:"scroll"},children:!c&&(null===n||void 0===n?void 0:n.map((function(e){var a;return Object(b.jsx)("div",{className:"card mb-2 pl-3 pr-2 col-md-4 no-gutter",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-12 text-left btn btn-sm",children:Object(b.jsx)("a",{style:{fontSize:"1.2rem",textDecoration:"none",color:"black",borderBottom:"1px solid black"},href:"https://".concat(null===e||void 0===e?void 0:e.sub_domain,".acadelearn.com"),target:"_blank",children:"http://".concat(null===e||void 0===e||null===(a=e.sub_domain)||void 0===a?void 0:a.toLowerCase(),".acadelearn.com")})}),Object(b.jsx)("div",{className:"col-md-2 pl-2 pt-3",children:Object(b.jsx)("img",{src:"https://drive.google.com/uc?export=view&id=".concat(null===e||void 0===e?void 0:e.school_logo),style:{width:"60px"},className:"img-responsive"})}),Object(b.jsxs)("div",{className:"col-md-9 pr-1 ml-2 pt-3",children:[Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"name-label",children:"School Name:"}),Object(b.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.school_name})]}),Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsx)("div",{className:"name-label",children:"Pincode:"}),Object(b.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.pincode})]}),Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsx)("div",{className:"name-label",children:"Contact Email:"}),Object(b.jsx)("div",{className:"name-main text-lower",children:null===e||void 0===e?void 0:e.contact_email})]}),Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsx)("div",{className:"name-label",children:"Contact Mobile:"}),Object(b.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.contact_mobile})]})]}),Object(b.jsxs)("div",{className:"col-md-12 pl-0 pr-0 pb-2",children:[Object(b.jsx)("hr",{className:"mb-1"}),!0===t&&Object(b.jsx)("div",{className:"pl-2 pr-2",children:Object(b.jsxs)("button",{className:"btnb tn-sm dark bg-success",onClick:function(t){s.push("/admin/school-management/update/".concat(null===e||void 0===e?void 0:e._id))},children:[Object(b.jsx)("span",{className:"fa fa-pencil text-warning mr-2"}),"Edit"]})})]})]})},null===e||void 0===e?void 0:e._id)})))})]})}function re(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(!0),s=Object(j.a)(c,2),i=s[0],o=s[1],d=(Object(l.i)(),Object(n.useContext)(S).state),v=Object(E.useToasts)().addToast,m=Object(n.useState)(null),p=Object(j.a)(m,2),h=p[0],O=p[1],f=Object(n.useState)(null),x=Object(j.a)(f,2),_=(x[0],x[1],Object(n.useState)(null)),g=Object(j.a)(_,2),N=(g[0],g[1],Object(l.g)()),y=Object(X.b)(),k={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+d.access_token}},w=new FormData;function C(){return(C=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(o(!1),O(t.target.files[0]),w.append("file",t.target.files[0]),w.append("test","testdata")):(o(!0),v("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=Object(Y.a)((function(e){return console.log(e.file),F.a.post("".concat(I,"v1/school/upload"),e,k)}),{onSuccess:function(){y.invalidateQueries("schools"),a(!1),N.push("/admin/school-management/"),v("School added successfully",{appearance:"success",autoDismiss:!0})}}),A=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w.append("file",h),e.next=4,T.mutate(w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Schools"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("a",{href:"/sampledata/school.csv",download:!0,children:"Download Sample File"}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:A,method:"POST",encType:"multipart/form-data",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return C.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:(null===T||void 0===T?void 0:T.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark btn-danger ml-2",onClick:function(e){e.preventDefault(),N.push("/admin/school-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function ue(){var e=M().data,t=Object(l.h)(),a=(null===t||void 0===t?void 0:t.pathname).split("/")[2];return e&&(null===e||void 0===e?void 0:e.some((function(e){return(null===e||void 0===e?void 0:e.module_slug)===a})))}function je(){Object(l.i)();var e=Object(l.h)(),t=Object(n.useContext)(S).state,a=e.pathname.split("/")[2],c=null===t||void 0===t?void 0:t.user_type,s=null===t||void 0===t?void 0:t.email;return Object(D.a)("single-permission-".concat(a),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/permission/view/").concat(a,"/").concat(c,"/").concat(s),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}function ve(e){var t,a=Object(l.h)(),n=(null===a||void 0===a||null===(t=a.pathname)||void 0===t?void 0:t.split("/"))[2],c=je().data;return c&&c.some((function(t){return t.method_name=="".concat(e,"-").concat(n)}))}function me(){var e,t=Object(l.g)(),a=Object(l.i)(),c=(Object(l.h)().pathname,Object(E.useToasts)().addToast,Object(n.useContext)(S).state,[{key:"master_admin",value:"Master Admin"},{key:"sub_admin",value:"Sub Admin"},{key:"app_module",value:"App Module"}]),s=Object(n.useState)(""),i=Object(j.a)(s,2),o=i[0],d=i[1],v=Object(n.useState)(""),p=Object(j.a)(v,2),h=p[0],O=p[1],f=Object(n.useState)(""),x=Object(j.a)(f,2),_=x[0],g=x[1],N=Object(n.useState)(""),y=Object(j.a)(N,2),k=y[0],w=y[1],C=Object(n.useState)(!1),T=Object(j.a)(C,2),A=T[0],L=T[1],B=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.module_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/module/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,M=q().data,z=Object(n.useState)(),U=Object(j.a)(z,2),Q=U[0],P=U[1],H=Object(n.useState)({}),R=Object(j.a)(H,2),W=R[0];R[1];function V(){d(""),O(""),P({}),L(!1)}Object(n.useEffect)((function(){P(B)}),[B]);var G=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname),s=Object(l.g)(),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/module/create"),e,i)}),{onSuccess:function(){t.invalidateQueries("app-modules"),o("App Module added successfully",{appearance:"success",autoDismiss:!0}),s.push("".concat(c))},onError:function(){o("Error White Creating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),K=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.patch("".concat(I,"v1/module/update/").concat(null===c||void 0===c?void 0:c.module_id),e,i)}),{onSuccess:function(){t.invalidateQueries("app-modules"),o("Module updated successfully",{appearance:"success",autoDismiss:!0}),s.push("/admin/app-module")},onError:function(){o("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),Z=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/module/delete/").concat(null===c||void 0===c?void 0:c.module_id),e,i)}),{onSuccess:function(){t.invalidateQueries("app-modules"),o("Module deleted successfully",{appearance:"success",autoDismiss:!0}),s.push("/admin/app-module")},onError:function(){o("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),$=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),L(!0),W.module_name=(null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_name:o,W.module_slug=J((null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_name:o),W.module_icon=(null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_icon:h,W.module_sequence=(null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_sequence:_,(null===a||void 0===a?void 0:a.module_id)?W.module_type=null===Q||void 0===Q?void 0:Q.module_type:W.module_type=k,!(null===a||void 0===a?void 0:a.module_id)){e.next=12;break}return e.next=10,K.mutate(W);case 10:e.next=14;break;case 12:return e.next=14,G.mutate(W);case 14:V();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ee(){return(ee=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),W.module_id=null===a||void 0===a?void 0:a.module_id,e.next=4,Z.mutate(W);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Create App Module"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:$,children:[Object(b.jsx)("div",{className:"form-group p-rel",children:Object(b.jsxs)("select",{name:"module_type",className:"form-control",value:null===Q||void 0===Q?void 0:Q.module_type,onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?P(Object(m.a)(Object(m.a)({},Q),{},{module_type:e.target.value})):w(e.target.value)},children:[Object(b.jsx)("option",{children:"Select Module Type"}),null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.value})}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_name:o,onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?P(Object(m.a)(Object(m.a)({},Q),{},{module_name:e.target.value})):d(e.target.value)},placeholder:"Module Name"})}),Object(b.jsxs)("div",{className:"form-group p-rel",children:[Object(b.jsx)("input",{type:"text",className:"form-control ".concat((null===a||void 0===a?void 0:a.module_id)?"pl6x":""),value:(null===a||void 0===a?void 0:a.module_id)?null===Q||void 0===Q?void 0:Q.module_icon:h,placeholder:"Module Icon",onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?P(Object(m.a)(Object(m.a)({},Q),{},{module_icon:e.target.value})):O(e.target.value)}}),Object(b.jsx)("span",{className:"fa p-abs tl10 ".concat(null===Q||void 0===Q?void 0:Q.module_icon)})]}),Object(b.jsx)("div",{className:"form-group p-rel",children:Object(b.jsxs)("select",{name:"module_sequence",className:"form-control",value:null===Q||void 0===Q?void 0:Q.module_sequence,onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?P(Object(m.a)(Object(m.a)({},Q),{},{module_sequence:e.target.value})):g(e.target.value)},children:[Object(b.jsx)("option",{children:"Select Sequence"}),null===M||void 0===M?void 0:M.map((function(e,t){return Object(b.jsx)("option",{value:t,children:t},t)}))]})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",children:A?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(b.jsx)(b.Fragment,{children:(null===a||void 0===a?void 0:a.module_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===a||void 0===a?void 0:a.module_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-sm dark bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),V(),P({}),t.push("/admin/app-module")},children:[Object(b.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return ee.apply(this,arguments)},disbaled:null===Z||void 0===Z||null===(e=Z.isLoading)||void 0===e?void 0:e.toString(),children:(null===Z||void 0===Z?void 0:Z.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})]})]})]})]})}function be(e){var t=e.module,a=Object(l.g)();return Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:[Object(b.jsx)("span",{className:"fa fa-pencil-square mr-2 text-success pointer",onClick:function(e){e.preventDefault(),a.push("/admin/app-module/".concat(null===t||void 0===t?void 0:t._id))}}),Object(b.jsx)("span",{className:"fa fa-eye mr-2 pointer text-danger",onClick:function(e){return a.push("/admin/".concat(null===t||void 0===t?void 0:t.module_slug))}})]})}function pe(e){var t=e.module;return Object(b.jsx)("div",{className:"lg-card",children:Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsx)("div",{className:"label-name",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-2 flex mr-3",children:[Object(b.jsx)("button",{className:"".concat("master_admin"===(null===t||void 0===t?void 0:t.module_type)?"dark bg-success":"dark"," mr-2"),children:null===t||void 0===t?void 0:t.module_sequence}),Object(b.jsx)("span",{className:"fa ".concat(null===t||void 0===t?void 0:t.module_icon," mt-1 mr-1")})]}),Object(b.jsxs)("div",{className:"col-md-9",children:[Object(b.jsx)("div",{children:null===t||void 0===t?void 0:t.module_name}),Object(b.jsx)("div",{children:null===t||void 0===t?void 0:t.module_type})]})]})}),Object(b.jsx)(be,{module:t})]})})}function he(){var e=q(),t=e.data,a=e.isLoading;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Modules"]}),Object(b.jsx)("hr",{className:"mt-1"}),a&&Object(b.jsx)(B,{isLoading:a}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container pr-0",children:null===t||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(pe,{module:e},null===e||void 0===e?void 0:e._id)}))})]})}a(149);function Oe(){var e,t=Object(l.g)(),a=Object(l.i)(),c=(Object(l.h)(),Object(n.useContext)(S).state,Object(n.useState)("")),s=Object(j.a)(c,2),i=s[0],o=s[1],d=Object(n.useState)(!1),v=Object(j.a)(d,2),p=(v[0],v[1]),h=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.role_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-role-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/role/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data;console.log(h);var O=G().data,f=Object(n.useState)(),x=Object(j.a)(f,2),_=x[0],g=x[1];Object(n.useEffect)((function(){w(O&&(null===O||void 0===O?void 0:O.length))}),[O]);var N=Object(n.useState)(),y=Object(j.a)(N,2),k=y[0],w=y[1];function C(){return(C=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(null===a||void 0===a?void 0:a.role_id)?g(Object(m.a)(Object(m.a)({},_),{},{role_id:(null===_||void 0===_?void 0:_.role_id)+1})):w(void 0===k?1:+k+1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(null===a||void 0===a?void 0:a.role_id)?k===(null===_||void 0===_?void 0:_.role_id)?g(Object(m.a)(Object(m.a)({},_),{},{role_id:k})):g(Object(m.a)(Object(m.a)({},_),{},{role_id:k-1})):k>1&&w(k-1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=Object(n.useState)({}),L=Object(j.a)(A,2),q=L[0],B=L[1];function M(){o(""),w(O&&(null===O||void 0===O?void 0:O.length)),g({})}Object(n.useEffect)((function(){w(null===h||void 0===h?void 0:h.role_id),g(h)}),[h]);var z=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/role/create"),e,s)}),{onSuccess:function(){t.invalidateQueries("roles"),i("Roles added successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/app-roles")}})}(),U=function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)()),c=Object(X.b)(),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.role_id;return F.a.patch("".concat(I,"v1/role/update/").concat(a),e,s)}),{onSuccess:function(){c.invalidateQueries("roles"),i("Category Updated successfully",{appearance:"success",autoDismiss:!0}),a.push("/admin/app-roles")}})}(),Q=function(){Object(l.h)().pathname;var e=Object(l.g)(),t=Object(X.b)(),a={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},c=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/role/delete"),e,a)}),{onSuccess:function(){t.invalidateQueries("roles"),e.push("/admin/app-roles"),c("Role deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),P=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),p(!0),(null===_||void 0===_?void 0:_.role_name)!==i&&(null===a||void 0===a?void 0:a.role_id)?(q.role_name=null===_||void 0===_?void 0:_.role_name,q.role_slug=V(null===_||void 0===_?void 0:_.role_name)):(q.role_name=i,q.role_slug=V(i)),(null===_||void 0===_?void 0:_.role_id)!==k&&(null===a||void 0===a?void 0:a.role_id)?q.role_id=k:(null===_||void 0===_?void 0:_.role_id)===k&&(null===a||void 0===a?void 0:a.role_id)?q.role_id=null===_||void 0===_?void 0:_.role_id:q.role_id=k,!(null===a||void 0===a?void 0:a.role_id)){e.next=9;break}return e.next=7,U.mutate(q);case 7:e.next=11;break;case 9:return e.next=11,z.mutate(q);case 11:M();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H(){return(H=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),B(Object(m.a)(Object(m.a)({},q),{},{role_id:null===a||void 0===a?void 0:a.role_id})),e.next=4,Q.mutate(q);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Create App Role"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:P,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a?void 0:a.role_id)?null===_||void 0===_?void 0:_.role_name:i,onChange:function(e){(null===a||void 0===a?void 0:a.role_id)?g(Object(m.a)(Object(m.a)({},_),{},{role_name:e.target.value})):o(e.target.value)},placeholder:"Role Name"})}),Object(b.jsxs)("div",{className:"form-group p-rel flex",children:[Object(b.jsx)("input",{className:"form-control",type:"text",value:(null===a||void 0===a?void 0:a.role_id)?null===_||void 0===_?void 0:_.role_id:k,readOnly:!0}),Object(b.jsx)("button",{onClick:function(e){return C.apply(this,arguments)},type:"button",className:"bi bi-arrow-up dark btn btn-sm",style:{fontSize:"0.9rem"},activestyle:"outline: none"}),Object(b.jsx)("button",{onClick:function(e){return T.apply(this,arguments)},type:"button",className:"bi bi-arrow-down red btn btn-sm",style:{fontSize:"0.9rem"},activestyle:"outline: none"})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",disabled:(null===z||void 0===z?void 0:z.isLoading)||(null===U||void 0===U?void 0:U.isLoading),children:(null===z||void 0===z?void 0:z.isLoading)||(null===U||void 0===U?void 0:U.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===a||void 0===a?void 0:a.role_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===a||void 0===a?void 0:a.role_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{type:"button",className:"btn btn-sm bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),M(),g({}),t.push("/admin/app-roles")},children:[Object(b.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(b.jsx)("button",{type:"button",className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return H.apply(this,arguments)},disbaled:null===Q||void 0===Q||null===(e=Q.isLoading)||void 0===e?void 0:e.toString(),children:(null===Q||void 0===Q?void 0:Q.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})]})]})]})]})}function fe(e){var t=e.role,a=Object(l.g)();return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){e.preventDefault(),a.push("/admin/app-roles/".concat(null===t||void 0===t?void 0:t._id))},children:[Object(b.jsx)("span",{className:"fa fa-pencil-square mr-2"}),"Edit"]})})}function xe(e){var t=e.role;return Object(b.jsx)("div",{className:"lg-card",children:Object(b.jsxs)("div",{className:"admin-name",children:[Object(b.jsxs)("div",{className:"name-main",children:["RoleName: ",null===t||void 0===t?void 0:t.role_name]}),Object(b.jsxs)("div",{className:"name-main",children:["RoleID: ",null===t||void 0===t?void 0:t.role_id]}),Object(b.jsx)(fe,{role:t})]})})}function _e(){var e=G(),t=e.data,a=e.isLoading;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Roles"]}),Object(b.jsx)("hr",{className:"mt-1"}),a&&Object(b.jsx)(B,{isLoading:a}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:null===t||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(xe,{role:e},null===e||void 0===e?void 0:e._id)}))})]})}a(150);function ge(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.role_slug,c=null===t||void 0===t?void 0:t.admin_email;return Object(D.a)(["role-permissions-".concat(a,"-").concat(c)],Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===a){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/permission/view-all/").concat(a,"/").concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}function Ne(){var e,t,a,c=this,s=Object(l.g)(),i=Object(l.i)(),o=[{key:"create",value:"Create",icon:'<span class="bi bi-plus-circle-fill"></span>'},{key:"update",value:"Update",icon:'<span class="bi bi-pencil-fill"></span>'},{key:"delete",value:"Delete",icon:'<span class="bi bi-trash-fill"></span>'},{key:"upload",value:"Upload",icon:'<span class="bi bi-cloud-upload-fill"></span>'},{key:"view",value:"View",icon:'<span class="bi bi-eye-fill"></span>'}],d=Object(n.useState)(!1),v=Object(j.a)(d,2),m=(v[0],v[1]),p=(je().data,ge().data),h=G().data,O=q().data,f=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.role;return Object(D.a)("sub-admins-".concat(a),Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token||"master_admin"!=(null===e||void 0===e?void 0:e.user_type)){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/admin/role-view-all/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}(),x=f.data,_=f.isLoading,g=Object(n.useState)({}),N=Object(j.a)(g,2),y=N[0];N[1];function k(){Array.from(document.querySelectorAll(".checkbox")).map((function(e){e.checked=!1}))}var w=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=Object(l.h)().pathname,i=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},d=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/permission/create"),e,o)}),{onSuccess:function(){t.invalidateQueries("role-permissions-".concat(null===c||void 0===c?void 0:c.role_slug,"-").concat(null===c||void 0===c?void 0:c.admin_email)),t.invalidateQueries("role-modules-".concat(null===c||void 0===c?void 0:c.role_slug,"-").concat(null===c||void 0===c?void 0:c.admin_email)),d("Permission added successfully",{appearance:"success",autoDismiss:!0}),i.push("".concat(s))}})}(),C=function(e){var t=Object(l.i)(),a=Object(l.h)().pathname,c=Object(l.g)(),s=Object(X.b)(),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.permission_id;return F.a.patch("".concat(I,"v1/permission/update/").concat(a),e,i)}),{onSuccess:function(){s.invalidateQueries("role-permissions-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),s.invalidateQueries("role-modules-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),o("Permissions Updated successfully",{appearance:"success",autoDismiss:!0}),c.push("".concat(a))}})}(),T=function(){var e=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===i||void 0===i?void 0:i.permission_id)){e.next=7;break}return e.next=5,C.mutate(y);case 5:e.next=13;break;case 7:return a=[],Array.from(document.querySelectorAll(".module-methods")).map((function(e){if(!0===e.checked){var t=e.value.split("_");a.push({role_id:null===i||void 0===i?void 0:i.role_id,role_slug:null===i||void 0===i?void 0:i.role_slug,role:null===i||void 0===i?void 0:i.role,email:null===i||void 0===i?void 0:i.admin_email,module_id:t[0],module_name:t[1],module_slug:t[2],module_icon:t[3],method_name:t[4]})}})),n=[],Array.from(document.querySelectorAll(".module")).map((function(e){if(!0===e.checked){var t=e.value.split("_");n.push({role_id:null===i||void 0===i?void 0:i.role_id,role_slug:null===i||void 0===i?void 0:i.role_slug,role:null===i||void 0===i?void 0:i.role,email:null===i||void 0===i?void 0:i.admin_email,module_id:t[0],module_name:t[1],module_slug:t[2],module_icon:t[3]})}})),e.next=13,w.mutate({module:n,method:a});case 13:k();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function A(e){var t="module-"+e,a="method-"+e,n=document.getElementById(t).checked;Array.from(document.getElementsByName(a)).map((function(e){e.checked=!!n}))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Permission"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:T,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",value:"".concat(null===i||void 0===i?void 0:i.role_id,"-").concat(null===i||void 0===i?void 0:i.role_slug,"-").concat(null===i||void 0===i?void 0:i.role),onChange:function(e){if("_"!==e.target.value){var t=e.target.value,a=t.split("-")[0],n=t.split("-")[1],c=t.split("-")[2];s.push("/admin/app-permissions/".concat(a,"/").concat(n,"/").concat(c))}else s.push("/admin/app-permissions")},children:[Object(b.jsx)("option",{value:"_",children:"Select Roles"}),null===h||void 0===h?void 0:h.map((function(e){return Object(b.jsx)("option",{value:"".concat(null===e||void 0===e?void 0:e._id,"-").concat(null===e||void 0===e?void 0:e.role_slug,"-").concat(null===e||void 0===e?void 0:e.role_id),children:null===e||void 0===e?void 0:e.role_name},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",onChange:function(e){if("_"!==e.target.value){var t=e.target.value;s.push("/admin/app-permissions/".concat(null===i||void 0===i?void 0:i.role_id,"/").concat(null===i||void 0===i?void 0:i.role_slug,"/").concat(null===i||void 0===i?void 0:i.role,"/").concat(t))}else s.push("/admin/app-permissions")},value:null===i||void 0===i?void 0:i.admin_email,children:[Object(b.jsx)("option",{value:"_",children:_?"loading...":"Select User"}),null===x||void 0===x?void 0:x.map((function(e){return Object(b.jsxs)("option",{value:e.email,children:[e.first_name," ",e.last_name,"\xa0 - \xa0",e.email]},null===e||void 0===e?void 0:e._id)}))]})}),(null===i||void 0===i?void 0:i.admin_email)&&Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("div",{className:"col-md-12 pl-0 pr-2",style:{minHeight:"280px",maxHeight:"280px",overflow:"scroll"},children:null===O||void 0===O?void 0:O.map((function(e,t){var a=$(p,"module_slug","".concat(null===e||void 0===e?void 0:e.module_slug));return Object(b.jsxs)("div",{className:"card pt-0 pb-0 mb-2",children:[Object(b.jsxs)("label",{className:"mb-0 ac-heading",children:[Object(b.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon," mr-2 ml-2 ")}),Object(b.jsx)("input",{type:"checkbox",name:"module-".concat(null===e||void 0===e?void 0:e.module_slug),id:"module-".concat(null===e||void 0===e?void 0:e.module_slug),className:"module mr-2",disabled:a,value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.module_name,"_").concat(null===e||void 0===e?void 0:e.module_slug,"_").concat(null===e||void 0===e?void 0:e.module_icon),onChange:A.bind(c,null===e||void 0===e?void 0:e.module_slug)}),null===e||void 0===e?void 0:e.module_name]}),Object(b.jsx)("div",{className:"row ml-2 mr-2",children:null===o||void 0===o?void 0:o.map((function(t){var a=$(p,"method_name","".concat(null===t||void 0===t?void 0:t.key,"-").concat(null===e||void 0===e?void 0:e.module_slug));if("dashboard"!==(null===e||void 0===e?void 0:e.module_slug))return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"col-md-4 pl-0 pr-0 pt-1 pb-1",children:Object(b.jsxs)("label",{className:"mb-0",style:{fontSize:"0.85rem"},children:[Object(b.jsx)("input",{type:"checkbox",name:"method-".concat(null===e||void 0===e?void 0:e.module_slug),className:"module-methods mr-1 mr-1",value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.module_name,"_").concat(null===e||void 0===e?void 0:e.module_slug,"_").concat(null===e||void 0===e?void 0:e.module_icon,"_").concat(null===t||void 0===t?void 0:t.key,"-").concat(null===e||void 0===e?void 0:e.module_slug),disabled:a}),Object(b.jsx)("span",{className:"ml-0 mr-1",style:{fontSize:"0.80rem"},dangerouslySetInnerHTML:{__html:null===t||void 0===t?void 0:t.icon}}),null===t||void 0===t?void 0:t.value]})},null===t||void 0===t?void 0:t._id)})}))})]},null===e||void 0===e?void 0:e._id)}))})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",disabled:(null===w||void 0===w?void 0:w.isLoading)||(null===C||void 0===C?void 0:C.isLoading),children:(null===w||void 0===w?void 0:w.isLoading)||(null===C||void 0===C?void 0:C.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===i||void 0===i?void 0:i.permission_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===i||void 0===i?void 0:i.role)&&Object(b.jsxs)("button",{type:"button",className:"btn btn-sm bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),k(),s.push("/admin/app-permissions")},children:[Object(b.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),(null===i||void 0===i?void 0:i.permission_id)&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{type:"button",className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:handleDelete,disbaled:null===(e=deleteMutation)||void 0===e||null===(t=e.isLoading)||void 0===t?void 0:t.toString(),children:(null===(a=deleteMutation)||void 0===a?void 0:a.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})})]})]})]})}function ye(e){var t=e.permission,a=(Object(l.g)(),Object(n.useState)()),c=Object(j.a)(a,2),s=(c[0],c[1],function(){var e=Object(l.h)().pathname,t=Object(l.h)(),a=Object(l.g)(),c=Object(X.b)(),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/permission/delete"),e,s)}),{onSuccess:function(){c.invalidateQueries("role-permissions-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),c.invalidateQueries("role-modules-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),i("Permission deleted successfully",{appearance:"success",autoDismiss:!0}),a.push("".concat(e))}})}());function i(){return(i=Object(u.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,s.mutate({permission_id:a});case 3:setTimeout((function(){document.getElementById("".concat(a)).style.display="none"}),1500);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row"},children:Object(b.jsx)("span",{style:{cursor:"pointer"},className:"text-danger",onClick:function(e){return i.apply(this,arguments)}.bind(this,null===t||void 0===t?void 0:t._id),children:(null===s||void 0===s?void 0:s.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})})}function ke(e){var t=e.permission,a=(null===t||void 0===t?void 0:t.method_name).split("-")[0];return Object(b.jsxs)("div",{className:"mb-1 ml-2 col-md-3 pl-2 flex b1",id:null===t||void 0===t?void 0:t._id,children:[Object(b.jsxs)("div",{children:["create"===a&&Object(b.jsx)("span",{className:"bi bi-plus-circle-fill mt-1 mr-1"}),"update"===a&&Object(b.jsx)("span",{className:"bi bi-pencil-square mt-1 mr-1"}),"upload"===a&&Object(b.jsx)("span",{className:"bi bi-cloud-upload mt-1 mr-1"}),"delete"===a&&Object(b.jsx)("span",{className:"bi bi-trash2-fill mt-1 mr-1"}),"view"===a&&Object(b.jsx)("span",{className:"bi bi-eye-fill mt-1 mr-1"}),a]}),Object(b.jsx)(ye,{permission:t})]})}function we(){var e,t=this,a=ge(),c=a.data,s=a.isLoading,i=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.role_slug,c=null===t||void 0===t?void 0:t.admin_email;return Object(D.a)(["role-modules-".concat(a,"-").concat(c)],Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===a){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/permission/module/").concat(a,"/").concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}().data,o=Object(l.i)(),d=function(){var e=Object(l.h)().pathname,t=Object(l.h)(),a=Object(l.g)(),c=Object(X.b)(),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/permission/delete-all"),e,s)}),{onSuccess:function(){c.invalidateQueries("role-permissions-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),c.invalidateQueries("role-modules-".concat(null===t||void 0===t?void 0:t.role_slug,"-").concat(null===t||void 0===t?void 0:t.admin_email)),i("Permission deleted successfully",{appearance:"success",autoDismiss:!0}),a.push("".concat(e))}})}();function j(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(r.a.mark((function e(t,a){var n,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,c=a,s=null===o||void 0===o?void 0:o.admin_email,e.next=5,d.mutate({module_id:n,module_slug:c,email:s});case 5:setTimeout((function(){document.getElementById("".concat(n)).style.display="none"}),1500);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Permissions for",Object(b.jsx)("span",{className:"badge-danger br-5 ml-2 p-1",style:{fontSize:"0.90rem"},children:null===o||void 0===o||null===(e=o.role_slug)||void 0===e?void 0:e.replaceAll("-"," ")}),Object(b.jsx)("span",{className:"badge-success br-5 ml-2 p-1",style:{fontSize:"0.90rem"},children:null===o||void 0===o?void 0:o.admin_email})]}),Object(b.jsx)("hr",{className:"mt-1"}),s&&Object(b.jsx)(B,{isLoading:s}),Object(b.jsx)("div",{className:"col-md-12 pl-0 no-gutter data-container",children:null===i||void 0===i?void 0:i.map((function(e){var a=null===c||void 0===c?void 0:c.filter((function(t){return(null===t||void 0===t?void 0:t.module_slug)==(null===e||void 0===e?void 0:e.module_slug)}));return Object(b.jsxs)("div",{className:"col-md-12 card pl-0 pr-0 ml-0 mb-2",id:"".concat(null===e||void 0===e?void 0:e._id),children:[Object(b.jsxs)("p",{className:"pr-2 mb-1 pt-2 pb-2 ml-0 pl-2",style:{backgroundColor:"rgb(0, 55, 77)",color:"#fff"},children:[Object(b.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon," mr-2 mb-1")}),null===e||void 0===e?void 0:e.module_name,Object(b.jsx)("span",{style:{cursor:"pointer"},className:"text-warning pull-right",onClick:j.bind(t,null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.module_slug),children:(null===d||void 0===d?void 0:d.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})]}),Object(b.jsx)("hr",{className:"mt-0 mb-1"}),Object(b.jsx)("div",{className:"row col-md-12",children:null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsx)(ke,{permission:e},null===e||void 0===e?void 0:e._id)}))})]},null===e||void 0===e?void 0:e._id)}))})]})}a(151);function Ce(){var e=Object(l.g)(),t=Object(l.i)(),a=Object(l.h)().pathname,c=Object(E.useToasts)().addToast,s=Object(n.useContext)(S).state,i=Object(n.useState)(!1),o=Object(j.a)(i,2),d=o[0],v=o[1],p=Object(n.useState)("admin"),h=Object(j.a)(p,2),O=(h[0],h[1],function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.class_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/class/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data),f=Object(n.useState)({}),x=Object(j.a)(f,2),_=x[0],g=x[1],N=Object(n.useState)([]),y=Object(j.a)(N,2),k=(y[0],y[1]),w=Object(n.useState)(),C=Object(j.a)(w,2),T=(C[0],C[1],{class_name:"",section:"",capacity:"",class_teacher:"",school_id:"",teacher_id:""}),A=Object(n.useState)(T),L=Object(j.a)(A,2),q=L[0],B=L[1];Object(n.useEffect)((function(){g(O),k(null===O||void 0===O?void 0:O.section)}),[O]);var M=Object(X.b)(),z={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+s.access_token}},U=Object(Y.a)((function(e){return console.log(e),F.a.post("".concat(I,"v1/class/create"),e,z)}),{onSuccess:function(){null===t||void 0===t||t.school_id;M.invalidateQueries("classes"),v(!1),B(T),e.push("".concat(a)),c("Class added successfully",{appearance:"success",autoDismiss:!0})}}),Q=Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.class_id;return F.a.patch("".concat(I,"v1/class/update/").concat(a),e,z)}),{onSuccess:function(){null===t||void 0===t||t.school_id;M.invalidateQueries("classes"),v(!1),B(T),e.push("".concat(a)),c("Class Updated successfully",{appearance:"success",autoDismiss:!0})}}),P=function(){var e=Object(u.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),v(!0),!(null===t||void 0===t?void 0:t.class_id)){e.next=7;break}return e.next=5,Q.mutate(_);case 5:e.next=14;break;case 7:return e.next=9,Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return null===e||void 0===e?void 0:e.value}));case 9:return n=e.sent,console.log(n),q.section=n,e.next=14,U.mutate(q);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H(e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.class_id)?g(Object(m.a)(Object(m.a)({},_),{},Object(W.a)({},a.target.name,a.target.value))):B(Object(m.a)(Object(m.a)({},q),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=[{value:"A"},{value:"B"},{value:"C"},{value:"D"},{value:"E"},{value:"F"},{value:"G"},{value:"H"},{value:"I"},{value:"J"},{value:"K"},{value:"L"},{value:"M"},{value:"N"},{value:"O"},{value:"P"},{value:"Q"},{value:"R"},{value:"S"},{value:"T"},{value:"U"},{value:"V"},{value:"W"},{value:"X"},{value:"Y"},{value:"Z"}];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Class"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:P,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"class_name",value:(null===t||void 0===t?void 0:t.class_id)?null===_||void 0===_?void 0:_.class_name:null===q||void 0===q?void 0:q.class_name,onChange:H,placeholder:"Class Name"})}),Object(b.jsx)("div",{className:"form-group",children:J&&J.map((function(e,t){return Object(b.jsxs)("label",{className:"col-md-4 pl-0",children:[Object(b.jsx)("input",{type:"checkbox",className:"mr-1 classSection",value:null===e||void 0===e?void 0:e.value}),null===e||void 0===e?void 0:e.value]},t)}))}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"number",className:"form-control",name:"capacity",value:(null===t||void 0===t?void 0:t.class_id)?null===_||void 0===_?void 0:_.capacity:null===q||void 0===q?void 0:q.capacity,onChange:H,placeholder:"Class Capacity"})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.class_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Class"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Class"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(t){t.preventDefault(),e.push("/admin/class-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Se(){var e=new FormData,t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!0),o=Object(j.a)(i,2),d=o[0],v=o[1],m=Object(n.useContext)(S).state,p=Object(E.useToasts)().addToast,h=Object(n.useState)(null),O=Object(j.a)(h,2),f=O[0],x=O[1],_=Object(n.useState)(),g=Object(j.a)(_,2),N=(g[0],g[1],Object(n.useState)(!1)),y=Object(j.a)(N,2),k=(y[0],y[1],Object(n.useState)("admin")),w=Object(j.a)(k,2),C=(w[0],w[1],Object(l.g)()),T=Object(X.b)(),A={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+m.access_token}};function D(){return(D=Object(u.a)(r.a.mark((function t(a){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target.files[0].name,console.log("file onchange ",n),c=n.split(".")[1],console.log(c),"csv"===c?(v(!1),x(a.target.files[0]),e.append("test","testdata")):(v(!0),p("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var L=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/class/upload"),e,A)}),{onSuccess:function(){T.invalidateQueries("classes"),s(!1),p("Classes added successfully",{appearance:"success",autoDismiss:!0})}}),q=function(){var t=Object(u.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.append("file",f),t.next=4,L.mutate(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Classes"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("a",{href:"/sampledata/classes.csv",download:!0,children:"Download Sample File"}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:q,method:"POST",encType:"multipart/form-data",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return D.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:d,children:c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),C.push("/admin/class-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Te(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=t.school_id?"classes-".concat(t.school_id):"classes";return Object(D.a)(a,Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/class/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}function Ae(e){var t,a=e.update,c=e.Delete,s=Object(l.i)(),i=Object(l.g)(),o=Object(E.useToasts)().addToast,d=Object(n.useContext)(S).state,j=Object(X.b)(),v=Te(),m=v.data,p=(v.isLoading,le()),h=p.data,O=(p.schoolIsLoading,null===h||void 0===h?void 0:h.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===s||void 0===s?void 0:s.school_id)}))),f={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+d.access_token}},x=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/class/delete/").concat(e),f)}),{onSuccess:function(){var e=(null===s||void 0===s?void 0:s.school_id)?"classes-".concat(s.school_id):"classes";j.invalidateQueries(e),o("Class Deleted successfully",{appearance:"success",autoDismiss:!0})}}),_=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.mutate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),O&&(null===(t=O[0])||void 0===t?void 0:t.name)?"School: "+O[0].name:"All Classes"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"#"}),Object(b.jsx)("th",{scope:"col",children:"Class Name"}),Object(b.jsx)("th",{scope:"col",children:"Section"}),Object(b.jsx)("th",{scope:"col",children:"Capacity"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===m||void 0===m?void 0:m.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:t}),Object(b.jsx)("td",{children:e.class_name}),Object(b.jsx)("td",{children:e.section+" , "}),Object(b.jsx)("td",{children:e.capacity}),Object(b.jsxs)("td",{children:[!0===a&&Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){i.push("/admin/class-management/update/".concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})}),!0===c&&Object(b.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return _(null===e||void 0===e?void 0:e._id)},children:Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function De(){var e=Object(l.g)(),t=Object(l.i)(),a=Object(l.h)().pathname,c=Object(E.useToasts)().addToast,s=Object(n.useContext)(S).state,i=Object(n.useState)(!1),o=Object(j.a)(i,2),d=o[0],v=o[1],p=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.subject_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/subject/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,h=Object(n.useState)({}),O=Object(j.a)(h,2),f=O[0],x=O[1],_=le(),g=(_.data,_.isLoading,{subject_name:"",subject_slug:""}),N=Object(n.useState)(g),y=Object(j.a)(N,2),k=y[0],w=y[1];Object(n.useEffect)((function(){x(p)}),[p]);var C=Object(X.b)(),T={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+s.access_token}},A=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/subject/create"),e,T)}),{onSuccess:function(){C.invalidateQueries("subjects"),v(!1),w(g),e.push("".concat(a)),c("Subject added successfully",{appearance:"success",autoDismiss:!0})}}),L=Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.subject_id;return F.a.patch("".concat(I,"v1/subject/update/").concat(a),e,T)}),{onSuccess:function(){C.invalidateQueries("subjects"),v(!1),w(g),e.push("".concat(a)),c("Subject Updated successfully",{appearance:"success",autoDismiss:!0})}}),q=function(){var e=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),v(!0),!(null===t||void 0===t?void 0:t.subject_id)){e.next=8;break}return f.subject_slug=J(f.subject_name),e.next=6,L.mutate(f);case 6:e.next=15;break;case 8:if(""!=k.subject_name){e.next=13;break}v(!1),c("Please Enter a Subject Name",{appearance:"error",autoDismiss:!0}),e.next=15;break;case 13:return e.next=15,A.mutate(k);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function B(){return(B=Object(u.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.subject_id)?x(Object(m.a)(Object(m.a)({},f),{},Object(W.a)({},a.target.name,a.target.value))):w(Object(m.a)(Object(m.a)({},k),{},(n={},Object(W.a)(n,a.target.name,a.target.value),Object(W.a)(n,"subject_slug",J(a.target.value)),n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Subejct"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:q,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"subject_name",value:(null===t||void 0===t?void 0:t.subject_id)?null===f||void 0===f?void 0:f.subject_name:null===k||void 0===k?void 0:k.subject_name,onChange:function(e){return B.apply(this,arguments)},placeholder:"Subject Name"})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.subject_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Subject"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Subject"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger  ml-2",onClick:function(t){t.preventDefault(),e.push("/admin/subject-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Le(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(j.a)(s,2),o=i[0],d=i[1],v=Object(n.useContext)(S).state,m=Object(E.useToasts)().addToast,p=Object(n.useState)(null),h=Object(j.a)(p,2),O=h[0],f=h[1],x=Object(n.useState)(),_=Object(j.a)(x,2),g=(_[0],_[1],Object(n.useState)(!1)),N=Object(j.a)(g,2),y=(N[0],N[1],Object(l.g)()),k=Object(X.b)(),w={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+v.access_token}},C=new FormData;function T(){return(T=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(d(!1),f(t.target.files[0]),C.append("file",t.target.files[0]),C.append("test","testdata")):(d(!0),m("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=Object(Y.a)((function(e){return console.log(e.file),F.a.post("".concat(I,"v1/subject/upload"),e,w)}),{onSuccess:function(){k.invalidateQueries("subjects"),c(!1),m("Subjects added successfully",{appearance:"success",autoDismiss:!0})}}),D=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),C.append("file",O),e.next=4,A.mutate(C);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Subjects"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("a",{href:"/sampledata/subjects.csv",download:!0,children:"Download Sample File"}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:D,method:"POST",encType:"multipart/form-data",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return T.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",className:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:o,children:a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger  ml-2",onClick:function(e){e.preventDefault(),y.push("/admin/subject-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Fe(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=t.school_id?"subjects-".concat(t.school_id):"subjects";return Object(D.a)(a,Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/subject/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))))}function Ie(e){var t,a=e.update,c=e.Delete,s=Object(l.g)(),i=Object(E.useToasts)().addToast,o=Object(n.useContext)(S).state,d=Object(X.b)(),j=Object(l.i)(),v=Fe(),m=v.data,p=v.isLoading,h=le(),O=h.data,f=(h.schoolIsLoading,null===O||void 0===O?void 0:O.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===j||void 0===j?void 0:j.school_id)}))),x={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+o.access_token}},_=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/subject/delete/").concat(e),x)}),{onSuccess:function(){d.invalidateQueries("subjects"),i("Subject Deleted successfully",{appearance:"success",autoDismiss:!0})}}),g=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.mutate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),f&&(null===(t=f[0])||void 0===t?void 0:t.name)?"School: "+f[0].name:"All Subjects"]}),Object(b.jsx)("hr",{className:"mt-0"}),Object(b.jsx)(B,{isLoading:p}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"#"}),Object(b.jsx)("th",{scope:"col",children:"Subject Name"}),Object(b.jsx)("th",{scope:"col",children:"Subject URL"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===m||void 0===m?void 0:m.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:t}),Object(b.jsx)("td",{children:e.subject_name}),Object(b.jsx)("td",{children:e.subject_slug}),Object(b.jsxs)("td",{children:[!0===a&&Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){s.push("/admin/subject-management/update/".concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})}),!0===c&&Object(b.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return g(null===e||void 0===e?void 0:e._id)},children:Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function qe(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){var t=null===c||void 0===c?void 0:c.student_id;return F.a.patch("".concat(I,"v1/student/update/").concat(t),e,i)}),{onSuccess:function(){t.invalidateQueries("students-".concat(null===c||void 0===c?void 0:c.school_id,"-").concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.section)),s.push("/admin/students-management/view/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.section)),o("Student Updated successfully",{appearance:"success",autoDismiss:!0})}})}function Be(){var e=Object(l.g)(),t=Object(l.i)(),a=(Object(l.h)().pathname,Object(E.useToasts)().addToast),c=(Object(n.useContext)(S).state,Object(n.useState)(!1)),s=Object(j.a)(c,2),i=s[0],o=s[1],d=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.student_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/student/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,v=Object(n.useState)({}),p=Object(j.a)(v,2),h=p[0],O=p[1],f=le(),x=f.data,_=f.schoolIsLoading,g=Te(),N=g.data,y=g.classesIsLoading,k=Object(n.useState)({name:"",class_id:"",class:"",section:"",roll_no:"",mobile:"",email:""}),w=Object(j.a)(k,2),C=w[0],T=w[1];Object(n.useEffect)((function(){O(d)}),[d]);var A=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)();return Object(D.a)("rollno-".concat(null===t||void 0===t?void 0:t.school_id,"-").concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.section),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.access_token&&(null===t||void 0===t?void 0:t.school_id)&&(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.section))){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/student/roll-no/").concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.section),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}().data,L=Object(n.useState)(null),q=Object(j.a)(L,2),B=(q[0],q[1],function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/student/create"),e,i)}),{onSuccess:function(){var e=null===c||void 0===c?void 0:c.school_id,a=null===c||void 0===c?void 0:c.class_id;t.invalidateQueries("students-".concat(e,"-").concat(a)),s.push("/admin/students-management/view/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.section)),o("Student added successfully",{appearance:"success",autoDismiss:!0})}})}()),M=qe(),z=[{value:"A"},{value:"B"},{value:"C"},{value:"D"},{value:"E"},{value:"F"},{value:"G"},{value:"H"},{value:"I"},{value:"J"}],U=function(){var e=Object(u.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o(!0),!(null===t||void 0===t?void 0:t.student_id)){e.next=7;break}return e.next=5,M.mutate(h);case 5:e.next=21;break;case 7:if(C.school_id=t.school_id?t.school_id:"",""!=C.school_id){e.next=13;break}o(!1),a("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=21;break;case 13:return C.password="password",C.school_id=null===t||void 0===t?void 0:t.school_id,C.class_id=null===t||void 0===t?void 0:t.class_id,C.class=K(N,"_id",null===t||void 0===t?void 0:t.class_id,"class_name"),C.section=null===t||void 0===t?void 0:t.section,C.roll_no=A,e.next=21,B.mutate(C);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Q(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.student_id)?O(Object(m.a)(Object(m.a)({},h),{},Object(W.a)({},a.target.name,a.target.value))):T(Object(m.a)(Object(m.a)({},C),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(r.a.mark((function a(n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:999!=n.target.value&&((null===t||void 0===t?void 0:t.student_id)?(O(Object(m.a)(Object(m.a)({},h),{},Object(W.a)({},n.target.name,n.target.value))),e.push("/admin/students-management/update/".concat(n.target.value,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.student_id))):(T(Object(m.a)(Object(m.a)({},C),{},Object(W.a)({},"school_id",n.target.value))),t.class_id?e.push("/admin/students-management/create/".concat(n.target.value,"/").concat(null===t||void 0===t?void 0:t.class_id)):e.push("/admin/students-management/create/".concat(n.target.value))));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(r.a.mark((function a(n){var c,s,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=n.target.options[n.target.selectedIndex].dataset.class_name,999!=n.target.value&&((null===t||void 0===t?void 0:t.student_id)?(O(Object(m.a)(Object(m.a)({},h),{},(s={},Object(W.a)(s,n.target.name,n.target.value),Object(W.a)(s,"class",c),s))),e.push("/admin/students-management/update/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(n.target.value,"/").concat(null===t||void 0===t?void 0:t.student_id))):(T(Object(m.a)(Object(m.a)({},C),{},(i={},Object(W.a)(i,"class_id",n.target.value),Object(W.a)(i,"class",c),i))),t.school_id?e.push("/admin/students-management/create/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(n.target.value)):e.push("/admin/students-management/create/".concat(n.target.value))));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function J(){return(J=Object(u.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(null===t||void 0===t?void 0:t.student_id)?(O(Object(m.a)(Object(m.a)({},h),{},(c={},Object(W.a)(c,n.target.name,n.target.value),Object(W.a)(c,"class",class_name),c))),e.push("/admin/students-management/update/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(n.target.value,"/").concat(null===t||void 0===t?void 0:t.student_id))):(T(Object(m.a)(Object(m.a)({},C),{},Object(W.a)({},"section",n.target.value))),t.school_id&&t.class_id?e.push("/admin/students-management/create/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(n.target.value)):e.push("/admin/students-management/create/".concat(n.target.value)));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Student"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:U,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return H.apply(this,arguments)},value:t.school_id?t.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!_&&(null===x||void 0===x?void 0:x.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-6 pr-0",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"class_id",onChange:function(e){return R.apply(this,arguments)},value:null===t||void 0===t?void 0:t.class_id,children:[Object(b.jsx)("option",{value:"999",children:"Class"}),!y&&(null===N||void 0===N?void 0:N.map((function(e){return Object(b.jsxs)("option",{value:e._id,"data-class_name":e.class_name,children:[e.class_name,"Th"]},e._id)})))]})})}),Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{class:"form-control",name:"section",onChange:function(e){return J.apply(this,arguments)},value:null===t||void 0===t?void 0:t.section,children:[Object(b.jsx)("option",{children:"Section"}),z&&(null===z||void 0===z?void 0:z.map((function(e,t){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.value},"".concat(t,"-").concat(e))})))]})})})]}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"roll_no",value:(null===t||void 0===t?void 0:t.student_id)?null===h||void 0===h?void 0:h.roll_no:A,onChange:Q,readOnly:!0,placeholder:"Roll No"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:(null===t||void 0===t?void 0:t.student_id)?null===h||void 0===h?void 0:h.name:null===C||void 0===C?void 0:C.name,onChange:Q,placeholder:"Name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"password",value:"password",onChange:Q,placeholder:"Password"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"mobile",value:(null===t||void 0===t?void 0:t.student_id)?null===h||void 0===h?void 0:h.mobile:null===C||void 0===C?void 0:C.mobile,onChange:Q,placeholder:"Phone"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"email",value:(null===t||void 0===t?void 0:t.student_id)?null===h||void 0===h?void 0:h.email:null===C||void 0===C?void 0:C.email,onChange:Q,placeholder:"Email"})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:i?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.student_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Student"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Student"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/students-management/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.section))},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Me(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=(t[1],Object(n.useState)(!0)),s=Object(j.a)(c,2),i=s[0],o=s[1],d=Object(l.i)(),v=Object(n.useContext)(S).state,p=Object(E.useToasts)().addToast,h=Object(n.useState)(null),O=Object(j.a)(h,2),f=O[0],x=O[1],_=Object(n.useState)(null),g=Object(j.a)(_,2),N=(g[0],g[1]),y=Object(n.useState)(null),k=Object(j.a)(y,2),w=(k[0],k[1],Object(l.g)()),C=(Object(X.b)(),v.access_token,new FormData),T=le(),A=T.data,D=T.schoolIsLoading,L=Te(),q=L.data;L.classesIsLoading;function B(){return(B=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(o(!1),x(t.target.files[0]),C.append("file",t.target.files[0]),C.append("test","testdata")):(o(!0),p("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o=c.school_id?"students-".concat(c.school_id):"students";return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/student/upload"),e,s)}),{onSuccess:function(){null===c||void 0===c||c.school_id,t.invalidateQueries("".concat(o)),i("Student added successfully",{appearance:"success",autoDismiss:!0})}})}(),z=function(){var e=Object(u.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=K(A,"_id",null===d||void 0===d?void 0:d.school_id,"short"),C.append("file",f),C.append("school_id",null===d||void 0===d?void 0:d.school_id),C.append(["class_id"],null===d||void 0===d?void 0:d.class_id),C.append("short",a),null===d||void 0===d?void 0:d.school_id){e.next=10;break}p("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=12;break;case 10:return e.next=12,M.mutate(C);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===d||void 0===d?void 0:d.student_id)?setSingleStudent(Object(m.a)(Object(m.a)({},SingleStudent),{},Object(W.a)({},t.target.name,t.target.value))):(C.append(["school_id"],t.target.value),w.push("/admin/students-management/upload/".concat(t.target.value)),N(t.target.value));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===d||void 0===d?void 0:d.student_id)?setSingleStudent(Object(m.a)(Object(m.a)({},SingleStudent),{},Object(W.a)({},t.target.name,t.target.value))):(C.append(["class_id"],t.target.value),w.push("/admin/students-management/upload/".concat(null===d||void 0===d?void 0:d.school_id,"/").concat(t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Students"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("a",{href:"/sampledata/students.csv",download:!0,children:"Download Sample File"}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:z,method:"POST",encType:"multipart/form-data",children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return U.apply(this,arguments)},value:d.school_id,children:[Object(b.jsx)("option",{children:"Select School"}),!D&&(null===A||void 0===A?void 0:A.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"class_id",onChange:function(e){return Q.apply(this,arguments)},value:d.class_id,children:[Object(b.jsx)("option",{children:"Select Class"}),null===q||void 0===q?void 0:q.map((function(e){return Object(b.jsxs)("option",{value:e._id,children:[e.class_name," Th"]},e._id)}))]})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return B.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),w.push("/admin/students-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}var Ee=a(29);function ze(e){var t,a=e.update,c=e.Delete,s=Object(l.g)(),i=Object(l.i)(),o=["A","B","C","D","E","F"],d=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="students-".concat(t.school_id,"-").concat(t.class_id,"-").concat(t.section);return Object(D.a)(a,Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.access_token&&(null===t||void 0===t?void 0:t.school_id)&&(null===t||void 0===t?void 0:t.class_id)&&t.section)){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/student/view-all/").concat(t.school_id,"/").concat(t.class_id,"/").concat(t.section),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}(),j=d.data,v=d.isLoading,m=le().data,p=Te().data,h=null===m||void 0===m?void 0:m.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===i||void 0===i?void 0:i.school_id)})),O=function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/student/delete/").concat(e),c)}),{onSuccess:function(){var e="students-".concat(t.school_id,"-").concat(t.class_id,"-").concat(t.section);a.invalidateQueries(e),s("Student Deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),f=qe(),x=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.mutate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _(){return(_=Object(u.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.push("/admin/students-management/view/".concat(null===i||void 0===i?void 0:i.school_id,"/").concat(null===i||void 0===i?void 0:i.class_id,"/").concat(null===i||void 0===i?void 0:i.section,"/").concat(a)),setTimeout(Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.mutate({isActive:void 0===t||!1===t});case 2:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"})," All Students",Object(b.jsxs)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",children:["School Name: ",h&&(null===(t=h[0])||void 0===t?void 0:t.school_name)]}),Object(b.jsxs)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",children:["Total Student: ",null===j||void 0===j?void 0:j.length]})]}),Object(b.jsxs)("div",{className:"row col-md-12 mt-3",children:[Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control ","aria-label":"Default select example",name:"school_id",onChange:function(e){s.push("/admin/students-management/view/".concat(e.target.value))},value:i.school_id?i.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School Name"}),null===m||void 0===m?void 0:m.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsxs)("select",{className:"form-control ","aria-label":"Default select example",name:"class_id",onChange:function(e){s.push("/admin/students-management/view/".concat(null===i||void 0===i?void 0:i.school_id,"/").concat(e.target.value))},value:i.class_id,children:[Object(b.jsx)("option",{children:"Select Class"}),null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsxs)("option",{value:e._id,children:[e.class_name," Th"]},e._id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsxs)("select",{className:"form-control ",name:"section",value:null===i||void 0===i?void 0:i.section,onChange:function(e){s.push("/admin/students-management/view/".concat(null===i||void 0===i?void 0:i.school_id,"/").concat(null===i||void 0===i?void 0:i.class_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Select Section"}),null===o||void 0===o?void 0:o.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",id:"empInput",onKeyUp:function(){var e=document.querySelectorAll("#myTable tr:not(.header)"),t=document.querySelector("#empInput").value,a=new RegExp(t,"i"),n=function(e){return a.test(e.innerHTML)},c=function(e){var t=e.style,a=e.children;t.display=Object(Ee.a)(a).some(n)?"":"none"};setTimeout((function(){e.forEach(c)}),1e3)},placeholder:"Filter By Empid..",title:"Type in a name"})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",id:"nameInput",onKeyUp:function(){var e=document.querySelectorAll("#myTable tr:not(.header)"),t=document.querySelector("#nameInput").value,a=new RegExp(t,"i"),n=function(e){return a.test(e.innerHTML)},c=function(e){var t=e.style,a=e.children;t.display=Object(Ee.a)(a).some(n)?"":"none"};setTimeout((function(){e.forEach(c)}),1e3)},placeholder:"Filter By name..",autoComplete:"nope",title:"Type in a name"})})]}),Object(b.jsx)("div",{className:"col-md-12 mt-3 table-responsive row no-gutter data-container-category",style:{overflowX:"scroll"},children:Object(b.jsxs)("table",{className:"table table-hover",id:"myTable",style:{width:"1800px"},children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{class:"header",children:[Object(b.jsx)("th",{children:"#EmpID"}),Object(b.jsx)("th",{children:"Login Email"}),Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Class"}),Object(b.jsx)("th",{children:"Sec."}),Object(b.jsx)("th",{children:"Division"}),Object(b.jsx)("th",{children:"Roll"}),Object(b.jsx)("th",{className:"hidden_col",children:"Mobile"}),Object(b.jsx)("th",{children:"Email"}),Object(b.jsx)("th",{className:"hidden_col",children:"Action"})]})}),Object(b.jsxs)("tbody",{children:[Object(b.jsx)(B,{isLoading:v}),!v&&(null===j||void 0===j?void 0:j.map((function(e,t){var n,i;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:null===e||void 0===e?void 0:e.EmpId}),Object(b.jsxs)("td",{children:[e.username.toLowerCase(),Object(b.jsx)("a",{href:"https://".concat(null===(n=h[0])||void 0===n?void 0:n.sub_domain,".acadelearn.com/student/login"),target:"__blank",children:Object(b.jsx)("span",{className:"fa fa-link hidden_col pull-right"})})]}),Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.class}),Object(b.jsx)("td",{children:e.section}),Object(b.jsx)("td",{children:null!==(i=e.school_section)&&void 0!==i?i:e.section}),Object(b.jsx)("td",{children:e.roll_no}),Object(b.jsx)("td",{className:"hidden_col",children:e.mobile}),Object(b.jsx)("td",{children:null===e||void 0===e?void 0:e.email.toLowerCase()}),Object(b.jsxs)("td",{className:"flex hidden_col",children:[!0===a&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"btn dark ".concat((null===e||void 0===e?void 0:e.isActive)?"bg-success":"bg-danger"," text-white btn-sm mr-2"),onClick:function(){return function(e,t){return _.apply(this,arguments)}(null===e||void 0===e?void 0:e.isActive,null===e||void 0===e?void 0:e._id)},children:(null===e||void 0===e?void 0:e.isActive)?Object(b.jsx)("span",{className:"fa fa-check",title:"Make Inactive"}):Object(b.jsx)("span",{className:"fa fa-times",title:"Make Inactive"})}),Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){s.push("/admin/students-management/update/".concat(e.school_id,"/").concat(e.class_id,"/").concat(null===e||void 0===e?void 0:e.section,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})})]}),!0===c&&Object(b.jsx)("button",{className:"btn bg-danger text-white btn-sm",id:"csvDownload",onClick:function(){return x(null===e||void 0===e?void 0:e._id)},children:(null===O||void 0===O?void 0:O.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)})))]})]})})]})}function Ue(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast,d="teachers-".concat(c.school_id,"-").concat(c.subject_id);return Object(Y.a)((function(e){var t=null===c||void 0===c?void 0:c.teacher_id;return F.a.patch("".concat(I,"v1/teacher/update/").concat(t),e,i)}),{onSuccess:function(){null===c||void 0===c||c.school_id;t.invalidateQueries("".concat(d)),s.push("/admin/teachers-management/view/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===c||void 0===c?void 0:c.subject_id,"/").concat(null===c||void 0===c?void 0:c.subject_name,"/").concat(null===c||void 0===c?void 0:c.teacher_id)),o("Teacher Updated successfully",{appearance:"success",autoDismiss:!0})}})}function Qe(){var e,t,a,c,s,i,o,d,v=Object(l.g)(),p=Object(l.i)(),h=(Object(l.h)().pathname,Object(E.useToasts)().addToast),O=(Object(n.useContext)(S).state,Object(n.useState)(!1)),f=Object(j.a)(O,2),x=(f[0],f[1]),_=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.teacher_id,a=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(t),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/teacher/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}(),g=_.data,N=(_.isLoading,Fe().data),y=Te().data,k=Object(n.useState)({}),w=Object(j.a)(k,2),C=w[0],T=w[1],A=le(),L=A.data,q=A.isLoading,B=/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/,M=Object(n.useState)({}),z=Object(j.a)(M,2),U=z[0],Q=z[1];Object(n.useEffect)((function(){T(g)}),[g,null===p||void 0===p?void 0:p.teacher_id]);var P=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher/create"),e,i)}),{onSuccess:function(){var e=null===c||void 0===c?void 0:c.school_id;t.invalidateQueries("teachers-".concat(e)),s.push("/admin/teachers-management/view/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===c||void 0===c?void 0:c.subject_id,"/").concat(null===c||void 0===c?void 0:c.subject_name)),o("Teacher added successfully",{appearance:"success",autoDismiss:!0})}})}(),H=Ue();var R=function(){var e=Object(u.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),K(L,"_id",p.school_id,"short"),a=null===p||void 0===p?void 0:p.subject_name,e.next=6,Array.from(document.querySelectorAll(".teacherClass")).map((function(e){return{class_id:null===e||void 0===e?void 0:e.value,class_name:e.dataset.class_name,checked:!0===(null===e||void 0===e?void 0:e.checked)}}));case 6:if(n=e.sent,!(null===p||void 0===p?void 0:p.teacher_id)){e.next=15;break}return U.school_id=null===p||void 0===p?void 0:p.school_id,U.subject_name=a,U.classess=n,e.next=13,H.mutate(U);case 13:e.next=33;break;case 15:if(U.school_id=p.school_id?p.school_id:"",""!=U.school_id){e.next=21;break}x(!1),h("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=33;break;case 21:if(B.test(U.mobile)){e.next=26;break}x(!1),h("Please Enter a valid 10 digit phone no",{appearance:"error",autoDismiss:!0}),e.next=33;break;case 26:return c=(c=null===U||void 0===U?void 0:U.name).includes(" ")?c.split(" ")[0]:c,U.subject_id=null===p||void 0===p?void 0:p.subject_id,U.subject_name=a,U.classess=n,e.next=33,P.mutate(U);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function V(e){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===p||void 0===p?void 0:p.teacher_id)?Q(Object(m.a)(Object(m.a)({},U),{},Object(W.a)({},t.target.name,t.target.value))):"name"===t.target.name?Q(Object(m.a)(Object(m.a)({},U),{},{name:t.target.value,email:t.target.value.trim()+"@gmail.com",mobile:"1234567890",password:"password",address:"same as office address",city:"same as office city",state:"same as office state",pincode:"234567"})):Q(Object(m.a)(Object(m.a)({},U),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:999!=t.target.value&&((null===p||void 0===p?void 0:p.teacher_id)?(Q(Object(m.a)(Object(m.a)({},Q),{},Object(W.a)({},t.target.name,t.target.value))),v.push("/admin/teachers-management/update/".concat(t.target.value,"/").concat(null===p||void 0===p?void 0:p.subject_id,"/").concat(null===p||void 0===p?void 0:p.subject_name,"/").concat(p.teacher_id))):(Q(Object(m.a)(Object(m.a)({},U),{},Object(W.a)({},"school_id",t.target.value))),v.push("/admin/teachers-management/create/".concat(t.target.value,"/").concat(null===p||void 0===p?void 0:p.subject_id,"/").concat(null===p||void 0===p?void 0:p.subject_name))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(u.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.options[t.target.selectedIndex].dataset.subject_name,999!=t.target.value&&((null===p||void 0===p?void 0:p.teacher_id)?(T(Object(m.a)(Object(m.a)({},C),{},(n={},Object(W.a)(n,t.target.name,t.target.value),Object(W.a)(n,"subject_name",a),n))),v.push("/admin/teachers-management/update/".concat(null===p||void 0===p?void 0:p.school_id,"/").concat(t.target.value,"/").concat(a,"/").concat(p.teacher_id))):(Q(Object(m.a)(Object(m.a)({},U),{},(c={},Object(W.a)(c,"school_id",t.target.value),Object(W.a)(c,"subject_name",a),c))),v.push("/admin/teachers-management/create/".concat(null===p||void 0===p?void 0:p.school_id,"/").concat(t.target.value,"/").concat(a))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Teacher"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{className:"row col-md-12",onSubmit:R,children:[Object(b.jsxs)("div",{className:"col-md-6 row",children:[Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return Z.apply(this,arguments)},value:p.school_id?p.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!q&&(null===L||void 0===L?void 0:L.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"teacher_subject",onChange:function(e){return $.apply(this,arguments)},value:null===p||void 0===p?void 0:p.subject_id,children:[Object(b.jsx)("option",{value:"999",children:"Select Subject"}),!q&&(null===N||void 0===N?void 0:N.map((function(e){return Object(b.jsx)("option",{value:e._id,"data-subject_name":J(null===e||void 0===e?void 0:e.subject_name),children:e.subject_name},e._id)})))]})}),Object(b.jsxs)("div",{className:"form-group col-md-12 pl-0 pr-0",children:[Object(b.jsxs)("span",{children:["Choose Class:",Object(b.jsxs)("label",{className:"ml-2",children:[Object(b.jsx)("input",{type:"checkbox",id:"allClass",value:"all",className:"form-group mr-2",onChange:function(e){var t=document.getElementById("allClass").checked;Array.from(document.querySelectorAll(".teacherClass")).map((function(e){e.checked=!!t}))}}),"All Calss"]})]}),Object(b.jsx)("div",{className:"row col-md-12 pr-0",children:null===y||void 0===y?void 0:y.map((function(e){var t,a=null===C||void 0===C||null===(t=C.classess)||void 0===t?void 0:t.some((function(t){return(null===t||void 0===t?void 0:t.class_id)===(null===e||void 0===e?void 0:e._id)&&!0===(null===t||void 0===t?void 0:t.checked)}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("label",{className:"pl-0 pr-2 col-md-3",children:[Object(b.jsx)("input",{type:"checkbox",className:"teacherClass mr-1",defaultValue:null===e||void 0===e?void 0:e._id,"data-class_name":null===e||void 0===e?void 0:e.class_name,checked:a,onChange:function(e){var t;T(null===C||void 0===C||null===(t=C.classess)||void 0===t?void 0:t.map((function(t){(null===t||void 0===t?void 0:t.class_id)===e.target.value&&(t.checked=!0)})))}}),null===e||void 0===e?void 0:e.class_name," Th"]})})}))})]})]}),Object(b.jsxs)("div",{className:"col-md-6 row",children:[Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:null!==(e=null===U||void 0===U?void 0:U.name)&&void 0!==e?e:null===C||void 0===C?void 0:C.name,onChange:V,placeholder:"Name"})}),Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"mobile",value:null!==(t=null===U||void 0===U?void 0:U.mobile)&&void 0!==t?t:null===C||void 0===C?void 0:C.mobile,onChange:V,placeholder:"Mobile"})}),Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsx)("input",{type:"email",className:"form-control",name:"email",value:null!==(a=null===U||void 0===U?void 0:U.email)&&void 0!==a?a:null===C||void 0===C?void 0:C.email,onChange:V,placeholder:"Email"})}),Object(b.jsx)("div",{className:"form-group col-md-6 pl-0",children:Object(b.jsx)("input",{type:"password",className:"form-control",name:"password",value:null!==(c=null===U||void 0===U?void 0:U.password)&&void 0!==c?c:null===C||void 0===C?void 0:C.password,onChange:V,placeholder:"Password"})}),Object(b.jsx)("div",{className:"form-group col-md-12 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"address",value:null!==(s=null===U||void 0===U?void 0:U.address)&&void 0!==s?s:null===C||void 0===C?void 0:C.address,onChange:V,autoComplete:"no-password",placeholder:"Address"})}),Object(b.jsx)("div",{className:"form-group col-md-4 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"city",value:null!==(i=null===U||void 0===U?void 0:U.city)&&void 0!==i?i:null===C||void 0===C?void 0:C.city,onChange:V,autoComplete:"no-password",placeholder:"City"})}),Object(b.jsx)("div",{className:"form-group col-md-4 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"state",value:null!==(o=null===U||void 0===U?void 0:U.state)&&void 0!==o?o:null===C||void 0===C?void 0:C.state,onChange:V,autoComplete:"no-password",placeholder:"State"})}),Object(b.jsx)("div",{className:"form-group col-md-4 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"pincode",maxLength:6,value:null!==(d=null===U||void 0===U?void 0:U.pincode)&&void 0!==d?d:null===C||void 0===C?void 0:C.pincode,onChange:V,autoComplete:"no-password",placeholder:"Pincode"})})]}),Object(b.jsx)("div",{className:"col-md-12 pl-0",children:Object(b.jsx)("hr",{})}),Object(b.jsxs)("div",{className:"form-group col-md-3 mt-3 pl-0 flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:(null===P||void 0===P?void 0:P.isLoading)||(null===H||void 0===H?void 0:H.isLoading),children:(null===P||void 0===P?void 0:P.isLoading)||(null===H||void 0===H?void 0:H.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===p||void 0===p?void 0:p.teacher_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Teacher"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Teacher"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),v.push("/admin/teachers-management/view/".concat(null===p||void 0===p?void 0:p.school_id,"/").concat(null===p||void 0===p?void 0:p.subject_id))},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Pe(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=(t[0],t[1],Object(l.i)()),c=Object(n.useState)(!0),s=Object(j.a)(c,2),i=s[0],o=s[1],d=Object(n.useContext)(S).state,v=Object(E.useToasts)().addToast,m=Object(n.useState)(null),p=Object(j.a)(m,2),h=p[0],O=p[1],f=Object(n.useState)(),x=Object(j.a)(f,2),_=(x[0],x[1]),g=Object(n.useState)(!1),N=Object(j.a)(g,2),y=(N[0],N[1]),k=Object(l.g)(),w=le(),C=w.data,T=w.isLoading,A=(Object(X.b)(),d.access_token,new FormData);function D(){return(D=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(o(!1),O(t.target.files[0]),A.append("file",t.target.files[0]),A.append("test","testdata")):(o(!0),v("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast,d=c.school_id?"teachers-".concat(c.school_id):"teachers";return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher/upload"),e,i)}),{onSuccess:function(){t.invalidateQueries("".concat(d)),s.push("/admin/teachers-management"),o("Teacher added successfully",{appearance:"success",autoDismiss:!0})}})}(),q=function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===a||void 0===a?void 0:a.school_id){e.next=4;break}return v("Please Select a School",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 4:return n=K(C,"_id",null===a||void 0===a?void 0:a.school_id,"short"),A.append("file",h),A.append("school_id",null===a||void 0===a?void 0:a.school_id),A.append("short",n),e.next=10,L.mutate(A);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Teachers"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("a",{href:"/sampledata/teachers.csv",download:!0,children:"Download Sample File"}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:q,method:"POST",encType:"multipart/form-data",children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",value:null===a||void 0===a?void 0:a.school_id,onChange:function(e){k.push("/admin/teachers-management/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(e.target.value)),_(e.target.value),y(!0)},children:[Object(b.jsx)("option",{value:"",children:"Select School"}),!T&&(null===C||void 0===C?void 0:C.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return D.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:(null===L||void 0===L?void 0:L.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),k.push("/admin/teachers-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function He(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="teachers-".concat(t.school_id,"-").concat(t.subject_id);return Object(D.a)(a,Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.access_token&&(null===t||void 0===t?void 0:t.school_id)&&(null===t||void 0===t?void 0:t.subject_id))){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/teacher/view-all/").concat(t.school_id,"/").concat(null===t||void 0===t?void 0:t.subject_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}function Re(e){var t,a,c=e.update,s=e.Delete,i=Object(l.g)(),o=(Object(E.useToasts)().addToast,Object(n.useContext)(S).state),d=Object(l.i)(),j=(Object(X.b)(),He()),v=j.data,m=j.isLoading,p=le(),h=p.data,O=(p.schoolIsLoading,Fe().data),f=null===h||void 0===h?void 0:h.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===d||void 0===d?void 0:d.school_id)})),x=Ue(),_=(o.access_token,function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/teacher/delete/").concat(e),c)}),{onSuccess:function(){var e="teachers-".concat(t.school_id,"-").concat(t.subject_id);a.invalidateQueries(e),s("Teacher Deleted successfully",{appearance:"success",autoDismiss:!0})}})}()),g=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.mutate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(){return(N=Object(u.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.push("/admin/teachers-management/view/".concat(null===d||void 0===d?void 0:d.school_id,"/").concat(null===d||void 0===d?void 0:d.subject_id,"/").concat(J(a),"/").concat(n)),setTimeout(Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.mutate({isActive:void 0===t||!1===t});case 2:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),null!==(t="999"!==(null===d||void 0===d?void 0:d.school_id)&&f&&(null===(a=f[0])||void 0===a?void 0:a.school_name))&&void 0!==t?t:"All teachers"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("div",{className:"row col-md-12",children:[Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){i.push("/admin/teachers-management/view/".concat(e.target.value))},value:d.school_id?d.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!m&&(null===h||void 0===h?void 0:h.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"subject",onChange:function(e){if(999!=e.target.value){var t=e.target.options[e.target.selectedIndex].dataset.subject_name;i.push("/admin/teachers-management/view/".concat(null===d||void 0===d?void 0:d.school_id,"/").concat(e.target.value,"/").concat(t))}},value:d.subject_id?d.subject_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select Subject"}),Object(b.jsx)("option",{value:"all",children:"All"}),!m&&(null===O||void 0===O?void 0:O.map((function(e){return Object(b.jsx)("option",{value:e._id,"data-subject_name":J(null===e||void 0===e?void 0:e.subject_name),children:e.subject_name},e._id)})))]})})]}),Object(b.jsx)("div",{className:"row col-md-12 pb-3 no-gutter table-responsive",style:{overflow:"scroll scroll",height:"400px",marginRight:"120px",paddingBottom:"250px"},children:Object(b.jsxs)("table",{className:"table table-hover mb-2",style:{width:"1900px"},children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#UniqueID"}),Object(b.jsx)("th",{children:"Login Email"}),Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Subject"}),Object(b.jsx)("th",{children:"Class"}),Object(b.jsx)("th",{children:"Email"}),Object(b.jsx)("th",{className:"hidden_col",children:"Action"})]})}),Object(b.jsxs)("tbody",{children:[Object(b.jsx)(B,{isLoading:m}),null===v||void 0===v?void 0:v.map((function(e,t){var a;return a=Array.from(null===e||void 0===e?void 0:e.classess,(function(e){if(!0===e.checked)return e.class_name+"-"})),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",className:"col-md-1",children:e.EmpID}),Object(b.jsxs)("td",{children:[e.username,Object(b.jsx)("a",{href:"https://".concat(f[0].sub_domain,".acadelearn.com/teacher/login"),target:"__blank",children:Object(b.jsx)("span",{className:"fa fa-link hidden_col pull-right"})})]}),Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.subject_name}),Object(b.jsx)("td",{children:a}),Object(b.jsx)("td",{children:e.email}),Object(b.jsxs)("td",{className:"hidden_col flex",children:[c&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"btn dark ".concat((null===e||void 0===e?void 0:e.isActive)?"bg-success":"bg-danger"," text-white btn-sm mr-2"),onClick:function(){return function(e,t,a){return N.apply(this,arguments)}(null===e||void 0===e?void 0:e.isActive,null===e||void 0===e?void 0:e.subject_name,null===e||void 0===e?void 0:e._id)},children:(null===e||void 0===e?void 0:e.isActive)?Object(b.jsx)("span",{className:"fa fa-check",title:"Make Inactive"}):Object(b.jsx)("span",{className:"fa fa-times",title:"Make Inactive"})}),Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){d.school_id?i.push("/admin/teachers-management/update/".concat(null===d||void 0===d?void 0:d.school_id,"/").concat(null===d||void 0===d?void 0:d.subject_id,"/").concat(J(e.subject_name),"/").concat(null===e||void 0===e?void 0:e._id)):i.push("/admin/teachers-management/update/".concat(e.school_id,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(J(e.subject_name),"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})})]}),s&&Object(b.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return g(null===e||void 0===e?void 0:e._id)},children:Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))]})]})})]})}function We(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)()),c=Object(X.b)(),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){var a=null===t||void 0===t?void 0:t.principal_id;return F.a.patch("".concat(I,"v1/principal/update/").concat(a),e,s)}),{onSuccess:function(){c.invalidateQueries("principals-".concat(null===t||void 0===t?void 0:t.school_id)),i("Principal Updated successfully",{appearance:"success",autoDismiss:!0}),a.push("/admin/principal-management/view/".concat(null===t||void 0===t?void 0:t.school_id))}})}function Je(){var e=Object(l.g)(),t=Object(l.i)(),a=ve("delete"),c=Object(E.useToasts)().addToast,s=function(e){Object(l.i)();var t=Object(n.useContext)(S).state;return Object(D.a)("single-module-".concat(e),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===e){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/principal/view/").concat(e),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}(null===t||void 0===t?void 0:t.principal_id).data,i=Object(n.useState)({}),o=Object(j.a)(i,2),d=o[0],v=o[1],p=[{key:"mr",value:"Mr"},{key:"mrs",value:"Mrs"},{key:"miss",value:"Miss"}],h={title:"",name:"",address:"",state:"",city:"",password:"",pincode:"",email:"",mobile:""},O=Object(n.useState)({}),f=Object(j.a)(O,2),x=f[0],_=f[1];Object(n.useEffect)((function(){_(h),v(h)}),[null===t||void 0===t?void 0:t.page_type]),Object(n.useEffect)((function(){void 0!==s&&v(s)}),[s]);var g=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},i=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/principal/create"),e,s)}),{onSuccess:function(){t.invalidateQueries("principals"),i("Principal added successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/principal-management")}})}(),N=We(),y=function(e){Object(l.h)().pathname;var t=Object(l.g)(),a=Object(X.b)(),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/principal/delete"),e,c)}),{onSuccess:function(){a.invalidateQueries("principals"),t.push("/admin/principal-management"),s("Principal deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),k=le(),w=k.data,C=k.schoolIsLoading,T=function(){var e=Object(u.a)(r.a.mark((function e(a){var n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),x.name=(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.name:null===x||void 0===x?void 0:x.name,console.log(x),!(null===t||void 0===t?void 0:t.principal_id)){e.next=8;break}return e.next=6,N.mutate(d);case 6:e.next=39;break;case 8:if(x.school_id=t.school_id?t.school_id:"",""!=x.school_id){e.next=13;break}c("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 13:if(""!=(null===x||void 0===x?void 0:x.name)){e.next=17;break}c("Please Enter Principal name",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 17:if(""!=(null===x||void 0===x?void 0:x.email)){e.next=21;break}c("Please provide admin email",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 21:if(!1!==B(null===x||void 0===x?void 0:x.pincode)){e.next=25;break}c("Please enter numbers only",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 25:if(!((null===x||void 0===x||null===(n=x.pincode)||void 0===n?void 0:n.length)<6)){e.next=29;break}c("Please provide valid zip code",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 29:if(!((null===x||void 0===x||null===(s=x.mobile)||void 0===s?void 0:s.length)<10)){e.next=33;break}c("Please enter valid mobile number",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 33:if(!1!==B(null===x||void 0===x?void 0:x.mobile)){e.next=37;break}c("Please enter valid mobile number",{appearance:"error",autoDismiss:!0}),e.next=39;break;case 37:return e.next=39,g.mutate(x);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function A(){return(A=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.principal_id)){e.next=4;break}return x.principal_id=null===t||void 0===t?void 0:t.principal_id,e.next=4,y.mutate(x);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.principal_id)?v(Object(m.a)(Object(m.a)({},d),{},Object(W.a)({},a.target.name,a.target.value))):_(Object(m.a)(Object(m.a)({},x),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=(e=e||window.event).which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}function M(e){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===B(t.target.value)?(c("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerText="",document.getElementsByName("".concat(t.target.name))[0].focus()):"mobile"===t.target.name&&(null===(a=t.target.value)||void 0===a?void 0:a.length)<10?(c("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerHTML=null,document.getElementsByName("".concat(t.target.name))[0].focus()):"pincode"===t.target.name&&(null===(n=t.target.value)||void 0===n?void 0:n.length)<6&&(console.log("asA"),c("Please provide valid ".concat(t.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(t.target.name))[0].innerHTML=null,document.getElementsByName("".concat(t.target.name))[0].focus());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(r.a.mark((function a(n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:999!=n.target.value&&((null===t||void 0===t?void 0:t.principal_id)?(v(Object(m.a)(Object(m.a)({},d),{},Object(W.a)({},n.target.name,n.target.value))),e.push("/admin/principal-management/update/".concat(n.target.value,"/").concat(null===t||void 0===t?void 0:t.principal_id))):(_(Object(m.a)(Object(m.a)({},x),{},Object(W.a)({},"school_id",n.target.value))),e.push("/admin/principal-management/create/".concat(n.target.value))));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Principal"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{className:"row col-md-12",onSubmit:T,children:[Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return U.apply(this,arguments)},value:t.school_id?t.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!C&&(null===w||void 0===w?void 0:w.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control",name:"title",onChange:L,value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.title:null===x||void 0===x?void 0:x.title,children:[Object(b.jsx)("option",{children:"Select Salutation"}),null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.value})}))]})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.name:null===x||void 0===x?void 0:x.name,onChange:L,autoComplete:"no-password",placeholder:"Principal Name"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"email",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.email:null===x||void 0===x?void 0:x.email,onChange:L,autoComplete:"no-password",placeholder:"Email"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"password",className:"form-control",name:"password",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.password:null===x||void 0===x?void 0:x.password,onChange:L,autoComplete:"no-password",placeholder:"Password"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"mobile",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.Mobile:null===x||void 0===x?void 0:x.Mobile,onChange:L,onBlur:M,autoComplete:"no-Mobile",placeholder:"Mobile"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"address",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.address:null===x||void 0===x?void 0:x.address,onChange:L,autoComplete:"no-password",placeholder:"address"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"city",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.city:null===x||void 0===x?void 0:x.city,onChange:L,autoComplete:"no-password",placeholder:"city"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"state",value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.state:null===x||void 0===x?void 0:x.state,onChange:L,autoComplete:"no-password",placeholder:"state"})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"pincode",maxLength:6,value:(null===t||void 0===t?void 0:t.principal_id)?null===d||void 0===d?void 0:d.pincode:null===x||void 0===x?void 0:x.pincode,onChange:L,autoComplete:"no-password",onBlur:M,placeholder:"pincode"})}),Object(b.jsx)("div",{className:"col-md-12 pl-0",children:Object(b.jsx)("hr",{})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark br-5",children:g.isLoading||N.isLoading?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.principal_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"}),"Update"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"}),"Save"]})})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:"btn btn-sm bg-danger br-5 text-white ml-2",onClick:function(t){t.preventDefault(),_({}),v({}),e.push("/admin/principal-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})}),(null===t||void 0===t?void 0:t.principal_id)&&1==a&&Object(b.jsx)("button",{className:"btn btn-sm bg-danger br-5 text-white ml-2",onClick:function(e){return A.apply(this,arguments)},children:y.isLoading?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("span",{className:"fa fa-spinner"})}):Object(b.jsx)("span",{className:"fa fa-trash"})})]})]})]})]})}function Ve(){var e=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)();return Object(D.a)("principals-".concat(null===t||void 0===t?void 0:t.school_id),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token||!(null===t||void 0===t?void 0:t.school_id)){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/principal/view-all/").concat(null===t||void 0===t?void 0:t.school_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}(),t=e.data,a=e.isLoading,c=le().data,s=Object(l.i)(),i=Object(l.g)(),o=ve("update"),d=We();function j(){return(j=Object(u.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.push("/admin/principal-management/view/".concat(null===s||void 0===s?void 0:s.school_id,"/").concat(a)),setTimeout(Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.mutate({isActive:void 0===t||!1===t});case 2:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Principal"]}),Object(b.jsx)("div",{className:"row col-md-12",children:Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){i.push("/admin/principal-management/view/".concat(e.target.value))},value:s.school_id?s.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)}))]})})}),Object(b.jsx)("div",{className:"col-md-12 row",style:{height:"auto !important",maxHeight:"400px",overflow:"scroll"},children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",className:"hidden_col",children:"School Name"}),Object(b.jsx)("th",{scope:"col",children:"Name"}),Object(b.jsx)("th",{scope:"col",children:"Email"}),!0===o&&Object(b.jsx)("th",{scope:"col",className:"hidden_col",children:"Action"})]})}),Object(b.jsxs)("tbody",{children:[a&&Object(b.jsx)(B,{isLoading:a}),null===t||void 0===t?void 0:t.map((function(e,t){var a=function(e,t){var a,n,s=null===c||void 0===c?void 0:c.filter((function(t){return(null===t||void 0===t?void 0:t._id)==e}));return"name"==t?s&&(null===(a=s[0])||void 0===a?void 0:a.school_name):"logo"==t?s&&(null===(n=s[0])||void 0===n?void 0:n.school_logo):void 0}(null===e||void 0===e?void 0:e.school_id,"name");return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"hidden_col",children:a}),Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.email}),!0===o&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("td",{className:"hidden_col",children:[Object(b.jsx)("button",{className:"btn dark ".concat((null===e||void 0===e?void 0:e.isActive)?"bg-success":"bg-danger"," text-white btn-sm mr-2"),onClick:function(){return function(e,t){return j.apply(this,arguments)}(null===e||void 0===e?void 0:e.isActive,null===e||void 0===e?void 0:e._id)},children:(null===e||void 0===e?void 0:e.isActive)?Object(b.jsx)("span",{className:"fa fa-check",title:"Make Inactive"}):Object(b.jsx)("span",{className:"fa fa-times",title:"Make Inactive"})}),Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){i.push("/admin/principal-management/update/".concat(e.school_id,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})})]})})]},null===e||void 0===e?void 0:e._id)}))]})]})})]})}function Xe(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(j.a)(s,2),o=i[0],d=i[1],v=Object(l.i)(),p=Object(n.useContext)(S).state,h=Object(E.useToasts)().addToast,O=Object(n.useState)(null),f=Object(j.a)(O,2),x=f[0],_=f[1],g=Object(n.useState)(null),N=Object(j.a)(g,2),y=(N[0],N[1],Object(n.useState)(null)),k=Object(j.a)(y,2),w=(k[0],k[1],le()),C=w.data,T=w.schoolIsLoading,A=Object(l.g)(),D=Object(n.useState)({}),L=Object(j.a)(D,2),q=L[0],B=L[1],M=Object(X.b)(),z={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+p.access_token}},U=new FormData;function Q(){return(Q=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(d(!1),_(t.target.files[0]),U.append("file",t.target.files[0])):(d(!0),h("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object(Y.a)((function(e){return console.log(e.file),F.a.post("".concat(I,"v1/principal/upload"),e,z)}),{onSuccess:function(){M.invalidateQueries("principals"),c(!1),A.push("/admin/principal-management/"),h("Principal added successfully",{appearance:"success",autoDismiss:!0})}}),H=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),U.append("file",x),U.append("school_id",q.school_id),!(null===v||void 0===v?void 0:v.school_id)){e.next=8;break}return e.next=6,P.mutate(U);case 6:e.next=9;break;case 8:h("Principal select school",{appearance:"error",autoDismiss:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function R(){return(R=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:999!=t.target.value&&((null===v||void 0===v?void 0:v.principal_id)?(setSinglePrincipal(Object(m.a)(Object(m.a)({},SinglePrincipal),{},Object(W.a)({},t.target.name,t.target.value))),A.push("/admin/principal-management/update/".concat(t.target.value,"/").concat(null===v||void 0===v?void 0:v.principal_id))):(B(Object(m.a)(Object(m.a)({},q),{},Object(W.a)({},"school_id",t.target.value))),A.push("/admin/principal-management/".concat(null===v||void 0===v?void 0:v.page_type,"/").concat(t.target.value))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Principals",Object(b.jsx)("a",{href:"/sampledata/principal.csv",title:"download sample file",className:"btn-sm pull-right dark bg-success br-15",download:!0,children:Object(b.jsx)("span",{className:"fa fa-download"})})]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{className:"row col-md-12",onSubmit:H,method:"POST",encType:"multipart/form-data",children:[Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return R.apply(this,arguments)},value:v.school_id?v.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!T&&(null===C||void 0===C?void 0:C.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.school_name},e._id)})))]})}),Object(b.jsxs)("div",{className:"form-group col-md-3 pl-0",children:[Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return Q.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)("hr",{})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:o,children:a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),A.push("/admin/principal-management")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Ye(){var e=Object(l.g)(),t=Object(l.i)(),a=(Object(l.h)().pathname,Object(E.useToasts)().addToast),c=Object(n.useContext)(S).state,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],d=i[1],v=le(),p=v.data,h=v.isLoading,O=He(),f=O.data,x=O.teacherIsLoading,_=Fe(),g=_.data,N=(_.subjectIsLoading,{first_name:"",last_name:"",phone_no:""}),y=Object(n.useState)(N),k=Object(j.a)(y,2),w=k[0],C=k[1],T=Object(n.useState)(new Array(g&&g.length).fill(!1)),A=Object(j.a)(T,2),D=A[0],L=A[1],q=Object(X.b)(),B={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},M=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher-subject-mapping/create"),e,B)}),{onSuccess:function(){var n=null===t||void 0===t?void 0:t.school_id,c=null===t||void 0===t?void 0:t.teacher_id;q.invalidateQueries("teacher-subject-mapping-".concat(n,"-").concat(c)),d(!1),C(N),a("Mapping added successfully",{appearance:"success",autoDismiss:!0}),e.push("/admin/mapping-teacher-subjects")}}),z=function(){var e=Object(u.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),d(!0),!(null===t||void 0===t?void 0:t.teacher_sub_id)){e.next=7;break}return e.next=5,updateMutation.mutate(SingleTeacher);case 5:e.next=24;break;case 7:if(w.school_id=t.school_id?t.school_id:"",w.teacher_id=t.teacher_id?t.teacher_id:"",""!=w.school_id){e.next=14;break}d(!1),a("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=24;break;case 14:if(""!=w.teacher_id){e.next=19;break}d(!1),a("Please Select a Teacher",{appearance:"error",autoDismiss:!0}),e.next=24;break;case 19:return c=[],Array.from(document.querySelectorAll(".subjects")).map((function(e){if(!0===e.checked){var a=e.value.split("_");c.push({school_id:null===t||void 0===t?void 0:t.school_id,teacher_id:null===t||void 0===t?void 0:t.teacher_id,subject_id:a[0],subject_name:a[1],school_name:w.school_name,teacher_name:w.teacher_name})}})),e.next=23,M.mutate(c);case 23:Array.from(document.querySelectorAll(".subjects")).map((function(e){e.checked=!1}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(u.a)(r.a.mark((function a(n){var c,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:999!=n.target.value&&((null===t||void 0===t?void 0:t.teacher_sub_id)?e.push("/admin/mapping-teacher-subjects/select-school/".concat(n.target.value,"/").concat(t.teacher_id)):(s=n.target.options[n.target.selectedIndex].dataset.teacher_name,C(Object(m.a)(Object(m.a)({},w),{},(c={},Object(W.a)(c,"teacher_id",n.target.value),Object(W.a)(c,"teacher_name",s),c))),e.push("/admin/mapping-teacher-subjects/select-school/".concat(t.school_id,"/").concat(t.school_slug,"/").concat(n.target.value,"/").concat(J(s)))));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.value,n=D.map((function(e,t){return t===a?!e:e})),L(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(u.a)(r.a.mark((function t(a){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=a.target.value&&(c=a.target.options[a.target.selectedIndex].dataset.school_name,C(Object(m.a)(Object(m.a)({},w),{},(n={},Object(W.a)(n,"school_id",a.target.value),Object(W.a)(n,"school_name",c),n))),e.push("/admin/mapping-teacher-subjects/select-school/".concat(a.target.value,"/").concat(J(c))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Teacher-Subject Mapping"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:z,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return P.apply(this,arguments)},value:t.school_id?t.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!h&&(null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsx)("option",{value:e._id,"data-school_name":e.school_name,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"teacher_id",onChange:function(e){return U.apply(this,arguments)},value:(null===t||void 0===t?void 0:t.teacher_id)?null===t||void 0===t?void 0:t.teacher_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select Teacher"}),!x&&(null===f||void 0===f?void 0:f.map((function(e){return Object(b.jsx)("option",{value:e._id,"data-teacher_name":e.name,children:e.name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("div",{className:"col-md-12 pl-0 pr-2",style:{minHeight:"280px",maxHeight:"280px",overflow:"scroll"},children:null===g||void 0===g?void 0:g.map((function(e,t){return Object(b.jsx)("div",{className:"card pl-2 pt-0 pb-0 mb-2",children:Object(b.jsxs)("label",{className:"pb-0 mb-0",htmlfor:"subject-".concat(t),children:[Object(b.jsx)("input",{className:"mr-2 subjects",type:"radio",id:"subject-".concat(t),name:"subject",value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.subject_name),checked:D[t],onChange:function(e){!function(e,t){Q.apply(this,arguments)}(e,t)}}),null===e||void 0===e?void 0:e.subject_name]})},null===e||void 0===e?void 0:e._id)}))})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:o?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.teacher_sub_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Teacher"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Teacher"]})})}),t.school_id&&Object(b.jsxs)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(t){t.preventDefault(),e.push("/admin/mapping-teacher-subjects")},children:[Object(b.jsx)("span",{className:"fa fa-times"}),"Cancel"]})]})]})]})}function Ge(e){var t=e.mapping,a=(Object(l.g)(),function(){var e=Object(l.i)(),t=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),a={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},c=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher-subject-mapping/delete"),{teacher_sub_id:e},a)}),{onSuccess:function(){console.log("Dsadasd");var a=null===e||void 0===e?void 0:e.school_id,n=null===e||void 0===e?void 0:e.teacher_id;t.invalidateQueries("teacher-subject-mapping-".concat(a,"-").concat(n)),c("Mapping deleted successfully",{appearance:"success",autoDismiss:!0})}})}());function c(){return(c=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t,e.next=3,a.mutate(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(){return function(e){return c.apply(this,arguments)}(t._id)},children:(null===a||void 0===a?void 0:a.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})})}function Ke(e){var t=e.mapping;e.key;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.school_name}),Object(b.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.teacher_name}),Object(b.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.subject_name}),Object(b.jsx)("th",{scope:"row",width:"20%",children:Object(b.jsx)(Ge,{mapping:t})})]},null===t||void 0===t?void 0:t._id)}function Ze(){var e,t=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.school_id;return Object(D.a)("teacher-subject-mapping-".concat(a),Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/teacher-subject-mapping/view-all/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}(),a=t.data,c=t.isLoading,s=Object(l.i)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Mappings",Object(b.jsx)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",style:{fontSize:"0.90rem"},children:null===s||void 0===s||null===(e=s.school_slug)||void 0===e?void 0:e.replaceAll("-"," ")})]}),Object(b.jsx)("hr",{className:"mt-1"}),c&&Object(b.jsx)(B,{isLoading:c}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"School"}),Object(b.jsx)("th",{scope:"col",children:"Teacher"}),Object(b.jsx)("th",{scope:"col",children:"Subject"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsx)(Ke,{mapping:e},null===e||void 0===e?void 0:e._id)}))})]})})]})}function $e(){var e,t=Object(l.g)(),a=Object(l.i)(),c=(Object(l.h)().pathname,Object(E.useToasts)().addToast),s=Object(n.useContext)(S).state,i=Object(n.useState)(!1),o=Object(j.a)(i,2),d=o[0],v=o[1],p=le(),h=p.data,O=p.isLoading,f=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="teachers-".concat(t.school_id);return Object(D.a)(a,Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token||!t.school_id){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/teacher/teacher-by-school-id/").concat(t.school_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}(),x=f.data,_=f.teacherIsLoading,g=Te(),N=g.data,y=(g.classesIsLoading,function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.school_id,c=null===t||void 0===t?void 0:t.teacher_id;return Object(D.a)(["teacher-class-".concat(a,"-").concat(c)],Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===c){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/teacher/view-class/").concat(a,"/").concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}()),k=y.data,w=(y.teacherClassessLoading,{first_name:"",last_name:"",phone_no:""}),C=Object(n.useState)(w),T=Object(j.a)(C,2),A=T[0],L=T[1],q=Object(n.useState)(new Array(N&&N.length).fill(!1)),B=Object(j.a)(q,2),M=B[0],z=B[1],U=Object(X.b)(),Q={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+s.access_token}},P=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher-class-mapping/create"),e,Q)}),{onSuccess:function(){var e=null===a||void 0===a?void 0:a.school_id,n=null===a||void 0===a?void 0:a.teacher_id;U.invalidateQueries("teacher-class-mapping-".concat(e,"-").concat(n)),v(!1),L(w),c("Mapping added successfully",{appearance:"success",autoDismiss:!0}),t.push("/admin/mapping-teacher-class/select-school/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(null===a||void 0===a?void 0:a.school_slug))}}),H=function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v(!0),!(null===a||void 0===a?void 0:a.teacher_sub_id)){e.next=7;break}return e.next=5,updateMutation.mutate(SingleTeacher);case 5:e.next=24;break;case 7:if(A.school_id=a.school_id?a.school_id:"",A.teacher_id=a.teacher_id?a.teacher_id:"",""!=A.school_id){e.next=14;break}v(!1),c("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=24;break;case 14:if(""!=A.teacher_id){e.next=19;break}v(!1),c("Please Select a Teacher",{appearance:"error",autoDismiss:!0}),e.next=24;break;case 19:return n=[],Array.from(document.querySelectorAll(".classes")).map((function(e){if(!0===e.checked){var t=e.value.split("_");n.push({school_id:null===a||void 0===a?void 0:a.school_id,teacher_id:null===a||void 0===a?void 0:a.teacher_id,class_id:t[0],class_name:t[1],school_name:a.school_slug,teacher_name:a.teacher_slug})}})),e.next=23,P.mutate(n);case 23:Array.from(document.querySelectorAll(".classes")).map((function(e){e.checked=!1}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function R(){return(R=Object(u.a)(r.a.mark((function e(n){var c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:999!=n.target.value&&((null===a||void 0===a?void 0:a.teacher_sub_id)?t.push("/admin/mapping-teacher-class/select-school/".concat(n.target.value,"/").concat(a.teacher_id)):(s=n.target.options[n.target.selectedIndex].dataset.teacher_name,L(Object(m.a)(Object(m.a)({},A),{},(c={},Object(W.a)(c,"teacher_id",n.target.value),Object(W.a)(c,"teacher_name",s),c))),t.push("/admin/mapping-teacher-class/select-school/".concat(a.school_id,"/").concat(J(a.school_slug),"/").concat(n.target.value,"/").concat(J(s)))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.value,n=M.map((function(e,t){return t===a?!e:e})),z(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(u.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:999!=a.target.value&&(c=a.target.options[a.target.selectedIndex].dataset.school_name,L(Object(m.a)(Object(m.a)({},A),{},(n={},Object(W.a)(n,"school_id",a.target.value),Object(W.a)(n,"school_name",c),n))),t.push("/admin/mapping-teacher-class/select-school/".concat(a.target.value,"/").concat(J(c))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Teacher-Class Mapping"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:H,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return G.apply(this,arguments)},value:a.school_id?a.school_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select School"}),!O&&(null===h||void 0===h?void 0:h.map((function(e){return Object(b.jsx)("option",{value:e._id,"data-school_name":e.school_name,children:e.school_name},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"teacher_id",onChange:function(e){return R.apply(this,arguments)},value:(null===a||void 0===a?void 0:a.teacher_id)?null===a||void 0===a?void 0:a.teacher_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select Teacher"}),!_&&(null===x||void 0===x?void 0:x.map((function(e){return Object(b.jsxs)("option",{value:e._id,"data-teacher_name":e.name,children:[e.name," - ",e.subject_name]},e._id)})))]})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("p",{className:"mb-1",children:"Choose Class"}),Object(b.jsx)("hr",{className:"mb-1"}),Object(b.jsx)("div",{className:"col-md-12 pl-2 pr-2 row",style:{minHeight:"20px"},children:null===k||void 0===k||null===(e=k.classess)||void 0===e?void 0:e.map((function(e,t){return Object(b.jsx)("div",{className:"col-md-4 pl-2 pt-0 pb-0 mb-2",children:Object(b.jsxs)("label",{className:"pb-0 mb-0",children:[Object(b.jsx)("input",{className:"mr-2 classes",type:"checkbox",id:"custom-checkbox-".concat(t),name:null===e||void 0===e?void 0:e.class_name,value:"".concat(null===e||void 0===e?void 0:e.class_id,"_").concat(null===e||void 0===e?void 0:e.class_name),checked:null===e||void 0===e?void 0:e.checked,onChange:function(e){!function(e,t){V.apply(this,arguments)}(e,t)}}),null===e||void 0===e?void 0:e.class_name,"Th"]})},null===e||void 0===e?void 0:e.class_id)}))})]}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===a||void 0===a?void 0:a.teacher_class_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Mapping"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Mapping"]})})}),a.school_id&&Object(b.jsxs)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),t.push("/admin/mapping-teacher-class")},children:[Object(b.jsx)("span",{className:"fa fa-times"}),"Cancel"]})]})]})]})}function et(e){var t=e.mapping,a=(Object(l.g)(),function(){Object(l.h)().pathname;var e=Object(l.i)(),t=(Object(l.g)(),Object(X.b)()),a={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},c=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher-class-mapping/delete"),{teacher_sub_id:e},a)}),{onSuccess:function(){var a=null===e||void 0===e?void 0:e.school_id,n=null===e||void 0===e?void 0:e.teacher_id;t.invalidateQueries("teacher-class-mapping-".concat(a,"-").concat(n)),c("Mapping deleted successfully",{appearance:"success",autoDismiss:!0})}})}());function c(){return(c=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t,e.next=3,a.mutate(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(){return function(e){return c.apply(this,arguments)}(t._id)},children:(null===a||void 0===a?void 0:a.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})})}function tt(e){var t,a=e.mapping;return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("th",{scope:"row",children:[null===a||void 0===a?void 0:a.class_name," th "]}),Object(b.jsx)("th",{scope:"row",children:null===a||void 0===a?void 0:a.school_name}),Object(b.jsx)("th",{scope:"row",children:null===a||void 0===a||null===(t=a.teacher_name)||void 0===t?void 0:t.replace("-"," ")}),Object(b.jsx)("th",{scope:"row",children:Object(b.jsx)(et,{mapping:a})})]},null===a||void 0===a?void 0:a._id)}function at(){var e,t,a=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.school_id,c=null===t||void 0===t?void 0:t.teacher_id;return Object(D.a)(["teacher-class-mapping-".concat(a,"-").concat(c)],Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===c){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/teacher-class-mapping/view-all/").concat(a,"/").concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}(),c=a.data,s=a.isLoading,i=Object(l.i)(),o=function(){Object(l.h)().pathname;var e=Object(l.i)(),t=(Object(l.g)(),Object(X.b)()),a={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},c=Object(E.useToasts)().addToast;return Object(Y.a)((function(){var t=null===e||void 0===e?void 0:e.school_id;return F.a.post("".concat(I,"v1/teacher-class-mapping/delete-all"),{school_id:t},a)}),{onSuccess:function(){var a=null===e||void 0===e?void 0:e.school_id,n=null===e||void 0===e?void 0:e.teacher_id;t.invalidateQueries("teacher-class-mapping-".concat(a,"-").concat(n)),c("Mapping deleted successfully",{appearance:"success",autoDismiss:!0})}})}();function d(){return(d=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.mutate();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Mappings",Object(b.jsx)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",style:{fontSize:"0.90rem"},children:null===i||void 0===i||null===(e=i.school_slug)||void 0===e?void 0:e.replaceAll("-"," ")}),Object(b.jsx)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",style:{fontSize:"0.90rem"},children:null===i||void 0===i||null===(t=i.teacher_slug)||void 0===t?void 0:t.replaceAll("-"," ")}),(null===i||void 0===i?void 0:i.school_id)&&Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger pull-right",onClick:function(){return d.apply(this,arguments)},children:"Delete All Mapping"})]}),Object(b.jsx)("hr",{className:"mt-1"}),s&&Object(b.jsx)(B,{isLoading:s}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Class Name"}),Object(b.jsx)("th",{scope:"col",children:"School"}),Object(b.jsx)("th",{scope:"col",children:"Teacher Name"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)(tt,{mapping:e},null===e||void 0===e?void 0:e._id)}))})]})})]})}function nt(){var e=Object(l.g)(),t=Object(l.i)(),a=(Object(l.h)().pathname,Object(E.useToasts)().addToast),c=Object(n.useContext)(S).state,s=Object(n.useState)(!1),i=Object(j.a)(s,2),o=i[0],d=i[1],v=Te(),p=v.data,h=v.classesIsLoading,O=Fe(),f=O.data,x=(O.subjectsIsLoading,{first_name:"",last_name:"",phone_no:""}),_=Object(n.useState)(x),g=Object(j.a)(_,2),N=g[0],y=g[1],k=Object(n.useState)(new Array(f&&f.length).fill(!1)),w=Object(j.a)(k,2),C=w[0],T=w[1],A=Object(X.b)(),D={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},L=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/class-subject-mapping/create"),e,D)}),{onSuccess:function(){var n=null===t||void 0===t?void 0:t.class_id;A.invalidateQueries("class-subject-mapping-".concat(n)),d(!1),y(x),a("Mapping added successfully",{appearance:"success",autoDismiss:!0}),e.push("/admin/mapping-class-subjects")}}),q=function(){var e=Object(u.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),d(!0),!(null===t||void 0===t?void 0:t.class_subject_id)){e.next=7;break}return e.next=5,updateMutation.mutate(SingleTeacher);case 5:e.next=18;break;case 7:if(N.class_id=t.class_id?t.class_id:"",""!=N.class_id){e.next=13;break}d(!1),a("Please Select a Class",{appearance:"error",autoDismiss:!0}),e.next=18;break;case 13:return c=[],Array.from(document.querySelectorAll(".subjects")).map((function(e){if(!0===e.checked){var a=e.value.split("_");c.push({class_id:null===t||void 0===t?void 0:t.class_id,subject_id:a[0],subject_name:a[1],class_name:N.class_name})}})),e.next=17,L.mutate(c);case 17:Array.from(document.querySelectorAll(".subjects")).map((function(e){e.checked=!1}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function B(){return(B=Object(u.a)(r.a.mark((function t(a){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=a.target.value&&(c=a.target.options[a.target.selectedIndex].dataset.class_name,y(Object(m.a)(Object(m.a)({},N),{},(n={},Object(W.a)(n,"class_id",a.target.value),Object(W.a)(n,"class_name",c),n))),e.push("/admin/mapping-class-subjects/select-class/".concat(a.target.value,"/").concat(J(c))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=Object(u.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.value,n=C.map((function(e,t){return t===a?!e:e})),T(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Class-Subject Mapping"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("form",{onSubmit:q,children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"class_id",onChange:function(e){return B.apply(this,arguments)},value:(null===t||void 0===t?void 0:t.class_id)?null===t||void 0===t?void 0:t.class_id:999,children:[Object(b.jsx)("option",{value:"999",children:"Select Class"}),!h&&(null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsxs)("option",{value:e._id,"data-class_name":e.class_name,children:[e.class_name," th"]},e._id)})))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("div",{className:"col-md-12 pl-0 pr-2",style:{minHeight:"280px",maxHeight:"280px",overflow:"scroll"},children:null===f||void 0===f?void 0:f.map((function(e,t){return Object(b.jsx)("div",{className:"card pl-2 pt-0 pb-0 mb-2",children:Object(b.jsxs)("label",{className:"pb-0 mb-0",children:[Object(b.jsx)("input",{className:"mr-2 subjects",type:"checkbox",id:"custom-checkbox-".concat(t),name:null===e||void 0===e?void 0:e.subject_name,value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.subject_name),checked:C[t],onChange:function(e){!function(e,t){M.apply(this,arguments)}(e,t)}}),null===e||void 0===e?void 0:e.subject_name]})},null===e||void 0===e?void 0:e._id)}))})}),Object(b.jsxs)("div",{className:"form-group flex",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",children:o?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===t||void 0===t?void 0:t.teacher_class_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Mapping"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Mapping"]})})}),t.class_id&&Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(t){t.preventDefault(),e.push("/admin/mapping-class-subjects")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function ct(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.class_id;return Object(D.a)("class-subject-mapping-".concat(a),Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===a){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/class-subject-mapping/view-all/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)}))))}function st(e){var t=e.mapping,a=(Object(l.g)(),function(){Object(l.h)().pathname;var e=Object(l.i)(),t=(Object(l.g)(),Object(X.b)()),a={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},c=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/class-subject-mapping/delete"),{class_subject_id:e},a)}),{onSuccess:function(){var a=null===e||void 0===e?void 0:e.class_id;t.invalidateQueries("class-subject-mapping-".concat(a)),c("Mapping deleted successfully",{appearance:"success",autoDismiss:!0})}})}());function c(){return(c=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t,e.next=3,a.mutate(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(){return function(e){return c.apply(this,arguments)}(t._id)},children:(null===a||void 0===a?void 0:a.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})})}function it(e){var t=e.mapping;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.class_name}),Object(b.jsx)("th",{scope:"row",children:null===t||void 0===t?void 0:t.subject_name}),Object(b.jsx)("th",{scope:"row",width:"20%",children:Object(b.jsx)(st,{mapping:t})})]},null===t||void 0===t?void 0:t._id)}function ot(){var e,t=ct(),a=t.data,n=t.isLoading,c=Object(l.i)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Mappings",Object(b.jsx)("span",{className:"dark bg-success br-15 pl-3 pr-3 ml-2",style:{fontSize:"0.90rem"},children:null===c||void 0===c||null===(e=c.class_slug)||void 0===e?void 0:e.replaceAll("-"," ")})]}),Object(b.jsx)("hr",{className:"mt-1"}),n&&Object(b.jsx)(B,{isLoading:n}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Class"}),Object(b.jsx)("th",{scope:"col",children:"Subject"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsx)(it,{mapping:e},null===e||void 0===e?void 0:e._id)}))})]})})]})}function lt(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="",c="";return(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)?(c="units-".concat(t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id),a="".concat(I,"v1/unit/view-all/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.subject_id)):(null===t||void 0===t?void 0:t.class_id)&&(c="units-".concat(t.class_id),a="".concat(I,"v1/unit/view-all/").concat(null===t||void 0===t?void 0:t.class_id)),Object(D.a)(c,Object(u.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get("".concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)}))))}function dt(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="",c="";return(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)&&(null===t||void 0===t?void 0:t.unit_id)&&(a="subject-chapter-mappings-".concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id,"-").concat(null===t||void 0===t?void 0:t.unit_id),c="".concat(I,"v1/chapter/view-all/").concat(t.class_id,"/").concat(t.subject_id,"/").concat(null===t||void 0===t?void 0:t.unit_id)),Object(D.a)(a,Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get("".concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 2:return a=t.sent,t.abrupt("return",a.data.data);case 4:case"end":return t.stop()}}),t)}))))}var rt=a(56),ut=a(57);function jt(){var e,t,a,c,s=Object(l.i)(),i=Object(l.g)(),o=Object(E.useToasts)().addToast,d=Te().data,v=ct(),p=v.data,h=v.isLoading,O=lt(),f=O.data,x=O.isLoading,_=dt(),g=_.data,N=_.isLoading,y=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.qbank_id,a=Object(n.useContext)(S).state,c=e.qbank_id?"question-".concat(e.qbank_id):"questions";return Object(D.a)("".concat(c),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/question-bank/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}(),k=y.data,w=(y.isLoading,Object(n.useState)({})),C=Object(j.a)(w,2),T=C[0],A=C[1],L=Object(n.useState)({}),q=Object(j.a)(L,2),B=(q[0],q[1],Object(n.useState)(!0)),M=Object(j.a)(B,2),z=M[0],U=M[1];console.log(k),Object(n.useEffect)((function(){var e=document.createElement("script");e.id="editor",e.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",e.async=!0,document.body.appendChild(e)}),[null===s||void 0===s?void 0:s.qbank_id,null===s||void 0===s?void 0:s.subject_id,null===s||void 0===s?void 0:s.class_id,null===s||void 0===s?void 0:s.chapter_id,null===s||void 0===s?void 0:s.unit_id]),(null===s||void 0===s?void 0:s.qbank_id)&&"docx"==(null===k||void 0===k?void 0:k.extension)?(a=k&&(null===k||void 0===k?void 0:k.options),c=[{key:0,value:" A"},{key:1,value:" B"},{key:3,value:" C"},{key:4,value:" D"}]):(a=[{key:"option_a",value:"Option A"},{key:"option_b",value:"Option B"},{key:"option_c",value:"Option C"},{key:"option_d",value:"Option D"}],c=[{key:"option_a",value:"Option A"},{key:"option_b",value:"Option B"},{key:"option_c",value:"Option C"},{key:"option_d",value:"Option D"}]);var Q=new FormData,P=Object(n.useState)(""),H=Object(j.a)(P,2),R=H[0],J=H[1],V=Object(n.useState)(""),G=Object(j.a)(V,2),Z=G[0],$=G[1],te=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast,d="questions-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id,"-").concat(null===c||void 0===c?void 0:c.unit_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/question-bank/create"),e,i)}),{onSuccess:function(){t.invalidateQueries("".concat(d)),s.push("/admin/question-bank/create/".concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.subject_id,"/").concat(null===c||void 0===c?void 0:c.unit_id)),o("Questions added successfully",{appearance:"success",autoDismiss:!0}),setTimeout((function(){window.location.reload()}),1e3)}})}(),ae=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o=c.qbank_id?"questions-".concat(c.qbank_id):"questions";return Object(Y.a)((function(e){var t=null===c||void 0===c?void 0:c.qbank_id;return F.a.post("".concat(I,"v1/question-bank/update/").concat(t),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o));var e="/admin/question-bank/upload/".concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.subject_id,"/").concat(null===c||void 0===c?void 0:c.unit_id,"/").concat(null===c||void 0===c?void 0:c.chapter_id);window.location.href=e,i("Question Updated successfully",{appearance:"success",autoDismiss:!0})}})}(),ne=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),s=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/question-bank/upload"),e,c)}),{onSuccess:function(){t.invalidateQueries("questions"),s("Questions added successfully",{appearance:"success",autoDismiss:!0})}})}();function ce(){return(ce=Object(u.a)(r.a.mark((function e(t){var a,n,c,i,o,l,u,j,v,m,b,h,O;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=null===s||void 0===s?void 0:s.qbank_id,n=null===s||void 0===s?void 0:s.class_id,c=null===s||void 0===s?void 0:s.subject_id,i=null===s||void 0===s?void 0:s.unit_id,o=null===s||void 0===s?void 0:s.chapter_id,l=K(d,"_id",n,"class_name"),u=K(p,"subject_id",c,"subject_name"),j=K(f,"_id",i,"unit_no"),v=K(f,"_id",i,"unit_name"),m=K(g,"_id",o,"chapter_no"),b=K(g,"_id",o,"chapter_name"),T.class_id=n,T.class_name=l,T.subject_id=c,T.subject_name=u,T.unit_id=i,T.unit_no=j,T.unit_name=v,T.chapter_id=o,T.chapter_no=m,T.chapter_name=b,h=(null===s||void 0===s?void 0:s.qbank_id)?k.question:T.question,O=h.includes("*")?h.split("*").join("<br/>"):T.question,T.question=O,console.log(T),!a){e.next=31;break}return e.next=29,ae.mutate(T);case 29:e.next=33;break;case 31:return e.next=33,te.mutate(T);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],J(n),"docx"===n?(U(!1),$(t.target.files[0]),Q.append("file",t.target.files[0])):(U(!0),o("Only .docx files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(u.a)(r.a.mark((function e(t){var a,n,c,i,l,u,j,v,m,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=null===s||void 0===s?void 0:s.class_id,n=null===s||void 0===s?void 0:s.subject_id,c=null===s||void 0===s?void 0:s.unit_id,i=null===s||void 0===s?void 0:s.chapter_id,!(a&&n&&c&&i)){e.next=28;break}return l=K(d,"_id",a,"class_name"),u=K(p,"subject_id",n,"subject_name"),j=K(f,"_id",c,"unit_no"),v=K(f,"_id",c,"unit_name"),m=K(g,"_id",i,"chapter_no"),b=K(g,"_id",i,"chapter_name"),Q.append("file",Z),Q.append("class_id",a),Q.append("class_name",l),Q.append("subject_id",n),Q.append("subject_name",u),Q.append("unit_id",c),Q.append("unit_no",j),Q.append("unit_name",v),Q.append("chapter_id",i),Q.append("chapter_no",m),Q.append("chapter_name",b),Q.append("extension",R),e.next=26,ne.mutate(Q);case 26:e.next=29;break;case 28:o("Please select class, subject, unit and chapter fields to upload question",{appearance:"error",autoDismiss:!0});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Question"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"form-group col-md-3",children:Object(b.jsxs)("select",{className:"form-control",value:null===s||void 0===s?void 0:s.class_id,onChange:function(e){"_"===e.target.value?i.push("/admin/question-bank/create"):(null===s||void 0===s?void 0:s.qbank_id)?i.push("/admin/question-bank/create/".concat(e.target.value)):i.push("/admin/question-bank/".concat(null===s||void 0===s?void 0:s.page_type,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Classes"}),null===d||void 0===d?void 0:d.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.class_name," th "]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control",value:null===s||void 0===s?void 0:s.subject_id,onChange:function(e){"_"===e.target.value?i.push("/admin/question-bank/create/".concat(null===s||void 0===s?void 0:s.class_id)):(null===s||void 0===s?void 0:s.qbank_id)?i.push("/admin/question-bank/create/".concat(null===s||void 0===s?void 0:s.class_id,"/").concat(e.target.value)):i.push("/admin/question-bank/".concat(null===s||void 0===s?void 0:s.page_type,"/").concat(null===s||void 0===s?void 0:s.class_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:h?"loading ...":"Subjects"}),null===p||void 0===p?void 0:p.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.subject_id,children:null===e||void 0===e?void 0:e.subject_name},null===e||void 0===e?void 0:e.subject_id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-3 pl-0",children:Object(b.jsxs)("select",{className:"form-control",value:null===s||void 0===s?void 0:s.unit_id,onChange:function(e){"_"===e.target.value?i.push("/admin/question-bank/create/".concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id)):(null===s||void 0===s?void 0:s.qbank_id)?i.push("/admin/question-bank/create/".concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(e.target.value)):i.push("/admin/question-bank/".concat(null===s||void 0===s?void 0:s.page_type,"/").concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:x?"loading ...":"Units"}),null===f||void 0===f?void 0:f.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[ee(null===e||void 0===e?void 0:e.unit_no),"-",null===e||void 0===e?void 0:e.unit_name]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-3",children:Object(b.jsxs)("select",{className:"form-control",value:null===s||void 0===s?void 0:s.chapter_id,onChange:function(e){"_"===e.target.value?i.push("/admin/question-bank/".concat(null===s||void 0===s?void 0:s.page_type,"/").concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(null===s||void 0===s?void 0:s.unit_id)):(null===s||void 0===s?void 0:s.qbank_id)?i.push("/admin/question-bank/create/".concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(null===s||void 0===s?void 0:s.unit_id,"/").concat(e.target.value)):i.push("/admin/question-bank/".concat(null===s||void 0===s?void 0:s.page_type,"/").concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(null===s||void 0===s?void 0:s.unit_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:N?"loading ...":"Chapters"}),null===g||void 0===g?void 0:g.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.chapter_no,"-",null===e||void 0===e?void 0:e.chapter_name]},null===e||void 0===e?void 0:e._id)}))]})})]}),("create"===(null===s||void 0===s?void 0:s.page_type)||"update"===(null===s||void 0===s?void 0:s.page_type))&&Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Add Questions and Options "}),Object(b.jsx)("hr",{className:"mt-0 mb-1"}),Object(b.jsxs)("div",{className:"pr-2",style:{height:"350px",overflowY:"scroll",overflowX:"hidden"},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Question: "}),Object(b.jsx)(rt.CKEditor,{id:"editor",editor:ut.a,config:{toolbar:{items:["MathType","ChemType","heading","|","fontSize","bold","italic","link","bulletedList","numberedList","imageUpload","mediaEmbed","insertTable","blockQuote","undo","redo"]}},data:k&&(null===k||void 0===k?void 0:k.question),onChange:function(e,t){var a=t.getData();A(Object(m.a)(Object(m.a)({},T),{},{question:a}))}})]}),Object(b.jsx)("div",{className:"row",children:null===(e=a)||void 0===e?void 0:e.map((function(e,t){var a,n;return 0===t?(k&&(null===k||void 0===k?void 0:k.option_a),n="option A"):1===t?(k&&(null===k||void 0===k?void 0:k.option_b),n="option B"):2===t?(k&&(null===k||void 0===k?void 0:k.option_c),n="option C"):3===t&&(k&&(null===k||void 0===k?void 0:k.option_d),n="option D"),Object(b.jsxs)("div",{className:"form-group col-md-6",children:[Object(b.jsxs)("label",{children:[null!==(a=n)&&void 0!==a?a:null===e||void 0===e?void 0:e.value,": "]}),Object(b.jsx)(rt.CKEditor,{editor:ut.a,config:{toolbar:{items:["MathType","ChemType","heading","|","fontSize","bold","italic","link","bulletedList","numberedList","imageUpload","mediaEmbed","insertTable","blockQuote","undo","redo"]}},data:"&nbsp; ".concat((null===s||void 0===s?void 0:s.qbank_id)?e:""),onChange:function(t,a){var n=a.getData();A(Object(m.a)(Object(m.a)({},T),{},Object(W.a)({},null===e||void 0===e?void 0:e.key,n)))}})]},"option-".concat(t))}))}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",onChange:function(e){A(Object(m.a)(Object(m.a)({},T),{},{answer:e.target.value}))},children:[Object(b.jsx)("option",{value:"",children:"Correct Answer"}),null===(t=c)||void 0===t?void 0:t.map((function(e,t){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.key,selected:(null===k||void 0===k?void 0:k.answer)==(null===e||void 0===e?void 0:e.value)?"selected":"",children:"".concat(null===e||void 0===e?void 0:e.value)})}))]})}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Solution: "}),Object(b.jsx)(rt.CKEditor,{editor:ut.a,config:{toolbar:{items:["MathType","ChemType","heading","|","bold","italic","link","bulletedList","numberedList","imageUpload","mediaEmbed","insertTable","blockQuote","undo","redo"]}},data:k&&(null===k||void 0===k?void 0:k.solution),onChange:function(e,t){var a=t.getData();A(Object(m.a)(Object(m.a)({},T),{},{solution:a}))}})]})]})]}),Object(b.jsxs)("div",{className:"form-group mt-2",children:[Object(b.jsx)("button",{type:"button",className:"btn btn-sm dark",disabled:(null===te||void 0===te?void 0:te.isLoading)||(null===ae||void 0===ae?void 0:ae.isLoading),onClick:function(e){return ce.apply(this,arguments)},children:(null===te||void 0===te?void 0:te.isLoading)||(null===ae||void 0===ae?void 0:ae.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-spinner mr-2"}),"Processing..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-save mr-2"}),(null===s||void 0===s?void 0:s.qbank_id)?"Update Question":"Save Question"]})}),Object(b.jsxs)("button",{type:"button",className:"btn btn-sm dark bg-success ml-2",onClick:function(){window.location.href="/admin/question-bank/upload/".concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(null===s||void 0===s?void 0:s.subject_id,"/").concat(null===s||void 0===s?void 0:s.chapter_id)},children:[Object(b.jsx)("span",{className:"fa fa-times"})," Cancel"]})]})]}),"upload"===(null===s||void 0===s?void 0:s.page_type)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("form",{encType:"multipart/form-data",children:[Object(b.jsx)("label",{children:"Upload Questions and Options "}),Object(b.jsx)("hr",{className:"mt-1 mb-2"}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:"Choose Question File"}),Object(b.jsx)("input",{type:"file",name:"file",onChange:function(e){return se.apply(this,arguments)},className:"form-control"})]}),Object(b.jsx)("div",{className:"form-group mt-2",children:Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:z,onClick:function(e){return ie.apply(this,arguments)},children:(null===te||void 0===te?void 0:te.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-spinner mr-2"}),"processing..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-upload mr-2"}),"Upload Question"]})})})]}),Object(b.jsx)("hr",{})]})]})}function vt(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a="",c="";return(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)&&(null===t||void 0===t?void 0:t.unit_id)&&(null===t||void 0===t?void 0:t.chapter_id)&&(a="questions-".concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id,"-").concat(null===t||void 0===t?void 0:t.unit_id,"-").concat(null===t||void 0===t?void 0:t.chapter_id),c="".concat(I,"v1/question-bank/view-all/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.subject_id,"/").concat(null===t||void 0===t?void 0:t.unit_id,"/").concat(null===t||void 0===t?void 0:t.chapter_id)),Object(D.a)("".concat(a),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===t||void 0===t?void 0:t.class_id)){a.next=5;break}return a.next=3,F.a.get("".concat(c),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}a(166);function mt(e){var t,a=Object(l.i)(),c=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),s={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},i=Object(E.useToasts)().addToast;return t="questions-".concat(null===a||void 0===a?void 0:a.class_id,"-").concat(null===a||void 0===a?void 0:a.subject_id,"-").concat(null===a||void 0===a?void 0:a.unit_id,"-").concat(null===a||void 0===a?void 0:a.chapter_id),Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/question-bank/delete"),e,s)}),{onSuccess:function(){c.invalidateQueries(t),i("Question Deleted successfully",{appearance:"success",autoDismiss:!0})}})}function bt(e){var t,a,c=this,s=e.update,i=e.Delete,o=(Object(l.g)(),Object(n.useContext)(S).state,Object(l.i)()),d=Object(n.useState)({}),v=Object(j.a)(d,2),m=v[0],p=(v[1],vt()),h=p.data,O=p.isLoading,f=mt(),x=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.qbank_id=t,e.next=3,f.mutate(m);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=document.createElement("script");e.id="editor",e.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",e.async=!0,document.body.appendChild(e)}));var _=[{key:0,value:" A"},{key:1,value:" B"},{key:3,value:" C"},{key:4,value:" D"}];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"All Questions",Object(b.jsxs)("span",{className:"pull-right",style:{fontSize:"14px",marginRight:"20px",marginTop:"5px",fontweight:"bold"},children:[Object(b.jsxs)("span",{children:[h&&(null===(t=h[0])||void 0===t?void 0:t.unit_name)," "]}),"- ",Object(b.jsx)("span",{children:h&&(null===(a=h[0])||void 0===a?void 0:a.chapter_name)})]})]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)(B,{isLoading:O}),Object(b.jsx)("div",{className:"col-md-12 pr-0 pb-3 row no-gutter",style:{height:"460px",overflowY:"scroll",overflowX:"hidden"},children:(null===o||void 0===o?void 0:o.chapter_id)&&(null===h||void 0===h?void 0:h.map((function(e,t){return Object(b.jsxs)("div",{className:"card question col-md-12 pl-0 pr-0 mr-3 mb-2",children:[Object(b.jsxs)("div",{className:"pl-2 pr-2 dark bg-head flex",children:["QNo:  ",t+1,Object(b.jsxs)("span",{className:"ml-2",children:["QId: ",null===e||void 0===e?void 0:e._id]}),s&&Object(b.jsx)("button",{className:"dark bg-success",onClick:function(t){window.location.href="/admin/question-bank/update/".concat(null===o||void 0===o?void 0:o.class_id,"/").concat(null===o||void 0===o?void 0:o.subject_id,"/").concat(null===o||void 0===o?void 0:o.unit_id,"/").concat(null===o||void 0===o?void 0:o.chapter_id,"/").concat(null===e||void 0===e?void 0:e._id)},children:Object(b.jsx)("span",{className:"bi bi-pencil"})}),i&&Object(b.jsx)("button",{className:"dark bg-danger",onClick:x.bind(c,null===e||void 0===e?void 0:e._id),children:Object(b.jsx)("span",{className:"bi bi-trash"})})]}),Object(b.jsx)("div",{className:"pl-3 mt-2",children:"Question: "}),Object(b.jsx)("div",{className:"question pl-3 pr-2",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.question}}),Object(b.jsx)("div",{className:"pl-3 mt-2 mb-2",children:"Answers"}),Object(b.jsxs)("div",{className:"row ml-3 mt-2 option pb-3",children:["docx"===(null===e||void 0===e?void 0:e.extension)&&(null===_||void 0===_?void 0:_.map((function(t,a){return Object(b.jsxs)("div",{className:"col-md-11 flex pr-0",style:{justifyContent:"flex-start",flexWrap:"wrap",border:"1px solid #ededed"},children:[Object(b.jsxs)("div",{className:"pr-3",children:[t.value,":",(null===e||void 0===e?void 0:e.answer)===t.value||(null===e||void 0===e?void 0:e.answer)==t.key?Object(b.jsx)("span",{className:"bi bi-check-circle-fill text-success  ml-1"}):Object(b.jsx)("span",{className:"bi bi-x-circle-fill text-danger ml-1"})]}),Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.options[a]}})]})}))),"docx"!==(null===e||void 0===e?void 0:e.extension)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"col-md-11 flex pr-0",style:{justifyContent:"flex-start",flexWrap:"wrap",border:"1px solid #ededed"},children:[Object(b.jsx)("div",{className:"pr-3",children:" A: "}),"option_a"===(null===e||void 0===e?void 0:e.answer)?Object(b.jsx)("span",{className:"bi bi-check-circle-fill text-success"}):Object(b.jsx)("span",{className:"bi bi-x-circle-fill text-danger ml-1"}),Object(b.jsx)("div",{className:"pl-3 pr-3",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.option_a}})]}),Object(b.jsxs)("div",{className:"col-md-11 flex pr-0",style:{justifyContent:"flex-start",flexWrap:"wrap",border:"1px solid #ededed"},children:[Object(b.jsx)("div",{className:"pr-3",children:" B: "}),"option_b"===(null===e||void 0===e?void 0:e.answer)?Object(b.jsx)("span",{className:"bi bi-check-circle-fill text-success"}):Object(b.jsx)("span",{className:"bi bi-x-circle-fill text-danger ml-1"}),Object(b.jsx)("div",{className:"pl-3 pr-3",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.option_b}})]}),Object(b.jsxs)("div",{className:"col-md-11 flex pr-0",style:{justifyContent:"flex-start",flexWrap:"wrap",border:"1px solid #ededed"},children:[Object(b.jsx)("div",{className:"pr-3",children:" C: "}),"option_c"===(null===e||void 0===e?void 0:e.answer)?Object(b.jsx)("span",{className:"bi bi-check-circle-fill text-success"}):Object(b.jsx)("span",{className:"bi bi-x-circle-fill text-danger ml-1"}),Object(b.jsx)("div",{className:"pl-3 pr-3",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.option_c}})]}),Object(b.jsxs)("div",{className:"col-md-11 flex pr-0",style:{justifyContent:"flex-start",flexWrap:"wrap",border:"1px solid #ededed"},children:[Object(b.jsx)("div",{className:"pr-3",children:" D: "}),"option_d"===(null===e||void 0===e?void 0:e.answer)?Object(b.jsx)("span",{className:"bi bi-check-circle-fill text-success"}):Object(b.jsx)("span",{className:"bi bi-x-circle-fill text-danger ml-1"}),Object(b.jsx)("div",{className:"pl-3 pr-3",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.option_d}})]})]})]})]})})))})]})}function pt(){var e,t,a=Object(n.useContext)(S).state,c=Object(l.i)();return e="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for),t="".concat(I,"v1/mock-test/single-question/").concat(null===c||void 0===c?void 0:c.test_id),Object(D.a)("".concat(e),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===c||void 0===c?void 0:c.question_for)){e.next=5;break}return e.next=3,F.a.get("".concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}function ht(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/update-question"),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Questions added successfully",{appearance:"success",autoDismiss:!0}),window.location.href="/admin/mock-test/view/mock-test-question/".concat(null===c||void 0===c?void 0:c.question_for)}})}function Ot(){var e,t,a,c,s=Object(l.i)(),i=(Object(l.g)(),Object(E.useToasts)().addToast),o=Object(n.useState)({}),d=Object(j.a)(o,2),v=d[0],p=d[1],h=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/add-question"),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Questions added successfully",{appearance:"success",autoDismiss:!0}),window.location.href="/admin/mock-test/view/mock-test-question/".concat(null===c||void 0===c?void 0:c.question_for)}})}(),O=ht(),f=pt().data;function x(){return(x=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v.question_for=null===s||void 0===s?void 0:s.question_for,!(null===s||void 0===s?void 0:s.test_id)){e.next=13;break}return v.test_id=null===s||void 0===s?void 0:s.test_id,v.question=void 0===v.question?f.question:v.question,v.option_a=void 0===v.option_a?f.option_a:v.option_a,v.option_b=void 0===v.option_b?f.option_b:v.option_b,v.answer=void 0===v.answer?f.answer:v.answer,console.log(v),e.next=11,O.mutate(v);case 11:e.next=35;break;case 13:if(null===v||void 0===v?void 0:v.question){e.next=18;break}return i("Please write a question?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 18:if(null===v||void 0===v?void 0:v.option_a){e.next=23;break}return i("Please write a option a?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 23:if(null===v||void 0===v?void 0:v.option_b){e.next=28;break}return i("Please write a option b?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 28:if(null===v||void 0===v?void 0:v.answer){e.next=33;break}return i("Please select correct answer?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 33:return e.next=35,h.mutate(v);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){null===s||void 0===s||s.test_id,p(Object(m.a)(Object(m.a)({},v),{},Object(W.a)({},e.target.name,e.target.value)))}return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"question",placeholder:"enter question",value:null!==(e=v.question)&&void 0!==e?e:null===f||void 0===f?void 0:f.question,onChange:_})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"enter option a",name:"option_a",value:null!==(t=v.option_a)&&void 0!==t?t:null===f||void 0===f?void 0:f.option_a,onChange:_})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"option_b",placeholder:"enter option b",value:null!==(a=v.option_b)&&void 0!==a?a:null===f||void 0===f?void 0:f.option_b,onChange:_})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",name:"answer",value:null!==(c=v.answer)&&void 0!==c?c:null===f||void 0===f?void 0:f.answer,onChange:_,children:[Object(b.jsx)("option",{children:"Answer"}),Object(b.jsx)("option",{value:"a",children:"Option A"}),Object(b.jsx)("option",{value:"b",children:"Option B"})]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("button",{className:"btnb tn-sm dark bg-success",children:[h.isLoading&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," Processing"]}),!h.isLoading&&(null===s||void 0===s?void 0:s.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Question"]}),!h.isLoading&&!(null===s||void 0===s?void 0:s.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Question"]})]})})]})})}function ft(){var e,t,a=Object(l.i)(),c=(Object(l.g)(),Object(E.useToasts)().addToast),s=Object(n.useState)({}),i=Object(j.a)(s,2),o=i[0],d=i[1],v=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/create"),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Mock Test added successfully",{appearance:"success",autoDismiss:!0}),window.location.href="/admin/mock-test/view/mock-test/".concat(null===c||void 0===c?void 0:c.question_for)}})}(),p=(ht(),pt().data);function h(){return(h=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.question_for=null===a||void 0===a?void 0:a.question_for,null===o||void 0===o?void 0:o.test_name){e.next=7;break}return c("Please write a test_name?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 7:if(null===o||void 0===o?void 0:o.test_duration){e.next=12;break}return c("Please write test_duration?",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 12:return o.test_for=null===a||void 0===a?void 0:a.question_for,o.test_type="mock-test",o.assign="false",e.next=17,v.mutate(o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){(null===a||void 0===a?void 0:a.test_id)?d(Object(m.a)(Object(m.a)({},o),{},Object(W.a)({},e.target.name,e.target.value))):"test_duration"===e.target.name&&isNaN(e.target.value)?c("please enter test duration in numbers",{appearance:"error",autoDismiss:!0}):d(Object(m.a)(Object(m.a)({},o),{},Object(W.a)({},e.target.name,e.target.value)))}return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"test_name",placeholder:"enter test name",value:null!==(e=o.test_name)&&void 0!==e?e:null===p||void 0===p?void 0:p.test_name,onChange:O})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",name:"test_duration",placeholder:"enter test duration",value:null!==(t=o.test_duration)&&void 0!==t?t:null===p||void 0===p?void 0:p.test_duration,onChange:O})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("button",{className:"btnb tn-sm dark bg-success",children:[v.isLoading&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"})," Processing"]}),!v.isLoading&&(null===a||void 0===a?void 0:a.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Mock Test"]}),!v.isLoading&&!(null===a||void 0===a?void 0:a.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Mock test"]})]})})]})})}function xt(){var e,t=function(){var e,t,a=Object(n.useContext)(S).state,c=Object(l.i)();return e="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for),t="".concat(I,"v1/mock-test/all-question/").concat(null===c||void 0===c?void 0:c.question_for),Object(D.a)("".concat(e),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("".concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 2:return n=e.sent,e.abrupt("return",n.data.data);case 4:case"end":return e.stop()}}),e)}))))}().data,a=Object(l.i)(),c=Object(l.g)(),s=Object(n.useState)({}),i=Object(j.a)(s,2),o=i[0],d=(i[1],function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/delete-question"),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Questions added successfully",{appearance:"success",autoDismiss:!0}),window.location.href="/admin/mock-test/view/mock-test-question/".concat(null===c||void 0===c?void 0:c.question_for)}})}());function v(){return(v=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.test_id=t,e.next=3,d.mutate(o);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"flex no-gutter",style:{flexDirection:"row",flexWrap:"wrap",height:"500px",overflow:"hidden scroll"},children:void 0!==t&&(null===(e=Array.from(t))||void 0===e?void 0:e.map((function(e,t){return Object(b.jsxs)("div",{className:"card flex col-md-6 p-2 mb-2",style:{cursor:"pointer",flexDirection:"row",flexWrap:"wrap",alignItems:"flex-start",color:"white"},children:[Object(b.jsxs)("span",{className:"col-md-9 text-dark",children:["Que ",t+1,". \xa0",e.question]}),Object(b.jsxs)("span",{className:"col-md-3 ".concat("a"===e.answer?"bg-success":"bg-danger"),children:["Answer: ",e.answer," - ","a"===e.answer?null===e||void 0===e?void 0:e.option_a:null===e||void 0===e?void 0:e.option_b]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"col-md-12 mt-3",children:[Object(b.jsxs)("button",{className:"dark mr-2",onClick:function(t){return c.push("/admin/mock-test/create/mock-test-question/".concat(null===a||void 0===a?void 0:a.question_for,"/").concat(null===e||void 0===e?void 0:e._id))},children:[Object(b.jsx)("span",{className:"fa fa-pencil mr-2"}),"Edit"]}),Object(b.jsx)("button",{className:"dark",disabled:d.isLoading,onClick:function(t){return function(e){return v.apply(this,arguments)}(null===e||void 0===e?void 0:e._id)},children:d.isLoading?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash mr-2"}),"Delete"]})})]})]})})))})}function _t(){var e,t=Object(n.useContext)(S).state,a=Object(l.i)(),c=Object(l.h)().pathname.split("/"),s="",i=localStorage.getItem("mock_test_for");return s="assign-test"==c[2]?"".concat(I,"v1/mock-test/view-all/").concat(i,"/active"):"".concat(I,"v1/mock-test/view-all/").concat(null===a||void 0===a?void 0:a.question_for),e="mock-questions-".concat(null===a||void 0===a?void 0:a.question_for),Object(D.a)("".concat(e),Object(u.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("".concat(s),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 2:return a=e.sent,e.abrupt("return",a.data.data);case 4:case"end":return e.stop()}}),e)}))))}function gt(){var e,t=_t().data,a=(Object(l.i)(),Object(l.g)(),Object(n.useState)({})),c=Object(j.a)(a,2),s=c[0],i=(c[1],function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="mock-questions-".concat(null===c||void 0===c?void 0:c.question_for);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/update-mock-test"),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Questions added successfully",{appearance:"success",autoDismiss:!0}),window.location.href="/admin/mock-test/view/mock-test/".concat(null===c||void 0===c?void 0:c.question_for)}})}());function o(){return(o=Object(u.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.test_id=t,s.status=a,e.next=4,i.mutate(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(t),Object(b.jsx)("div",{className:"flex no-gutter",style:{flexDirection:"row",flexWrap:"wrap"},children:void 0!==t&&(null===(e=Array.from(t))||void 0===e?void 0:e.map((function(e,t){return Object(b.jsxs)("div",{className:"card flex col-md-6 p-2 mb-2",style:{cursor:"pointer",flexDirection:"row",flexWrap:"wrap",alignItems:"flex-end",color:"white"},children:[Object(b.jsxs)("div",{className:"col-md-6 text-dark",children:["Test Name: \xa0",e.test_name]}),Object(b.jsxs)("span",{className:"col-md-6 ".concat("a"===e.answer?"bg-success":"bg-danger"),children:["Test Type: ",e.test_type]}),Object(b.jsxs)("div",{className:"col-md-6 text-dark",children:["Test For: \xa0",e.test_for]}),Object(b.jsxs)("span",{className:"col-md-6 mt-2 ".concat("a"===e.answer?"bg-success":"bg-danger"),children:["Total Question: ",e.total_question]}),Object(b.jsxs)("div",{className:"col-md-6 text-dark",children:["Test Duration: \xa0",e.test_duration," Min"]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"col-md-12 mt-3",children:Object(b.jsxs)("button",{className:"dark mr-2 ".concat((null===e||void 0===e?void 0:e.status)?"bg-success":"bg-danger"),onClick:function(t){!function(e,t){o.apply(this,arguments)}(null===e||void 0===e?void 0:e._id,!(null===e||void 0===e?void 0:e.status))},children:[(null===i||void 0===i?void 0:i.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}):Object(b.jsx)("span",{className:"fa fa-pencil mr-2"}),!1===(null===e||void 0===e?void 0:e.status)?"Active Mock Test":"Deactive c Test"]})})]},t)})))})}function Nt(e){var t,a=Object(X.b)(),c=Object(n.useContext)(S).state,s=Object(l.i)(),i=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}}),o=Object(E.useToasts)().addToast;return t="units-".concat(s.class_id,"-").concat(null===s||void 0===s?void 0:s.subject_id),Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/unit/upload"),e,i)}),{onSuccess:function(){a.invalidateQueries("".concat(t)),setLoading(!1),o("Units Uploaded successfully",{appearance:"success",autoDismiss:!0})}})}function yt(){var e=Object(l.i)(),t=Object(l.g)(),a=Te().data,c=ct(),s=c.data,i=c.isLoading,o=Object(E.useToasts)().addToast,d=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.unit_id,a=Object(n.useContext)(S).state,c=e.unit_id?"units-".concat(e.unit_id):"units";return Object(D.a)("".concat(c),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/unit/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,v=Object(n.useState)(1),p=Object(j.a)(v,2),h=p[0],O=p[1],f=Object(n.useState)(!1),x=Object(j.a)(f,2),_=(x[0],x[1]),g=Object(n.useState)({}),N=Object(j.a)(g,2),y=N[0],k=N[1],w=Object(n.useState)(!0),C=Object(j.a)(w,2),T=C[0],A=C[1],L=Object(n.useState)(null),q=Object(j.a)(L,2),B=q[0],M=q[1],z=new FormData,U=Object(n.useState)({unit_no:"",unit_name:"",marks:""}),Q=Object(j.a)(U,2),P=Q[0],H=Q[1];Object(n.useEffect)((function(){k(d)}),[d]);var R=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=Object(l.h)().pathname,i=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},d=Object(E.useToasts)().addToast,r="";return r=(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)?"units-".concat(c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id):(null===c||void 0===c?void 0:c.class_id)?"units-".concat(c.class_id):"units",Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/unit/create"),e,o)}),{onSuccess:function(){t.invalidateQueries("".concat(r)),i.push("".concat(s)),d("Unit added successfully",{appearance:"success",autoDismiss:!0})}})}(),V=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast,d="";return d=(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)?"units-".concat(c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id):(null===c||void 0===c?void 0:c.class_id)?"units-".concat(c.class_id):"units",Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/unit/update"),e,i)}),{onSuccess:function(){t.invalidateQueries("".concat(d)),s.push("/admin/manage-units/".concat(null===c||void 0===c?void 0:c.page_type,"/").concat(c.class_id,"/").concat(null===c||void 0===c?void 0:c.subject_id)),o("Unit Updated successfully",{appearance:"success",autoDismiss:!0})}})}(),G=Nt();function Z(e){return $.apply(this,arguments)}function $(){return($=Object(u.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===e||void 0===e?void 0:e.unit_id)?(console.log(a.target.name),k(Object(m.a)(Object(m.a)({},y),{},Object(W.a)({},a.target.name,a.target.value)))):H(Object(m.a)(Object(m.a)({},P),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ee=function(e){var t,a,n=e.target.options[e.target.selectedIndex].dataset.class_name,c=e.target.options[e.target.selectedIndex].dataset.subject_name;void 0!=n?H(Object(m.a)(Object(m.a)({},P),{},(t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"class_name",n),t))):H(Object(m.a)(Object(m.a)({},P),{},(a={},Object(W.a)(a,e.target.name,e.target.value),Object(W.a)(a,"subject_name",c),a)))},te=function(){var t=Object(u.a)(r.a.mark((function t(a){var n,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=[],_(!0),!(null===e||void 0===e?void 0:e.unit_id)){t.next=9;break}for(c=0;c<h;c++)n.push({unit_id:null===e||void 0===e?void 0:e.unit_id,class_id:null===e||void 0===e?void 0:e.class_id,class_name:y.class_name,subject_id:null===e||void 0===e?void 0:e.subject_id,subject_name:null===y||void 0===y?void 0:y.subject_name,unit_no:(null===y||void 0===y?void 0:y.unit_no)!==(null===P||void 0===P?void 0:P.unit_no)?null===y||void 0===y?void 0:y.unit_no:null===P||void 0===P?void 0:P.unit_no,unit_name:(null===y||void 0===y?void 0:y.unit_name)!==(null===P||void 0===P?void 0:P.unit_name)?null===y||void 0===y?void 0:y.unit_name:null===P||void 0===P?void 0:P.unit_name,marks:null===y||void 0===y?void 0:y.marks});return t.next=7,V.mutate(n);case 7:t.next=12;break;case 9:for(s=0;s<h;s++)n.push({class_id:null===e||void 0===e?void 0:e.class_id,class_name:P.class_name,subject_id:null===e||void 0===e?void 0:e.subject_id,subject_name:P.subject_name,unit_no:P["unit_no".concat(s)],unit_name:P["unit_name".concat(s)],marks:P["marks".concat(s)]});return t.next=12,R.mutate(n);case 12:_(!1),ce();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function ae(){return(ae=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(A(!1),M(t.target.files[0]),z.append("file",t.target.files[0])):(A(!0),o("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(u.a)(r.a.mark((function t(n){var c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=null===e||void 0===e?void 0:e.class_id,s=K(a,"_id",c,"class_name"),z.append("file",B),z.append("class_id",c),z.append("class_name",s),t.next=8,G.mutate(z);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ce(){Array.from(document.querySelectorAll(".addedItems")).map((function(e){e.value=""}))}return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add Multiple Unit"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",value:null===e||void 0===e?void 0:e.class_id,onChange:function(a){ee(a),"_"===a.target.value?t.push("/admin/manage-units/".concat(null===e||void 0===e?void 0:e.page_type,"/")):t.push("/admin/manage-units/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Select Classes"}),null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,"data-class_name":null===e||void 0===e?void 0:e.class_name,children:[null===e||void 0===e?void 0:e.class_name," th "]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",value:null===e||void 0===e?void 0:e.subject_id,onChange:function(a){if(ee(a),"_"===a.target.value)t.push("/admin/manage-units/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id));else{var n=a.target.options[a.target.selectedIndex].dataset.subject_name;t.push("/admin/manage-units/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(a.target.value,"/").concat(n))}},children:[Object(b.jsx)("option",{value:"_",children:i?"loading ...":"Select Subjects"}),null===s||void 0===s?void 0:s.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.subject_id,"data-subject_name":J(null===e||void 0===e?void 0:e.subject_name),children:null===e||void 0===e?void 0:e.subject_name},null===e||void 0===e?void 0:e.subject_id)}))]})}),("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type))&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){e.preventDefault(),O(h+1)},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Add New Unit"]})}),Object(Ee.a)(Array(h)).map((function(t,a){return Object(b.jsx)("span",{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"form-group col-md-2 pr-0",children:Object(b.jsx)("input",{type:"text",className:"form-control addedItems",name:(null===e||void 0===e?void 0:e.unit_id)?"unit_no":"unit_no".concat(a),value:(null===e||void 0===e?void 0:e.unit_id)&&y&&y.unit_no,onChange:Z,placeholder:"No"})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-1 pr-0",children:Object(b.jsx)("input",{type:"text",className:"form-control addedItems",name:(null===e||void 0===e?void 0:e.unit_id)?"marks":"marks".concat(a),value:(null===e||void 0===e?void 0:e.unit_id)&&y&&y.marks,onChange:Z,placeholder:"Marks"})}),Object(b.jsx)("div",{className:"form-group col-md-8 pl-1",children:Object(b.jsx)("input",{type:"text",className:"form-control addedItems",name:(null===e||void 0===e?void 0:e.unit_id)?"unit_name":"unit_name".concat(a),value:(null===e||void 0===e?void 0:e.unit_id)&&y&&y.unit_name,onChange:Z,placeholder:"Unit Name"})}),Object(b.jsx)("hr",{})]})},a)}))]}),"upload"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsxs)("div",{className:"col-md-12 pl-0 pr-0",children:[Object(b.jsx)("label",{children:"Upload Files"}),Object(b.jsx)("a",{href:"/sampledata/units.csv",className:"pull-right",download:!0,children:"Download Sample"}),Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return ae.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsx)("hr",{className:"mt-1 mb-1"}),Object(b.jsxs)("div",{className:"form-group flex mt-2",children:["upload"!==(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("button",{type:"button",className:"btn btn-sm dark",onClick:te,children:(null===R||void 0===R?void 0:R.isLoading)||(null===V||void 0===V?void 0:V.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===e||void 0===e?void 0:e.unit_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Unit"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Unit"]})})}),"upload"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("button",{className:"btn btn-sm dark",type:"button",disabled:T,onClick:function(e){return ne.apply(this,arguments)},children:(null===G||void 0===G?void 0:G.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===e||void 0===e?void 0:e.unit_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Unit"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-upload mr-2"})," Upload Unit"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(e){e.preventDefault(),t.push("/admin/manage-units"),ce()},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})})}function kt(e){var t=this,a=e.update,c=e.Delete,s=Object(l.g)(),i=(Object(n.useContext)(S).state,Object(l.i)()),o=lt(),d=o.data,v=o.isLoading,m=null===i||void 0===i?void 0:i.subject_id,p=Object(n.useState)({}),h=Object(j.a)(p,2),O=(h[0],h[1],function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast,i="";return i=(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)?"units-".concat(t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id):(null===t||void 0===t?void 0:t.class_id)?"units-".concat(t.class_id):"units",Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/unit/delete"),e,c)}),{onSuccess:function(){a.invalidateQueries("".concat(i)),s("Unit Deleted successfully",{appearance:"success",autoDismiss:!0})}})}()),f=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.mutate({unit_id:t});case 2:document.getElementById(t).style.display="none";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"All Units"]}),Object(b.jsx)("hr",{className:"mt-1"}),m&&Object(b.jsxs)("div",{className:"row pl-0 pr-0",children:[Object(b.jsxs)("div",{className:"col-md-6",children:[Object(b.jsx)("b",{className:"mr-0",children:"Subject ID: "}),m]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{className:"mr-2",children:"Subject Name: "}),null===i||void 0===i?void 0:i.subject_name]})]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)(B,{isLoading:v}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Unit No"}),Object(b.jsx)("th",{scope:"col",children:"Unit Name"}),Object(b.jsx)("th",{scope:"col",children:"Class Name"}),Object(b.jsx)("th",{scope:"col",children:"Subject Name"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:null===d||void 0===d?void 0:d.map((function(e,n){return Object(b.jsxs)("tr",{id:null===e||void 0===e?void 0:e._id,children:[Object(b.jsx)("td",{children:ee(e.unit_no)}),Object(b.jsx)("td",{children:e.unit_name}),Object(b.jsx)("td",{children:e.class_name}),Object(b.jsx)("td",{children:e.subject_name}),Object(b.jsxs)("td",{children:[!0===a&&Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){s.push("/admin/manage-units/update/".concat(e.class_id,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_name,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})}),!0===c&&Object(b.jsx)("button",{className:"btn bg-danger text-white btn-sm block",onClick:f.bind(t,null===e||void 0===e?void 0:e._id),children:(null===O||void 0===O?void 0:O.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function wt(){var e,t=this,a=Object(l.i)(),c=Object(l.g)(),s=Object(E.useToasts)().addToast,i=Te().data,o=ct(),d=o.data,v=o.isLoading,p=lt(),h=p.data,O=p.isLoading,f=dt(),x=f.data,_=f.isLoading,g=Object(n.useState)([]),N=Object(j.a)(g,2),y=N[0],k=(N[1],vt()),w=k.data,C=k.isLoading,T=(function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.test_id,a=Object(n.useContext)(S).state,c=e.test_id?"unit-tests-".concat(e.test_id):"unit-tests";return Object(D.a)("".concat(c),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/unit-test/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,Object(n.useState)({})),A=Object(j.a)(T,2),L=A[0],q=A[1],B=Object(n.useState)(new Date),M=Object(j.a)(B,2),z=M[0],U=(M[1],function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},o=Object(E.useToasts)().addToast,d="unit-tests-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id,"-").concat(null===c||void 0===c?void 0:c.unit_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/unit-test/create"),e,i)}),{onSuccess:function(){t.invalidateQueries("".concat(d)),s.push("/admin/manage-unit-test/create/".concat(null===c||void 0===c?void 0:c.test_type,"/").concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.subject_id,"/").concat(null===c||void 0===c?void 0:c.unit_id,"/").concat(null===c||void 0===c?void 0:c.chapter_id)),o("Questions added successfully",{appearance:"success",autoDismiss:!0})}})}()),Q=Object(n.useState)([]),P=Object(j.a)(Q,2),H=P[0],R=P[1],V=Object(n.useState)(!1),G=Object(j.a)(V,2),Z=G[0],$=G[1],te=Object(n.useState)([]),ae=Object(j.a)(te,2),ne=ae[0],ce=ae[1];function se(){return(se=Object(u.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem("selectedQuestions"));case 2:(null===(t=e.sent)||void 0===t?void 0:t.length)>0&&0===(null===H||void 0===H?void 0:H.length)?R(JSON.parse(localStorage.getItem("selectedQuestions"))):(localStorage.setItem("selectedQuestions",JSON.stringify(H)),R(H));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(u.a)(r.a.mark((function e(t){var n,c,o,l,u,j,v,m,b,p,O,f,x,_;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=null===a||void 0===a?void 0:a.class_id,c=null===a||void 0===a?void 0:a.subject_id,o=null===a||void 0===a?void 0:a.unit_id,l=null===a||void 0===a?void 0:a.chapter_id,u=null===a||void 0===a?void 0:a.test_type){e.next=10;break}s("please select test type",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 10:if(n){e.next=14;break}s("please select class",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 14:if(c){e.next=18;break}s("please select subject",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 18:if(o){e.next=22;break}s("please select unit",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 22:if(l){e.next=26;break}s("please select chapters",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 26:if(localStorage.getItem("test_duration")){e.next=30;break}s("please enter test duration",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 30:if(0!==(null===H||void 0===H?void 0:H.length)){e.next=34;break}s("please select questions",{appearance:"error",autoDismiss:!0}),e.next=68;break;case 34:return j=localStorage.getItem("assignClass"),v=localStorage.getItem("test_name"),m=localStorage.getItem("test_duration"),b=localStorage.getItem("total_marks"),p=K(i,"_id",n,"class_name"),O=j?K(i,"_id",j,"class_name"):p,f=K(d,"subject_id",c,"subject_name"),x=K(h,"_id",o,"unit_name"),_=null===H||void 0===H?void 0:H.map((function(e){return{question_id:e.question_id,unit_id:e.unit_id,unit_name:e.unit_name,chapter_id:e.chapter_id,chapter_name:e.chapter_name}})),L.test_type=u,L.test_subjects=ne,L.class_id=n,L.class_name=p,L.subject_id=c,L.subject_name=f,L.unit_id=o,L.unit_name=x,L.test_slug=J(L.test_name),L.test_date=z,L.total_question=null===H||void 0===H?void 0:H.length,L.test_question=_,L.assign_class_id=void 0===j?n:j,L.assign_class_name=O,L.test_name=v,L.test_duration=m,L.total_marks=b,e.next=62,U.mutate(L);case 62:localStorage.removeItem("selectedQuestions"),localStorage.removeItem("assignClass"),localStorage.removeItem("test_name"),localStorage.removeItem("test_duration"),localStorage.removeItem("total_marks"),R([]);case 68:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return le.apply(this,arguments)}function le(){return(le=Object(u.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),document.getElementById(t).style.display="none",e.next=4,null===w||void 0===w?void 0:w.filter((function(e){return e._id===t}));case 4:a=e.sent,R((function(e){return[].concat(Object(Ee.a)(e),[{question_id:a[0]._id,unit_id:a[0].unit_id,unit_name:a[0].unit_name,chapter_id:a[0].chapter_id,chapter_name:a[0].chapter_name}])})),null===H||void 0===H||H.length,localStorage.setItem("selectedQuestions",JSON.stringify(H)),$(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),localStorage.removeItem("selectedQuestions"),R([]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){return se.apply(this,arguments)}),[Z]);var ue,je=Object(n.useState)(!1),ve=Object(j.a)(je,2),me=ve[0],be=ve[1],pe=Object(n.useState)([]),he=Object(j.a)(pe,2),Oe=he[0],fe=he[1];return Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",e.async=!0,document.body.appendChild(e)}),[]),ue=(null===a||void 0===a?void 0:a.subject_id)?K(d,"subject_id",null===a||void 0===a?void 0:a.subject_id,"subject_name"):"",Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Test"]}),Object(b.jsx)("hr",{className:"mt-1"}),"create"===(null===a||void 0===a?void 0:a.page_type)&&Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"row col-md-12",children:[Object(b.jsx)("div",{className:"col-md-2",children:Object(b.jsxs)("select",{className:"form-control",value:null===a||void 0===a?void 0:a.test_type,onChange:function(e){c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Test Type"}),Object(b.jsx)("option",{value:"combine-test",children:"Combined Test"}),Object(b.jsx)("option",{value:"single-test",children:"Single Test"})]})}),"combine-test"===(null===a||void 0===a?void 0:a.test_type)&&Object(b.jsx)("div",{className:"col-md-2 pl-0",children:Object(b.jsxs)("select",{className:"form-control",value:localStorage.getItem("assignClass"),onChange:function(e){q(Object(m.a)(Object(m.a)({},L),{},Object(W.a)({},"assign_to",e.target.value))),localStorage.setItem("assignClass",e.target.value)},children:[Object(b.jsx)("option",{value:"_",children:"Select Class"}),null===i||void 0===i?void 0:i.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.class_name," Th"]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"col-md-2 pl-0 form-group",children:Object(b.jsx)("input",{type:"text",name:"test_name",value:localStorage.getItem("test_name"),onChange:function(e){q(Object(m.a)(Object(m.a)({},L),{},{test_name:e.target.value})),localStorage.setItem("test_name",e.target.value)},className:"form-control",placeholder:"test name"})}),Object(b.jsx)("div",{className:"col-md-2 pl-0 pr-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",maxLength:"3",value:localStorage.getItem("test_duration"),onChange:function(e){isNaN(e.target.value)?s("please enter test duration in numbers",{appearance:"error",autoDismiss:!0}):(q(Object(m.a)(Object(m.a)({},L),{},{test_duration:e.target.value})),localStorage.setItem("test_duration",e.target.value))},placeholder:"Test Duration in Minute"})}),Object(b.jsx)("div",{className:"col-md-2 pr-0",children:Object(b.jsx)("input",{type:"text",className:"form-control",maxLength:"3",value:localStorage.getItem("total_marks"),onChange:function(e){isNaN(e.target.value)?s("please enter test duration in numbers",{appearance:"error",autoDismiss:!0}):(q(Object(m.a)(Object(m.a)({},L),{},{total_marks:e.target.value})),localStorage.setItem("total_marks",e.target.value))},placeholder:"Total Marks"})}),Object(b.jsx)("div",{className:"form-group col-md-2",children:Object(b.jsxs)("select",{className:"form-control",id:"classdiv",value:null===a||void 0===a?void 0:a.class_id,onChange:function(e){"undefined"==(null===a||void 0===a?void 0:a.test_type)||"string"!==typeof(null===a||void 0===a?void 0:a.test_type)?(s("please select test type first",{appearance:"error",autoDismiss:!0}),c.push("/admin/manage-unit-test/create/"),document.getElementById("classdiv").selectedIndex="0"):c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Select Class"}),null===i||void 0===i?void 0:i.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.class_name," Th"]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"col-md-2",children:Object(b.jsxs)("select",{className:"form-control",value:null===a||void 0===a?void 0:a.subject_id,onChange:function(e){if("_"===e.target.value)c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id));else{var t=e.target.options[e.target.selectedIndex].dataset.subject_name;ne.some((function(t){return(null===t||void 0===t?void 0:t.subject_id)===e.target.value}))||ce((function(a){return[].concat(Object(Ee.a)(a),[{subject_id:e.target.value,subject_name:t}])})),"combine-test"===(null===a||void 0===a?void 0:a.test_type)?c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(e.target.value)):(null===a||void 0===a?void 0:a.subject_id)?(s("if you want to create combine test then please change test type",{appearance:"error",autoDismiss:!0,duration:"20s"}),c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id))):c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(e.target.value))}},children:[Object(b.jsx)("option",{value:"_",children:v?"Loading...":"Select Subjects"}),null===d||void 0===d?void 0:d.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.subject_id,"data-subject_name":e.subject_name,children:null===e||void 0===e?void 0:e.subject_name},null===e||void 0===e?void 0:e.subject_id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsxs)("select",{className:"form-control",value:null===a||void 0===a?void 0:a.unit_id,onChange:function(e){"_"===e.target.value?c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id)):c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:O?"loading ...":"Units"}),null===h||void 0===h?void 0:h.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[ee(null===e||void 0===e?void 0:e.unit_no),"-",null===e||void 0===e?void 0:e.unit_name]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group col-md-2 pl-0",children:Object(b.jsxs)("select",{className:"form-control",value:null===a||void 0===a?void 0:a.chapter_id,onChange:function(e){"_"===e.target.value?c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id,"/").concat(null===a||void 0===a?void 0:a.unit_id)):c.push("/admin/manage-unit-test/".concat(null===a||void 0===a?void 0:a.page_type,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id,"/").concat(null===a||void 0===a?void 0:a.unit_id,"/").concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:_?"loading ...":"Chapters"}),null===x||void 0===x?void 0:x.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.chapter_no,"-",null===e||void 0===e?void 0:e.chapter_name]},null===e||void 0===e?void 0:e._id)}))]})})]}),Object(b.jsxs)("div",{className:"col-md-12 mt-2",children:[Object(b.jsxs)("div",{className:"text-success mb-0",children:[Object(b.jsxs)("span",{className:"badge-danger pl-2 pr-2",children:["All Questions: ",null!==(e=null===y||void 0===y?void 0:y.length)&&void 0!==e?e:0]}),Object(b.jsxs)("span",{className:"badge-success ml-3 pl-2 pr-2",children:["Subject: ",ue]}),Object(b.jsxs)("span",{className:"badge-success ml-3 pl-2 pr-2",children:["Selected Questions: ",null===H||void 0===H?void 0:H.length]}),(null===H||void 0===H?void 0:H.length)>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-trash bg-danger text-white p-1 ml-2",style:{display:"inline-block",cursor:"pointer"},onClick:de,children:" Delete Selected"}),Object(b.jsx)("span",{className:"fa fa-eye bg-success text-white p-1 ml-2",style:{display:"inline-block",cursor:"pointer"},onClick:function(e){fe(JSON.parse(JSON.stringify(H))),be(!me)},children:" View Selected"})]})]}),me&&Object(b.jsxs)("div",{className:"col-md-12 row mt-2",children:[Object(b.jsx)("p",{children:"Selected Questions: "}),Object(b.jsx)("div",{className:"table table-bordered",children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"col-md-4 pl-2",children:"Question ID"}),Object(b.jsx)("div",{className:"col-md-4 pl-2",children:"Unit Name"}),Object(b.jsx)("div",{className:"col-md-4 pl-2",children:"Chapter Name"})]})}),null===Oe||void 0===Oe?void 0:Oe.map((function(e){return Object(b.jsx)("div",{className:"table table-bordered mb-1",children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"col-md-4 pl-2",children:null===e||void 0===e?void 0:e.question_id}),Object(b.jsx)("div",{className:"col-md-4 pl-2",children:null===e||void 0===e?void 0:e.unit_name}),Object(b.jsx)("div",{className:"col-md-4 pl-2",children:null===e||void 0===e?void 0:e.chapter_name})]})})}))]}),!me&&Object(b.jsxs)("div",{className:"row col-md-12 mt-2",children:[Object(b.jsx)("p",{children:"Select Questions: "}),Object(b.jsx)("div",{className:"table table-bordered",children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"col-md-6 pl-0",children:"Unit/Chapter Name"}),Object(b.jsx)("div",{className:"col-md-6 pl-0",children:"Question"})]})}),Object(b.jsxs)("div",{className:"pr-2",style:{height:"300px",overflowY:"scroll"},children:[C&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner"}),"Loading..."]}),null===w||void 0===w?void 0:w.map((function(e,a){var n=JSON.stringify(H);if(!JSON.parse(n).some((function(t){return(null===t||void 0===t?void 0:t.question_id)===(null===e||void 0===e?void 0:e._id)})))return Object(b.jsx)("div",{className:"card question col-md-12 pl-2 pr-2 mb-1",id:"".concat(null===e||void 0===e?void 0:e._id),onClick:oe.bind(t,null===e||void 0===e?void 0:e._id),children:Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsxs)("div",{className:"col-md-6 pl-0",children:[null===e||void 0===e?void 0:e.unit_no,".",null===e||void 0===e?void 0:e.unit_name,"/",null===e||void 0===e?void 0:e.chapter_no,".",null===e||void 0===e?void 0:e.chapter_name," "]}),Object(b.jsx)("div",{className:"question col-md-6 pl-0",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.question}})]})},null===e||void 0===e?void 0:e._id)}))]})]})]}),Object(b.jsxs)("div",{className:"form-group mt-3",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:null===U||void 0===U?void 0:U.isLoading,onClick:function(e){return ie.apply(this,arguments)},children:(null===U||void 0===U?void 0:U.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-spinner mr-2"}),"Processing..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-save mr-2"}),"Save Unit Test"]})}),Object(b.jsx)("button",{type:"button",className:"btn btn-sm bg-danger br-5 text-white ml-2",onClick:function(e){e.preventDefault(),de(),c.push("/admin/manage-unit-test")},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})]})}function Ct(){var e,t=Object(n.useContext)(S).state,a=Object(l.i)();return e="unit-tests-".concat(null===a||void 0===a?void 0:a.class_id,"-").concat(null===a||void 0===a?void 0:a.test_type),Object(D.a)("".concat(e),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.access_token||!(null===a||void 0===a?void 0:a.class_id)){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/unit-test/view-all/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.test_type),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}function St(e){var t=Object(l.i)(),a=Object(l.h)().pathname,c=Object(l.g)(),s=Object(X.b)(),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/unit-test/delete/").concat(e),i)}),{onSuccess:function(){var e="unit-tests-".concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id);s.invalidateQueries(e),c.push("".concat(a)),o("Teacher Deleted successfully",{appearance:"success",autoDismiss:!0})}})}function Tt(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.class_id,c=(null===t||void 0===t||t.subject_id,null===t||void 0===t?void 0:t.school_id),s="",i="";return e.access_token&&c&&"mock-test"!==(null===t||void 0===t?void 0:t.test_type)&&a?(i="".concat(I,"v1/assign-test/view-all/").concat(c,"/").concat(null===t||void 0===t?void 0:t.test_type,"/").concat(a),s="assign-tests-".concat(c,"-").concat(null===t||void 0===t?void 0:t.test_type,"-").concat(a)):e.access_token&&c&&"mock-test"===(null===t||void 0===t?void 0:t.test_type)&&(i="".concat(I,"v1/assign-test/view-all/").concat(c,"/").concat(null===t||void 0===t?void 0:t.test_type,"/").concat(a),s="assign-tests-".concat(c,"-").concat(null===t||void 0===t?void 0:t.test_type)),Object(D.a)("".concat(s),Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get(i,{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 2:return a=t.sent,t.abrupt("return",a.data.data);case 4:case"end":return t.stop()}}),t)}))))}function At(){var e=Object(l.g)(),t=Object(l.i)(),a=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=Object(n.useState)(3600),c=Object(j.a)(a,2),s=c[0];return c[1],Object(D.a)("attempted_studetns-".concat(null===t||void 0===t?void 0:t.test_id),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.access_token&&(null===t||void 0===t?void 0:t.test_id)&&(null===t||void 0===t?void 0:t.test_type))){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/test-report/view-student/").concat(null===t||void 0===t?void 0:t.test_id,"/").concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.test_type),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}},{refetchInterval:s});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))))}().data;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"col-md-12 pl-0",children:[Object(b.jsxs)("h4",{children:["Student List",Object(b.jsx)("button",{className:"btn btn-sm dark pull-left mr-2",onClick:function(){e.push("/admin/school-report/".concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.class_id,"/").concat(null===t||void 0===t?void 0:t.test_type))},children:"Back"}),Object(b.jsx)("button",{className:"btn btn-sm dark pull-right mr-2",onClick:function(e){e.preventDefault();document.querySelector("table").outerHTML;ae(0,"table.csv")},children:"Export Report"})]}),Object(b.jsx)("hr",{})]}),Object(b.jsx)("div",{style:{overflow:"scroll scroll",height:"450px",marginBottom:"50px",paddingBottom:"100px"},className:"table table-responsive col-md-12 pl-0 pb-4 pr-3 mb-3",children:Object(b.jsxs)("table",{className:"table table-bordered",children:[Object(b.jsxs)("tr",{className:"flex col-md-12 pl-0 pr-0",children:[Object(b.jsx)("th",{className:"border col-md-4",children:"Student"}),Object(b.jsx)("th",{className:"border col-md-1",children:"Class"}),Object(b.jsx)("th",{className:"border col-md-1",children:"Roll"}),Object(b.jsx)("th",{className:"border col-md-1",children:"Section"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Test Name"}),Object(b.jsx)("th",{className:"border col-md-1",children:"Obtain Marks"}),Object(b.jsx)("th",{className:"border col-md-1",children:"Ques."}),Object(b.jsx)("th",{className:"border col-md-1",children:"Total Marks"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Percentage(%)"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Time Taken"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Duration"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Test Close"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Window"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Test Start Date"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Test End Date"})]}),null===a||void 0===a?void 0:a.map((function(e){var t=null===e||void 0===e?void 0:e.questions,a=t.length,n=e.total_marks,c=Math.floor(+n/+a),s=t.map((function(t){var a=0;return a="mock-test"===e.test_type?("yes"===t.answer?"a":"b")===(null===t||void 0===t?void 0:t.correct_answer)?+a+1:0:void 0===(null===t||void 0===t?void 0:t.option)||null===(null===t||void 0===t?void 0:t.option)?0:(null===t||void 0===t?void 0:t.option)===t.correct_option?+c:0})),i=new Date(null===e||void 0===e?void 0:e.start_date);i.setMinutes(i.getMinutes()+(null===e||void 0===e?void 0:e.test_window));var o,l=null===e||void 0===e?void 0:e.time_taken;if(void 0!==l){var d=Math.floor(l),r=Math.floor(d/1e3/3600),u=Math.floor(d/1e3/60-60*r),j=Math.floor(d/1e3-(3600*r+60*u));o="".concat("NaN"===r?0:r," Hr ").concat("NaN"===u?0:u," Min ").concat("NaN"===j?0:j," Sec")}else o="0 Hr 0 Min 0 Sec";var v=s.reduce((function(e,t){return e+t}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("tr",{className:"flex col-md-12 pl-0 pr-0",children:[Object(b.jsx)("td",{className:"border col-md-4",children:null===e||void 0===e?void 0:e.student_name}),Object(b.jsx)("td",{className:"border col-md-1",children:null===e||void 0===e?void 0:e.student_class_name}),Object(b.jsx)("td",{className:"border col-md-1",children:null===e||void 0===e?void 0:e.student_roll_no}),Object(b.jsx)("td",{className:"border col-md-1",children:null===e||void 0===e?void 0:e.section}),Object(b.jsx)("td",{className:"border col-md-3",children:null===e||void 0===e?void 0:e.test_name}),Object(b.jsx)("td",{className:"border col-md-1",children:v}),Object(b.jsx)("td",{className:"border col-md-1",children:a}),Object(b.jsx)("td",{className:"border col-md-1",children:n}),Object(b.jsxs)("td",{className:"border col-md-2",children:[Math.round(100*v/n),"%"]}),Object(b.jsx)("td",{className:"border col-md-2",children:o}),Object(b.jsxs)("td",{className:"border col-md-2",children:[null===e||void 0===e?void 0:e.test_duration," Min"]}),Object(b.jsx)("td",{className:"border col-md-2",children:null===e||void 0===e?void 0:e.completion_status}),Object(b.jsxs)("td",{className:"border col-md-2",children:[null===e||void 0===e?void 0:e.test_window," Min"]}),Object(b.jsx)("td",{className:"border col-md-3",children:new Date(null===e||void 0===e?void 0:e.start_date).toLocaleString()}),Object(b.jsx)("td",{className:"border col-md-3",children:i.toLocaleString()})]},null===e||void 0===e?void 0:e._id)})}))]})})]})}function Dt(){var e,t=function(){var e=Object(n.useContext)(S).state,t=Object(n.useState)(5e3),a=Object(j.a)(t,2),c=a[0],s=(a[1],Object(l.i)());return Object(D.a)("reports-".concat(null===s||void 0===s?void 0:s.school_id,"-").concat(null===s||void 0===s?void 0:s.class_id,"-").concat(null===s||void 0===s?void 0:s.test_type),Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token||(null===s||void 0===s?void 0:s.test_id)){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/school/report/").concat(null===s||void 0===s?void 0:s.school_id,"/").concat(null===s||void 0===s?void 0:s.class_id,"/").concat(null===s||void 0===s?void 0:s.test_type),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return a=t.sent,t.abrupt("return",a.data.data);case 5:case"end":return t.stop()}}),t)}))),{refetchInterval:c})}().data,a=function(){var e,t,a=Object(n.useContext)(S).state,c=Object(l.i)(),s=null===c||void 0===c?void 0:c.school_id,i=null===c||void 0===c?void 0:c.class_id;return s&&i&&!(null===c||void 0===c?void 0:c.test_id)?(e="students-".concat(s,"-").concat(i),t="".concat(I,"v1/student/all-students/").concat(s,"/").concat(i)):s&&(e="students-".concat(s),t="".concat(I,"v1/student/all-students/").concat(s)),Object(D.a)(e,Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.access_token||!s){e.next=5;break}return e.next=3,F.a.get("".concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,c=Object(l.i)(),s=Object(l.g)();switch(null===c||void 0===c?void 0:c.test_type){case"mock-test":e="Mock Test List";break;case"combine-test":e="Rivision Test List";break;case"single-test":e="Assign Test List";break;case"upload-test":e="Teacher Assign Test List";break;default:e="Test List"}return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"col-md-12 pl-0",children:!(null===c||void 0===c?void 0:c.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h4",{children:[e,Object(b.jsxs)("button",{className:"btn btn-sm dark pull-right mr-2",onClick:function(e){e.preventDefault();document.querySelector("table").outerHTML;var a=new Date(t[0].start_date).toISOString().split("T")[0],n=t[0].test_name;ae(0,"".concat(n,"-Report_").concat(a,".csv"))},children:[Object(b.jsx)("span",{className:"fa fa-download mr-2"}),"Export Report"]})]}),Object(b.jsx)("hr",{})]})}),Object(b.jsx)("div",{className:"".concat((null===c||void 0===c?void 0:c.test_id)?"":"pl-0 pb-3 table table-responsive"),style:{overflow:"scroll hidden",marginRight:"100px"},children:Object(b.jsxs)("table",{children:[!(null===c||void 0===c?void 0:c.test_id)&&Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:"flex header pl-0",children:[Object(b.jsx)("th",{className:"border col-md-3",children:"Test Name"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Test Type"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Test Subjects"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Attempted Students"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Total Students"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Unattempted Students"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Test Window"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Test Duration"}),Object(b.jsx)("th",{className:"border col-md-2",children:"Total Question"}),Object(b.jsx)("th",{className:"border col-md-3",children:"Start Date"}),Object(b.jsx)("th",{className:"border col-md-4",children:"End Date"}),Object(b.jsx)("th",{className:"border pl-3 hidden_col",style:{position:"fixed",width:"190px",right:"25px",background:"white"},children:"Action"})]})}),!(null===c||void 0===c?void 0:c.test_id)&&("single-test"===(null===c||void 0===c?void 0:c.test_type)||"mock-test"===(null===c||void 0===c?void 0:c.test_type)||"upload-test"===(null===c||void 0===c?void 0:c.test_type)||"combine-test"===(null===c||void 0===c?void 0:c.test_type))&&(null===t||void 0===t?void 0:t.map((function(e){var t,n,i,o;null!==(null===e||void 0===e?void 0:e.test_subjects)?i=(null===e||void 0===e||null===(o=e.test_subjects)||void 0===o?void 0:o.length)>0?Array.prototype.map.call(null===e||void 0===e?void 0:e.test_subjects,(function(e){return e.subject_name})).join(", "):"":i="No Subjects";var l=new Date(null===e||void 0===e?void 0:e.start_date);if(l.setMinutes(l.getMinutes()+(null===e||void 0===e?void 0:e.test_window)),!0===(null===e||void 0===e?void 0:e.assigned))return Object(b.jsxs)("tr",{className:"pl-0 flex",children:[Object(b.jsx)("td",{className:"border col-md-3",children:null===e||void 0===e?void 0:e.test_name}),Object(b.jsx)("td",{className:"border col-md-2",children:null===e||void 0===e?void 0:e.test_type}),Object(b.jsx)("td",{className:"border col-md-3",children:i}),Object(b.jsx)("td",{className:"border col-md-2",children:"mock-test"===(null===c||void 0===c?void 0:c.test_type)?e.attemptedStudents:null===e||void 0===e||null===(t=e.attemptedStudentIds)||void 0===t?void 0:t.length}),Object(b.jsx)("td",{className:"border col-md-2",children:a}),Object(b.jsx)("td",{className:"border col-md-3",children:a-("mock-test"===(null===c||void 0===c?void 0:c.test_type)?e.attemptedStudents:null===e||void 0===e||null===(n=e.attemptedStudentIds)||void 0===n?void 0:n.length)}),Object(b.jsx)("td",{className:"border col-md-2",children:null===e||void 0===e?void 0:e.test_window}),Object(b.jsx)("td",{className:"border col-md-2",children:null===e||void 0===e?void 0:e.test_duration}),Object(b.jsx)("td",{className:"border col-md-2",children:null===e||void 0===e?void 0:e.total_question}),Object(b.jsx)("td",{className:"border col-md-3",children:new Date(null===e||void 0===e?void 0:e.start_date).toLocaleString()}),Object(b.jsx)("td",{className:"border col-md-4",children:l.toLocaleString()}),Object(b.jsx)("td",{className:"border hidden_col",style:{position:"fixed",width:"190px",right:"25px",background:"white"},children:Object(b.jsx)("button",{className:"dark bg-success btn btn-block btn-sm",style:{width:"100%"},onClick:function(){s.push("/admin/school-report/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===c||void 0===c?void 0:c.class_id,"/").concat(null===c||void 0===c?void 0:c.test_type,"/student-report/").concat("upload-test"==(null===c||void 0===c?void 0:c.test_type)?null===e||void 0===e?void 0:e._id:null===e||void 0===e?void 0:e.test_id))},children:"View Results"})})]},null===e||void 0===e?void 0:e.test_id)})))]})})]})}function Lt(){var e,t=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=Object(n.useState)(3600),c=Object(j.a)(a,2),s=c[0];return c[1],Object(D.a)("reports-".concat(null===t||void 0===t?void 0:t.school_id,"-").concat(null===t||void 0===t?void 0:t.user_type),Object(u.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/school/activity-report/").concat(null===t||void 0===t?void 0:t.school_id,"/").concat(null===t||void 0===t?void 0:t.startDate,"/").concat(null===t||void 0===t?void 0:t.endDate),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}},{refetchInterval:s});case 3:return n=a.sent,a.abrupt("return",n.data.data);case 5:case"end":return a.stop()}}),a)}))),{refetchInterval:s})}().data,a=Object(l.i)(),c=null===a||void 0===a?void 0:a.report_type,s=Object(n.useState)({}),i=Object(j.a)(s,2),o=i[0];i[1];switch(c){case"login-report":e="Activity Report";break;default:e="Report List"}var d=new Date(null===a||void 0===a?void 0:a.startDate).toISOString().split("T")[0],v=new Date(null===a||void 0===a?void 0:a.endDate).toISOString().split("T")[0],m=function(e){var t=Object(l.i)(),a=Object(l.h)().pathname,c=Object(l.g)(),s=Object(X.b)(),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},o=Object(E.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/school/logout-user"),e,i)}),{onSuccess:function(){s.invalidateQueries("reports-".concat(null===t||void 0===t?void 0:t.school_id,"-").concat(null===t||void 0===t?void 0:t.user_type,"-").concat(null===t||void 0===t?void 0:t.user_id)),o("Logout successfully",{appearance:"success",autoDismiss:!0}),c.push("".concat(a))}})}();function p(){return(p=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.school_id=null===a||void 0===a?void 0:a.school_id,e.next=3,m.mutate(o);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){var t,a,n;return t=Math.floor(e/1e3/3600),a=Math.floor(e/1e3/60-60*t),n=Math.floor(e/1e3-(3600*t+60*a)),"".concat(t," hr ").concat(a," min ").concat(n," sec")}return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"col-md-12 pl-0",children:!(null===a||void 0===a?void 0:a.user_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h4",{children:[e," between ",d," to ",v,Object(b.jsxs)("button",{className:"btn btn-sm dark pull-right",onClick:function(){document.querySelector("table").outerHTML;var t="".concat(e,"_").concat(d,"_").concat(v);ae(0,"".concat(t,".csv"))},children:[Object(b.jsx)("span",{className:"bi bi-download pr-2"}),"Export Activity Report"]}),Object(b.jsxs)("button",{className:"btn btn-sm mr-2 pull-right dark bg-danger",onClick:function(){return p.apply(this,arguments)},children:[Object(b.jsx)("span",{className:"bi bi-signout"}),"Logout Previous Session"]})]}),Object(b.jsx)("hr",{})]})}),Object(b.jsx)("div",{className:"col-md-12 ".concat((null===a||void 0===a?void 0:a.report_id)?"pr-3":"pl-0 pb-3"),style:{overflow:"scroll scroll",height:"390px"},children:Object(b.jsxs)("table",{className:"table table-bordered",children:[!(null===a||void 0===a?void 0:a.user_id)&&Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:"header flex pl-0",children:[Object(b.jsx)("th",{className:"col-md-3",children:"UniqueID"}),Object(b.jsx)("th",{className:"col-md-5",children:"username"}),Object(b.jsx)("th",{className:"col-md-2",children:"User Type"}),Object(b.jsx)("th",{className:"col-md-2",children:"Status"}),Object(b.jsx)("th",{className:"col-md-2",children:"Total Session"}),Object(b.jsx)("th",{className:"col-md-3",children:"Login Time"}),Object(b.jsx)("th",{className:"col-md-3",children:"Logout Time"})]})}),!(null===a||void 0===a?void 0:a.user_id)&&"login-report"===(null===a||void 0===a?void 0:a.report_type)&&(null===t||void 0===t?void 0:t.map((function(e){var t,a,n,c,s,i,o,l,d;if(null===e||void 0===e||null===(t=e.user_log)||void 0===t?void 0:t.total_session)s=h(Math.floor(null===e||void 0===e||null===(i=e.user_log)||void 0===i?void 0:i.total_session));else if(null===e||void 0===e||null===(o=e.user_log)||void 0===o?void 0:o.logout_time){var r,u,j=new Date(null===e||void 0===e||null===(r=e.user_log)||void 0===r?void 0:r.login_time),v=new Date(null===e||void 0===e||null===(u=e.user_log)||void 0===u?void 0:u.logout_time);s=h(Math.round(v-j))}else if(e.isLoggedIn){var m,p=new Date(null===e||void 0===e||null===(m=e.user_log)||void 0===m?void 0:m.login_time),O=new Date;s=h(Math.round(O-p))}else s="0 Hr 0 Min 0 Sec";return l="student"==(null===e||void 0===e?void 0:e.user_type)?null===e||void 0===e?void 0:e.EmpId:"teacher"==(null===e||void 0===e?void 0:e.user_type)?null===e||void 0===e?void 0:e.EmpID:"",d="student"==(null===e||void 0===e?void 0:e.user_type)||"teacher"==(null===e||void 0===e?void 0:e.user_type)?null===e||void 0===e?void 0:e.username:null===e||void 0===e?void 0:e.email,Object(b.jsxs)("tr",{className:"pl-0 flex",children:[Object(b.jsxs)("td",{className:"col-md-3",children:[(null===e||void 0===e?void 0:e.isLoggedIn)?Object(b.jsx)("span",{className:"fa fa-circle text-success"}):Object(b.jsx)("span",{className:"fa fa-circle text-danger"})," ",l]}),Object(b.jsx)("td",{className:"col-md-5",children:d}),Object(b.jsx)("td",{className:"col-md-2",children:null===e||void 0===e?void 0:e.user_type}),Object(b.jsx)("td",{className:"col-md-2",children:"null"==JSON.stringify(null===e||void 0===e?void 0:e.user_log)?"Not Logged In":"Logged In"}),Object(b.jsx)("td",{className:"col-md-2",children:s}),Object(b.jsx)("td",{className:"col-md-3",children:"null"!==JSON.stringify(null===e||void 0===e?void 0:e.user_log)?new Date(null===e||void 0===e||null===(a=e.user_log)||void 0===a?void 0:a.login_time).toLocaleString():JSON.stringify(null===e||void 0===e?void 0:e.user_log)}),Object(b.jsx)("td",{className:"col-md-3",children:"null"!==JSON.stringify(null===e||void 0===e?void 0:e.user_log)?null!==(n=(new Date).toLocaleString())&&void 0!==n?n:new Date(null===e||void 0===e||null===(c=e.user_log)||void 0===c?void 0:c.logout_time).toLocaleString():JSON.stringify(null===e||void 0===e?void 0:e.user_log)})]},null===e||void 0===e?void 0:e.report_id)})))]})})]})}var Ft=a(34),It=a.n(Ft);a(65);function qt(){var e=Object(l.i)(),t=Object(E.useToasts)().addToast,a=(Object(l.g)(),null===e||void 0===e||e.page_type,null===e||void 0===e||e.school_id,null===e||void 0===e||e.class_id,Te().data),c=le().data,s=Fe().data,i=Ct().data,o=Tt(),d=o.data,v=o.isLoading,p=_t().data,h=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.test_id,a=Object(n.useContext)(S).state,c=e.test_id?"sample-".concat(e.test_id):"sample";return Object(D.a)("".concat(c),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/assign-test/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,O=[{key:"60",value:"1 Hrs"},{key:"120",value:"2 Hrs"},{key:"180",value:"3 Hrs"},{key:"240",value:"4 Hrs"},{key:"300",value:"5 Hrs"},{key:"360",value:"6 Hrs"},{key:"420",value:"7 Hrs"},{key:"480",value:"8 Hrs"},{key:"540",value:"9 Hrs"}],f=Object(n.useState)({}),x=Object(j.a)(f,2),_=x[0],g=x[1],N=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)()),i=null===c||void 0===c?void 0:c.class_id,o=null===c||void 0===c?void 0:c.school_id,d=null===c||void 0===c?void 0:c.test_type,r={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},u=Object(E.useToasts)().addToast,j="assign-tests-".concat(null===c||void 0===c?void 0:c.school_id,"-").concat(null===c||void 0===c?void 0:c.class_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/assign-test/create"),e,r)}),{onSuccess:function(){t.invalidateQueries("".concat(j)),s.push("/admin/assign-test/view/".concat(o,"/").concat(d,"/").concat(i)),u("test assigned successfully",{appearance:"success",autoDismiss:!0})}})}(),y=Object(n.useState)(new Date),k=Object(j.a)(y,2),w=k[0],C=k[1],T=Object(n.useState)(null),A=Object(j.a)(T,2),L=A[0],q=A[1];function B(){return(B=Object(u.a)(r.a.mark((function n(o){var l,d,u,j,v,m,b,h,O,f;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),l=null===e||void 0===e?void 0:e.school_id,d=null===e||void 0===e?void 0:e.class_id,l&&"undefined"!=l){n.next=7;break}t("please select school",{appearance:"error",autoDismiss:!0}),n.next=62;break;case 7:if(d&&"undefined"!=d||"mock-test"===(null===e||void 0===e?void 0:e.test_type)){n.next=11;break}t("please select class",{appearance:"error",autoDismiss:!0}),n.next=62;break;case 11:if(L){n.next=15;break}t("please select test window",{appearance:"error",autoDismiss:!0}),n.next=62;break;case 15:if(_.test_id){n.next=19;break}t("please select tests",{appearance:"error",autoDismiss:!0}),n.next=62;break;case 19:if(u=K(c,"_id",l,"school_name"),_.school_name=u,_.school_id=l,"mock-test"!==(null===e||void 0===e?void 0:e.test_type)){n.next=39;break}if(j=Z(p,"_id",_.test_id),!(+L<+(null===j||void 0===j?void 0:j.test_duration))){n.next=29;break}v="test window: ".concat(L," Min should geater than selected \n test duration: ").concat(null===j||void 0===j?void 0:j.test_duration," Min"),t(v,{appearance:"error",autoDismiss:!0,autoDismissTimeout:5e3}),n.next=37;break;case 29:return _.test_name=null===j||void 0===j?void 0:j.test_name,_.test_window=L,_.test_type=null===j||void 0===j?void 0:j.test_type,_.test_duration=null===j||void 0===j?void 0:j.test_duration,_.start_date=w,_.attemptedStudentIds=[],n.next=37,N.mutate(_,{onError:function(e){var a=e.response.data.data.test_name,n=new Date(e.response.data.data.start_date),c=e.response.data.data.test_window;if(n=n.setMinutes(n.getMinutes()+c),405==e.response.status){var s="This test cant be assigned at this time. Because \n Test Name: ".concat(a," \n is scheduled at start Time: ").concat(new Date(e.response.data.data.start_date).toLocaleString()," \n End Time: ").concat(new Date(n).toLocaleString());t(s,{appearance:"error",autoDismiss:!0,autoDismissTimeout:5e3})}}});case 37:n.next=62;break;case 39:if(m=K(a,"_id",d,"class_name"),b=K(i,"_id",_.test_id,"test_name"),h=Z(i,"_id",_.test_id),O=Z(s,"subject_name",null===h||void 0===h?void 0:h.subject_name),!(+L<+(null===h||void 0===h?void 0:h.test_duration))){n.next=48;break}f="test window: ".concat(L," Min should geater than selected \n test duration: ").concat(null===h||void 0===h?void 0:h.test_duration," Min"),t(f,{appearance:"error",autoDismiss:!0,autoDismissTimeout:5e3}),n.next=62;break;case 48:return _.class_id=d,_.class_name=m,_.test_name=b,_.test_window=L,_.test_type=null===h||void 0===h?void 0:h.test_type,_.test_subjects=null===h||void 0===h?void 0:h.test_subjects,_.subject_id=null===O||void 0===O?void 0:O._id,_.subject_name=null===h||void 0===h?void 0:h.subject_name,_.test_duration=null===h||void 0===h?void 0:h.test_duration,_.total_question=null===h||void 0===h?void 0:h.total_question,_.total_marks=null===h||void 0===h?void 0:h.total_marks,_.start_date=w,n.next=62,N.mutate(_,{onError:function(e){var a=e.response.data.data.test_name,n=new Date(e.response.data.data.start_date),c=e.response.data.data.test_window;if(n=n.setMinutes(n.getMinutes()+c),405==e.response.status){var s="This test cant be assigned at this time. Because \n Test Name: ".concat(a," \n is scheduled @ \n\n start Time: ").concat(new Date(e.response.data.data.start_date).toLocaleString()," and End Time: ").concat(new Date(n).toLocaleString());t(s,{appearance:"error",autoDismiss:!0,autoDismissTimeout:5e3})}}});case 62:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Assign New Test"]}),Object(b.jsx)("hr",{}),("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type))&&Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{className:"row col-md-12 mb-2",children:[Object(b.jsx)("div",{className:"col-md-2 pl-0",children:Object(b.jsx)(It.a,{selected:w,value:new Date(null===h||void 0===h?void 0:h.start_date),onChange:function(e){return C(e)},isClearable:!0,showTimeSelect:!0,dateFormat:"MM/d/yyyy h:mm aa",minDate:new Date})}),Object(b.jsx)("div",{className:"col-md-2 pl-0",children:Object(b.jsxs)("select",{value:null!==L&&void 0!==L?L:Math.round((null===h||void 0===h?void 0:h.test_window)/60),onChange:function(e){return q(e.target.value)},children:[Object(b.jsx)("option",{children:"Select Time Window"}),null===O||void 0===O?void 0:O.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.value})}))]})})]}),Object(b.jsx)("div",{className:"col-md-12 pl-0 mt-3",style:{overflowX:"scroll",width:"1200px"},children:Object(b.jsxs)("table",{className:"table table-responsive table-borded",style:{width:"1200px"},children:["mock-test"===(null===e||void 0===e?void 0:e.test_type)?Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Test Name"}),Object(b.jsx)("th",{children:"Duration"}),Object(b.jsx)("th",{children:"Window"}),Object(b.jsx)("th",{children:"Test Type"}),Object(b.jsx)("th",{children:"Published"})]}):Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Test Name"}),Object(b.jsx)("th",{children:"Duration"}),Object(b.jsx)("th",{children:"Marks"}),Object(b.jsx)("th",{children:"Question"}),Object(b.jsx)("th",{children:"Test Type"}),Object(b.jsx)("th",{children:"Test Subjects"}),Object(b.jsx)("th",{children:"Assigned"})]}),Object(b.jsxs)("tbody",{className:"pt-2 pr-0 no-gutter",style:{height:"auto",maxHeight:"300px",overflowY:"scroll",overflowX:"hidden"},children:[("single-test"===(null===e||void 0===e?void 0:e.test_type)||"combine-test"===(null===e||void 0===e?void 0:e.test_type))&&(null===i||void 0===i?void 0:i.map((function(t,a){var n=function(t){if(!v&&"undefined"!==d)return null===d||void 0===d?void 0:d.some((function(a){return(null===a||void 0===a?void 0:a.test_id)==t&&(null===a||void 0===a?void 0:a.school_id)===(null===e||void 0===e?void 0:e.school_id)}))}(null===t||void 0===t?void 0:t._id),c="";if(c="combine-test"===(null===t||void 0===t?void 0:t.test_type)?Array.prototype.map.call(null===t||void 0===t?void 0:t.test_subjects,(function(e){return e.subject_name})).join(","):null===t||void 0===t?void 0:t.subject_name,!n)return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"radio",name:"test",value:null===t||void 0===t?void 0:t._id,"data-testName":null===t||void 0===t?void 0:t.test_name,onChange:function(e){return g(Object(m.a)(Object(m.a)({},_),{},{test_id:e.target.value}))},className:"mr-2"}),null===t||void 0===t?void 0:t.test_name]})})}),Object(b.jsx)("td",{children:Object(b.jsxs)("b",{children:[null===t||void 0===t?void 0:t.test_duration," Min"]})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:null===t||void 0===t?void 0:t.total_marks})}),Object(b.jsx)("td",{children:Object(b.jsxs)("b",{children:[null===t||void 0===t?void 0:t.total_question," Ques"]})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:"combine-test"===(null===t||void 0===t?void 0:t.test_type)?"combine-test":"single-test"})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:c})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:null===n||void 0===n?void 0:n.toString()})})]},null===t||void 0===t?void 0:t._id)}))),"mock-test"===(null===e||void 0===e?void 0:e.test_type)&&(null===p||void 0===p?void 0:p.map((function(e){var t,a;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",Object(W.a)({className:"mr-2",type:"radio",name:"test",value:null===e||void 0===e?void 0:e._id,onChange:function(e){return g(Object(m.a)(Object(m.a)({},_),{},{test_id:e.target.value}))}},"className","mr-2")),null===e||void 0===e?void 0:e.test_name]})}),Object(b.jsx)("td",{children:Object(b.jsxs)("b",{children:[null===e||void 0===e?void 0:e.test_duration," Min"]})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:null===e||void 0===e?void 0:e.test_type})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.toString()})}),Object(b.jsx)("td",{children:Object(b.jsx)("b",{children:null===(a=new Date(null===e||void 0===e?void 0:e.create_at))||void 0===a?void 0:a.toLocaleString()})})]},null===e||void 0===e?void 0:e._id)})))]})]})}),Object(b.jsxs)("div",{className:"form-group mt-2",children:[Object(b.jsx)("hr",{className:"mb-2 mt-1"}),Object(b.jsx)("button",{className:"btn btn-sm dark",disabled:null===N||void 0===N?void 0:N.isLoading,onClick:function(e){return B.apply(this,arguments)},children:(null===N||void 0===N?void 0:N.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-spinner mr-2"}),"Processing..."]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-save mr-2"}),"Save Assign Test"]})})]})]})]})}function Bt(e){e.update,e.Delete;var t=Object(l.g)(),a=(Object(n.useContext)(S).state,Object(l.i)()),c=Tt(),s=c.data,i=c.isLoading,o=function(){var e=Object(n.useContext)(S).state,t=Object(l.i)(),a=null===t||void 0===t?void 0:t.school_id,c=Object(n.useState)(1e3),s=Object(j.a)(c,2),i=s[0],o=(s[1],""),d="",v=localStorage.getItem("mock_test_for");return e.access_token&&a&&(null===t||void 0===t?void 0:t.test_type)&&(d="".concat(I,"v1/assign-test/view-assigned-mock-test/").concat(a,"/").concat(null===t||void 0===t?void 0:t.test_type,"/").concat(v),o="assign-tests-".concat(a,"-").concat(null===t||void 0===t?void 0:t.test_type)),Object(D.a)("".concat(o),Object(u.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get(d,{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}},{refetchInterval:i});case 2:return a=t.sent,t.abrupt("return",a.data.data);case 4:case"end":return t.stop()}}),t)}))))}().data,d=Object(n.useState)({}),v=Object(j.a)(d,2),m=v[0],p=(v[1],function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=Object(l.h)().pathname,i=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},d=Object(E.useToasts)().addToast,r="assign-tests-".concat(null===c||void 0===c?void 0:c.school_id,"-").concat(null===c||void 0===c?void 0:c.class_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/assign-test/to-class"),e,o)}),{onSuccess:function(){t.invalidateQueries("".concat(r)),i.push("".concat(s)),d("Assigned to Class successfully",{appearance:"success",autoDismiss:!0})}})}()),h=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=Object(l.h)().pathname,i=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},d=Object(E.useToasts)().addToast,r="assign-tests-".concat(null===c||void 0===c?void 0:c.school_id,"-").concat(null===c||void 0===c?void 0:c.class_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/assign-test/update"),e,o)}),{onSuccess:function(){t.invalidateQueries("".concat(r)),i.push("".concat(s)),d("test updated successfully",{appearance:"success",autoDismiss:!0})}})}(),O=Object(n.useState)(new Date),f=Object(j.a)(O,2),x=f[0],_=f[1],g=function(e){var t,a=Object(l.h)().pathname,c=Object(l.i)(),s=Object(l.g)(),i=Object(X.b)(),o=Object(n.useContext)(S).state,d=null===c||void 0===c?void 0:c.class_id,r=null===c||void 0===c?void 0:c.school_id,u={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+o.access_token}},j=Object(E.useToasts)().addToast;return o.access_token&&r&&"mock-test"!==(null===c||void 0===c?void 0:c.test_type)&&d?t="assign-tests-".concat(r,"-").concat(null===c||void 0===c?void 0:c.test_type,"-").concat(d):o.access_token&&r&&"mock-test"===(null===c||void 0===c?void 0:c.test_type)&&(t="assign-tests-".concat(r,"-").concat(null===c||void 0===c?void 0:c.test_type)),Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/mock-test/delete-all-test"),e,u)}),{onSuccess:function(){i.invalidateQueries("".concat(t)),s.push(a),j("Schools deleted successfully",{appearance:"success",autoDismiss:!0})}})}();function N(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("wrong-password"!==prompt("do you want to delte this mock test! please enter the password to delete the resource?")){e.next=7;break}return n=null===a||void 0===a?void 0:a.school_id,e.next=5,g.mutate({school_id:n,test_id:t});case 5:e.next=8;break;case 7:alert("your have entered a wrong password.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m._id=t,m.test_type=null===a||void 0===a?void 0:a.test_type,m.school_id=null===a||void 0===a?void 0:a.school_id,"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&(m.class_id=null===a||void 0===a?void 0:a.class_id),e.next=6,p.mutate(m,{onError:function(e){if(405==e.response.status){addToast("Cannot assigned test, BCoz already one test is Assigned",{appearance:"error",autoDismiss:!0})}}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=[{key:"1",value:"1 Hrs"},{key:"2",value:"2 Hrs"},{key:"3",value:"3 Hrs"},{key:"4",value:"4 Hrs"},{key:"5",value:"5 Hrs"},{key:"6",value:"6 Hrs"},{key:"7",value:"7 Hrs"},{key:"8",value:"8 Hrs"}],T=Te().data;function A(e){var t=T&&T.filter((function(t){return t._id===e}));if(console.log(typeof t),"object"===typeof t)return t[0].class_name}var L=Object(n.useState)(null),q=Object(j.a)(L,2),M=q[0],z=q[1];function U(){return(U=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.test_id=null===a||void 0===a?void 0:a.test_id,m.school_id=null===a||void 0===a?void 0:a.school_id,m.start_date=x,m.test_window=60*M,e.next=6,h.mutate(m);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"All Assigned Test"]}),Object(b.jsx)("hr",{className:"mt-1"}),"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&(null===a||void 0===a?void 0:a.class_id)&&Object(b.jsx)(B,{isLoading:i}),(null===a||void 0===a?void 0:a.test_id)&&Object(b.jsx)("div",{className:"col-md-6 pl-0 pb-2",children:Object(b.jsxs)("form",{className:"flex",children:[Object(b.jsx)(It.a,{selected:x,onChange:function(e){return _(e)},isClearable:!0,showTimeSelect:!0,dateFormat:"MM/d/yyyy h:mm aa",minDate:new Date}),Object(b.jsxs)("select",{value:M,onChange:function(e){return z(e.target.value)},children:[Object(b.jsx)("option",{children:"Select Time Window"}),null===C||void 0===C?void 0:C.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.value})}))]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("button",{className:"dark bg-success",onClick:function(){return U.apply(this,arguments)},children:[Object(b.jsx)("span",{className:"fa fa-save pr-2"}),"Update Test"]}),Object(b.jsxs)("button",{className:"ml-1 dark bg-danger",onClick:function(){t.push("/admin/assign-test/view/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id))},children:[Object(b.jsx)("span",{className:"fa fa-times pr-2"}),"Cancel"]})]})]})}),Object(b.jsx)("div",{className:"table-responsive pl-0",style:{overflow:"scroll hidden"},children:Object(b.jsxs)("table",{className:"table  table-responsive",style:{width:"".concat("60d5a55aa116be10bc936137"===(null===a||void 0===a?void 0:a.school_id)&&"mock-test"===(null===a||void 0===a?void 0:a.test_type)?"1280px":"2060px")},children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:["60d5a55aa116be10bc936137"===(null===a||void 0===a?void 0:a.school_id)&&Object(b.jsx)("td",{children:"Delete"}),Object(b.jsx)("td",{children:"Update"}),Object(b.jsx)("td",{children:"Assign"}),Object(b.jsx)("td",{children:"School Name"}),Object(b.jsx)("td",{children:"Test Name"}),Object(b.jsx)("td",{children:"Test Duration/Window"}),Object(b.jsx)("td",{children:"Test marks"}),"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&Object(b.jsx)("td",{children:"Subject Name"}),"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&Object(b.jsx)("td",{children:"Class Name"}),!(null===a||void 0===a?void 0:a.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("td",{children:"Start Test"}),Object(b.jsx)("td",{children:"End Test"})]})]})}),Object(b.jsxs)("tbody",{style:{minHeight:"100px !important",height:"auto",maxHeight:"350px",overflowY:"scroll",overflowX:"hidden"},children:[("single-test"===(null===a||void 0===a?void 0:a.test_type)||"combine-test"===(null===a||void 0===a?void 0:a.test_type)||"upload-test"===(null===a||void 0===a?void 0:a.test_type))&&(null===s||void 0===s?void 0:s.map((function(e){var n="";n="combine-test"===(null===e||void 0===e?void 0:e.test_type)?Array.prototype.map.call(null===e||void 0===e?void 0:e.test_subjects,(function(e){return e.subject_name})).join(","):null===e||void 0===e?void 0:e.subject_name;var c=new Date(null===e||void 0===e?void 0:e.start_date);return c.setMinutes(c.getMinutes()+(null===e||void 0===e?void 0:e.test_window)),Object(b.jsxs)("tr",{className:"".concat((null===a||void 0===a?void 0:a.test_id)==(null===e||void 0===e?void 0:e.test_id)?"light":""),children:["60d5a55aa116be10bc936137"===(null===a||void 0===a?void 0:a.school_id)&&Object(b.jsxs)("td",{children:[" ",Object(b.jsx)("button",{className:"btn btn-sm",onClick:function(){N(null===e||void 0===e?void 0:e.test_id)},children:Object(b.jsx)("span",{className:"fa fa-trash text-danger",style:{fontSize:"1.5rem"}})})]}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)("button",{className:"btn btn-sm",disabled:null===e||void 0===e?void 0:e.assigned,onClick:function(){t.push("/admin/assign-test/view/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(null===a||void 0===a?void 0:a.test_type,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===e||void 0===e?void 0:e.test_id))},children:Object(b.jsx)("span",{className:"fa fa-edit text-success",style:{fontSize:"1.5rem"}})})]}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-sm",disabled:null===e||void 0===e?void 0:e.assigned,onClick:function(){return k(null===e||void 0===e?void 0:e._id)},children:!0===(null===e||void 0===e?void 0:e.assigned)?Object(b.jsx)("span",{className:"fa fa-check-circle text-success",style:{fontSize:"1.5rem"}}):Object(b.jsx)("span",{className:"fa fa-times-circle text-danger",style:{fontSize:"1.5rem"}})})}),Object(b.jsx)("td",{children:null===e||void 0===e?void 0:e.school_name}),Object(b.jsxs)("td",{children:[null===e||void 0===e?void 0:e.test_name," (",null===e||void 0===e?void 0:e.total_question," Qes)"]}),Object(b.jsxs)("td",{children:[null===e||void 0===e?void 0:e.test_duration," Min / ",null===e||void 0===e?void 0:e.test_window," Min"]}),Object(b.jsx)("td",{children:null===e||void 0===e?void 0:e.total_marks}),"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&Object(b.jsx)("td",{children:n}),"mock-test"!==(null===a||void 0===a?void 0:a.test_type)&&Object(b.jsxs)("td",{children:[A(null===e||void 0===e?void 0:e.class_id)," th "]}),!(null===a||void 0===a?void 0:a.test_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.start_date).toLocaleString()}),Object(b.jsx)("td",{children:c.toLocaleString()})]})]})}))),"mock-test"===(null===a||void 0===a?void 0:a.test_type)&&(null===o||void 0===o?void 0:o.map((function(e){var n=new Date(null===e||void 0===e?void 0:e.start_date);return n.setMinutes(n.getMinutes()+(null===e||void 0===e?void 0:e.test_window)),Object(b.jsxs)("tr",{className:"".concat((null===a||void 0===a?void 0:a.test_id)==(null===e||void 0===e?void 0:e.test_id)?"light":""),children:["60d5a55aa116be10bc936137"===(null===a||void 0===a?void 0:a.school_id)&&Object(b.jsxs)("td",{children:[" ",Object(b.jsx)("button",{className:"btn btn-sm",onClick:function(){N(null===e||void 0===e?void 0:e.test_id)},children:Object(b.jsx)("span",{className:"fa fa-trash text-danger",style:{fontSize:"1.5rem"}})})]}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)("button",{className:"btn btn-sm",disabled:!0===(null===e||void 0===e?void 0:e.assigned),onClick:function(){t.push("/admin/assign-test/view/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(null===a||void 0===a?void 0:a.test_type,"/all-class/").concat(null===e||void 0===e?void 0:e.test_id))},children:Object(b.jsx)("span",{className:"fa fa-edit text-success",style:{fontSize:"1.5rem"}})})]}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-sm",disabled:null===e||void 0===e?void 0:e.assigned,onClick:function(){return k(null===e||void 0===e?void 0:e._id)},children:!0===(null===e||void 0===e?void 0:e.assigned)?Object(b.jsx)("span",{className:"fa fa-check-circle text-success",style:{fontSize:"1.5rem"}}):Object(b.jsx)("span",{className:"fa fa-times-circle text-danger",style:{fontSize:"1.5rem"}})})}),Object(b.jsx)("td",{children:null===e||void 0===e?void 0:e.school_name}),Object(b.jsxs)("td",{children:[null===e||void 0===e?void 0:e.test_name,"  (",null===e||void 0===e?void 0:e.total_question," Qes)"]}),Object(b.jsxs)("td",{children:[null===e||void 0===e?void 0:e.test_duration," Min / ",null===e||void 0===e?void 0:e.test_window," Min"]}),Object(b.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.start_date).toLocaleString()}),Object(b.jsx)("td",{children:n.toLocaleString()})]})})))]})]})})]})}function Mt(){var e=Object(l.i)(),t=Object(l.g)(),a=Te().data,c=lt().data,s=ct(),i=s.data,o=s.isLoading,d=Object(E.useToasts)().addToast,v=function(){var e=Object(l.i)(),t=null===e||void 0===e?void 0:e.subject_chapter_id,a=Object(n.useContext)(S).state,c=e.subject_chapter_id?"subject-chapter-mapping-".concat(e.subject_chapter_id):"subject-chapter-mapping";return Object(D.a)("".concat(c),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/chapter/view/").concat(t),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,p=Object(n.useState)(1),h=Object(j.a)(p,2),O=h[0],f=h[1],x=Object(n.useState)(!1),_=Object(j.a)(x,2),g=(_[0],_[1]),N=Object(n.useState)({}),y=Object(j.a)(N,2),k=y[0],w=y[1],C=Object(n.useState)(!0),T=Object(j.a)(C,2),A=T[0],L=T[1],q=Object(n.useState)(null),B=Object(j.a)(q,2),M=B[0],z=B[1],U=new FormData,Q=Object(n.useState)({chapter_no:"",chapter_name:""}),P=Object(j.a)(Q,2),H=P[0],R=P[1];Object(n.useEffect)((function(){w(v)}),[v]);var V=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=Object(l.h)().pathname,i=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}},d=Object(E.useToasts)().addToast,r="";return r=(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)&&(null===c||void 0===c?void 0:c.unit_id)?"subject-chapter-mappings-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id,"-").concat(null===c||void 0===c?void 0:c.unit_id):(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)?"subject-chapter-mappings-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id):"subject-chapter-mappings",Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/chapter/create"),e,o)}),{onSuccess:function(){t.invalidateQueries("".concat(r)),i.push("".concat(s)),d("Chapter added successfully",{appearance:"success",autoDismiss:!0})}})}(),G=function(e){var t=Object(X.b)(),a=Object(n.useContext)(S).state,c=Object(l.i)(),s=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}}),i=Object(E.useToasts)().addToast,o="";return o=(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)&&(null===c||void 0===c?void 0:c.unit_id)?"subject-chapter-mappings-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id,"-").concat(null===c||void 0===c?void 0:c.unit_id):(null===c||void 0===c?void 0:c.class_id)&&(null===c||void 0===c?void 0:c.subject_id)?"subject-chapter-mappings-".concat(null===c||void 0===c?void 0:c.class_id,"-").concat(null===c||void 0===c?void 0:c.subject_id):"subject-chapter-mappings",Object(Y.a)((function(e){var t=null===c||void 0===c?void 0:c.subject_chapter_id;return F.a.patch("".concat(I,"v1/chapter/update/").concat(t),e,s)}),{onSuccess:function(){t.invalidateQueries("".concat(o)),i("Chapter Updated successfully",{appearance:"success",autoDismiss:!0})}})}(),Z=function(){var e=Object(X.b)(),t=Object(n.useContext)(S).state,a=Object(l.i)(),c=(Object(l.h)().pathname,Object(l.g)(),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}}),s=Object(E.useToasts)().addToast,i="subject-chapter-mappings-".concat(null===a||void 0===a?void 0:a.class_id,"-").concat(null===a||void 0===a?void 0:a.subject_id);return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/chapter/upload"),e,c)}),{onSuccess:function(){e.invalidateQueries("".concat(i)),s("Chapters Uploaded successfully",{appearance:"success",autoDismiss:!0})}})}();function $(e){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===e||void 0===e?void 0:e.subject_chapter_id)?w(Object(m.a)(Object(m.a)({},k),{},Object(W.a)({},a.target.name,a.target.value))):R(Object(m.a)(Object(m.a)({},H),{},Object(W.a)({},a.target.name,a.target.value)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ae=function(e){var t,a=e.target.options[e.target.selectedIndex].dataset.class_name,n=e.target.options[e.target.selectedIndex].dataset.subject_name,c=e.target.options[e.target.selectedIndex].dataset.unit_name,s=e.target.options[e.target.selectedIndex].dataset.unit_no;if(void 0!=a)R(Object(m.a)(Object(m.a)({},H),{},(t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"class_name",a),t)));else if(void 0!=n){var i;R(Object(m.a)(Object(m.a)({},H),{},(i={},Object(W.a)(i,e.target.name,e.target.value),Object(W.a)(i,"subject_name",n),i)))}else{var o;R(Object(m.a)(Object(m.a)({},H),{},(o={},Object(W.a)(o,e.target.name,e.target.value),Object(W.a)(o,"unit_name",c),Object(W.a)(o,"unit_no",s),o)))}},ne=function(){var t=Object(u.a)(r.a.mark((function t(a){var n,s,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=[],g(!0),!(null===e||void 0===e?void 0:e.subject_chapter_id)){t.next=11;break}return s=document.getElementById("unit").value,i=K(c,"_id",s,"unit_no"),n.push({subject_chapter_id:null===e||void 0===e?void 0:e.subject_chapter_id,class_id:null===e||void 0===e?void 0:e.class_id,class_name:null===e||void 0===e?void 0:e.class_slug,subject_id:null===e||void 0===e?void 0:e.subject_id,subject_name:null===e||void 0===e?void 0:e.subject_slug,unit_id:null===e||void 0===e?void 0:e.unit_id,unit_no:i,unit_name:null===e||void 0===e?void 0:e.unit_slug,chapter_no:k.chapter_no,chapter_name:k.chapter_name}),t.next=9,G.mutate(n);case 9:t.next=14;break;case 11:for(o=0;o<O;o++)n.push({class_id:null===e||void 0===e?void 0:e.class_id,class_name:e.class_slug,subject_id:null===e||void 0===e?void 0:e.subject_id,subject_name:e.subject_slug,unit_no:null===H||void 0===H?void 0:H.unit_no,unit_id:null===e||void 0===e?void 0:e.unit_id,unit_name:e.unit_slug,chapter_no:H["chapter_no".concat(o)],chapter_name:H["chapter_name".concat(o)]});return t.next=14,V.mutate(n);case 14:g(!1),ce();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function ce(){Array.from(document.querySelectorAll(".addedItems")).map((function(e){e.value=""})),f(1)}function se(){return(se=Object(u.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0].name,console.log("file onchange ",a),n=a.split(".")[1],console.log(n),"csv"===n?(L(!1),z(t.target.files[0]),U.append("file",t.target.files[0])):(L(!0),d("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(u.a)(r.a.mark((function t(a){var n,c,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=null===e||void 0===e?void 0:e.class_id,c=e.class_slug,s=null===e||void 0===e?void 0:e.subject_id,i=e.subject_slug,U.append("file",M),U.append("class_id",n),U.append("class_name",c),U.append("subject_id",s),U.append("subject_name",i),t.next=12,Z.mutate(U);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:ne,children:[Object(b.jsxs)("p",{className:"form-heading",children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add Multiple Chapters"]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",value:null===e||void 0===e?void 0:e.class_id,onChange:function(a){if(ae(a),"_"===a.target.value)t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type));else{var n=a.target.options[a.target.selectedIndex].dataset.class_name;t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(a.target.value,"/").concat(J(n)))}},children:[Object(b.jsx)("option",{value:"_",children:"Select Classes"}),null===a||void 0===a?void 0:a.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,"data-class_name":null===e||void 0===e?void 0:e.class_name,children:[null===e||void 0===e?void 0:e.class_name," th "]},null===e||void 0===e?void 0:e._id)}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",value:null===e||void 0===e?void 0:e.subject_id,onChange:function(a){if(ae(a),"_"===a.target.value)t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id));else{var n=a.target.options[a.target.selectedIndex].dataset.subject_name;t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(a.target.value,"/").concat(J(n)))}},children:[Object(b.jsx)("option",{value:"_",children:o?"loading ...":"Select Subjects"}),null===i||void 0===i?void 0:i.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.subject_id,"data-subject_name":null===e||void 0===e?void 0:e.subject_name,children:null===e||void 0===e?void 0:e.subject_name},null===e||void 0===e?void 0:e.subject_id)}))]})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control",id:"unit",value:null===e||void 0===e?void 0:e.unit_id,onChange:function(a){if(ae(a),"_"===a.target.value)t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug));else{var n=a.target.options[a.target.selectedIndex].dataset.unit_name;(null===e||void 0===e?void 0:e.subject_chapter_id)?t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug,"/").concat(a.target.value,"/").concat(J(n),"/").concat(null===e||void 0===e?void 0:e.subject_chapter_id)):t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug,"/").concat(a.target.value,"/").concat(J(n)))}},children:[Object(b.jsx)("option",{value:"_",children:o?"loading ...":"Select Unit"}),null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,"data-unit_name":null===e||void 0===e?void 0:e.unit_name,"data-unit_no":null===e||void 0===e?void 0:e.unit_no,children:[ee(null===e||void 0===e?void 0:e.unit_no),"-",null===e||void 0===e?void 0:e.unit_name]},null===e||void 0===e?void 0:e._id)}))]})}),"upload"!==(null===e||void 0===e?void 0:e.page_type)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){e.preventDefault(),f(O+1)},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Add New Chapter"]})}),Object(Ee.a)(Array(O)).map((function(t,a){return Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"form-group col-md-2 pl-0 pr-0",children:Object(b.jsx)("input",{type:"text",className:"form-control addedItems",name:(null===e||void 0===e?void 0:e.subject_chapter_id)?"chapter_no":"chapter_no".concat(a),value:(null===e||void 0===e?void 0:e.subject_chapter_id)&&k&&k.chapter_no,onChange:$,placeholder:"No"})}),Object(b.jsx)("div",{className:"form-group col-md-10 pr-0 pl-1",children:Object(b.jsx)("input",{type:"text",className:"form-control addedItems",name:(null===e||void 0===e?void 0:e.subject_chapter_id)?"chapter_name":"chapter_name".concat(a),value:(null===e||void 0===e?void 0:e.subject_chapter_id)&&k&&k.chapter_name,onChange:$,placeholder:"Chapter Name"})}),Object(b.jsx)("hr",{})]},a)}))]}):Object(b.jsxs)("div",{className:"col-md-12 pl-0 pr-0",children:[Object(b.jsx)("label",{children:"Upload Files"}),Object(b.jsx)("a",{href:"/sampledata/chapters.csv",className:"pull-right",download:!0,children:"Download Sample"}),Object(b.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return se.apply(this,arguments)},placeholder:"Upload .csv"}),Object(b.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(b.jsxs)("div",{className:"form-group flex",children:["upload"!==(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("button",{className:"btn btn-sm dark",children:(null===V||void 0===V?void 0:V.isLoading)||(null===G||void 0===G?void 0:G.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===e||void 0===e?void 0:e.subject_chapter_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Mapping"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Save Mapping"]})})}),"upload"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("button",{className:"btn btn-sm dark",type:"button",disabled:A,onClick:function(e){return ie.apply(this,arguments)},children:(null===Z||void 0===Z?void 0:Z.isLoading)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(b.jsx)(b.Fragment,{children:(null===e||void 0===e?void 0:e.unit_id)?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"fa fa-save mr-2"})," Update Unit"]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"bi bi-upload mr-2"})," Upload Unit"]})})}),Object(b.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2",onClick:function(a){a.preventDefault(),ce(),document.getElementById("unit").selectedIndex="0",null===e||void 0===e||e.subject_chapter_id,t.push("/admin/mapping-subject-chapters/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug))},children:Object(b.jsx)("span",{className:"fa fa-times"})})]})]})})}function Et(e){var t=e.update,a=e.Delete,c=Object(l.g)(),s=(Object(n.useContext)(S).state,Object(l.i)()),i=dt(),o=i.data,d=i.isLoading,j=function(e){var t=Object(l.i)(),a=(Object(l.h)().pathname,Object(l.g)(),Object(X.b)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(n.useContext)(S).state.access_token}},s=Object(E.useToasts)().addToast,i="";return i=(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)&&(null===t||void 0===t?void 0:t.unit_id)?"subject-chapter-mappings-".concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id,"-").concat(null===t||void 0===t?void 0:t.unit_id):(null===t||void 0===t?void 0:t.class_id)&&(null===t||void 0===t?void 0:t.subject_id)?"subject-chapter-mappings-".concat(null===t||void 0===t?void 0:t.class_id,"-").concat(null===t||void 0===t?void 0:t.subject_id):"subject-chapter-mappings",Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/chapter/delete/").concat(e),c)}),{onSuccesss:function(){a.invalidateQueries("".concat(i)),s("Chapter Deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),v=function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.mutate(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"All Chapters"]}),Object(b.jsx)("hr",{className:"mt-1 mb-1"}),(null===s||void 0===s?void 0:s.unit_id)&&(null===s||void 0===s?void 0:s.unit_slug)&&Object(b.jsxs)("div",{className:"row pl-0 pr-0",children:[Object(b.jsxs)("div",{className:"col-md-6",children:[Object(b.jsx)("b",{className:"mr-0",children:"Unit ID: "}),null===s||void 0===s?void 0:s.unit_id]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{className:"mr-2",children:"Unit Name: "}),null===s||void 0===s?void 0:s.unit_slug]})]}),Object(b.jsx)("hr",{className:"mt-1"}),Object(b.jsx)(B,{isLoading:d}),Object(b.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(b.jsxs)("table",{className:"table table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Unit No / Name"}),Object(b.jsx)("th",{scope:"col",children:"Chapter No / Name"}),Object(b.jsx)("th",{scope:"col",children:"Class"}),Object(b.jsx)("th",{scope:"col",children:"Subject"}),Object(b.jsx)("th",{scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:o&&(null===o||void 0===o?void 0:o.map((function(e,n){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{style:{width:"200px"},children:[ee(null===e||void 0===e?void 0:e.unit_no),"-",e.unit_name]}),Object(b.jsxs)("td",{style:{width:"300px"},children:[e.chapter_no,"-",e.chapter_name]}),Object(b.jsx)("td",{children:e.class_name}),Object(b.jsx)("td",{children:e.subject_name}),Object(b.jsxs)("td",{children:[!0===t&&Object(b.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){c.push("/admin/mapping-subject-chapters/update/".concat(e.class_id,"/").concat(J(e.class_name),"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(J(null===e||void 0===e?void 0:e.subject_name),"/").concat(null===e||void 0===e?void 0:e.unit_id,"/").concat(null===e||void 0===e?void 0:e.unit_name,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(b.jsx)("span",{className:"fa fa-edit"})}),!0===a&&Object(b.jsx)("button",{className:"btn bg-danger text-white block btn-sm",onClick:function(){return v(null===e||void 0===e?void 0:e._id)},children:(null===j||void 0===j?void 0:j.isLoading)?Object(b.jsx)("span",{className:"fa fa-spinner"}):Object(b.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)})))})]})})]})}var zt=[{path:"/",component:H},{path:"/admin/login",component:H},{path:"/403",component:function(){var e=Object(n.useContext)(S).state;return Object(b.jsx)(b.Fragment,{children:e.isLoggedIn&&Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container pt-5 text-center",children:[Object(b.jsx)("img",{src:"/noentry.jpg",alt:"Not authorized"}),Object(b.jsx)("p",{children:"You are not authorized to access this resource"}),Object(b.jsxs)(o.b,{to:"/admin/dashboard",children:[Object(b.jsx)("span",{className:"fa fa-home"}),Object(b.jsx)("span",{className:"ml-3",children:"Go to Dashboard"})]})]})})})})}}],Ut=[{path:"/:user_type?/dashboard",component:R},{path:"/admin",component:R},{path:"/admin/class-management/:page_type?/:class_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=(Object(l.h)(),ue());Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/class-management")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Class List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/class-management/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Class"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/admin/class-management/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload Classes"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-3",children:[!0===i&&"upload"===e.page_type&&Object(b.jsx)(Se,{}),(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(Ce,{})]}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-9":"col-md-12"),children:Object(b.jsx)(Ae,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/students-management/:page_type?/:school_id?/:class_id?/:section?/:student_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete"),d=ve("view");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/students-management")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Student List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){t.push("/admin/students-management/create/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.section))},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create students"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/admin/students-management/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload students"]}),d&&Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(a){t.push("/admin/students-management/view/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.section))},children:[Object(b.jsx)("span",{className:"fa fa-eye mr-2"}),"View Students"]}),e.class_id&&(null===e||void 0===e?void 0:e.section)?Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(){document.querySelector("table").outerHTML;ae(0,"table.csv")},children:[Object(b.jsx)("span",{className:"fa fa-download mr-2"}),"Export to CSV"]}):""]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-3",children:[!0===i&&"upload"===e.page_type&&Object(b.jsx)(Me,{}),(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(Be,{})]}),"view"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"".concat((null===e||void 0===e||e.page_type,"col-md-12")),children:Object(b.jsx)(ze,{update:s,Delete:o})})})]})})]})})})}},{path:"/admin/subject-management/:page_type?/:subject_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/subject-management")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Subjects List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/subject-management/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Subjects"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(a){void 0==e.page_type||"create"==e.page_type?t.push("/admin/subject-management/upload"):"upload"==e.page_type&&t.push("/admin/subject-management")},children:[Object(b.jsx)("span",{className:"fa fa-upload"}),"   Upload Subjects"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-3",children:[!0===i&&"upload"===e.page_type&&Object(b.jsx)(Le,{}),(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(De,{})]}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-9":"col-md-12"),children:Object(b.jsx)(Ie,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/teachers-management/:page_type?/:school_id?/:subject_id?/:subject_name?/:teacher_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete"),d=ve("view");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i&&!1!==d||t.push("/admin/teachers-management")}),[c,s,i,o,d]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Teacher List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){t.push("/admin/teachers-management/create/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_name))},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create teachers"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/admin/teachers-management/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload teachers"]}),d&&Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(a){t.push("/admin/teachers-management/view/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_name))},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"View Teachers"]}),e.subject_id?Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(){document.querySelector("table").outerHTML;ae(0,"table.csv")},children:[Object(b.jsx)("span",{className:"fa fa-download mr-2"}),"Export to CSV"]}):""]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:!0===i&&"upload"===e.page_type&&Object(b.jsx)(Pe,{})}),Object(b.jsx)("div",{className:"col-md-12",children:(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(Qe,{})}),!0===d&&"view"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(Re,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/principal-management/:page_type?/:school_id?/:principal_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("view");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i&&!1!==o||t.push("/admin/principal-management")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Principal List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/principal-management/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Principals"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/admin/principal-management/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload Principals"]}),o&&Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(e){t.push("/admin/principal-management/view")},children:[Object(b.jsx)("span",{className:"fa fa-eye mr-2"}),"View Principals"]}),e.school_id?Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(){document.querySelector("table").outerHTML;ae(0,"table.csv")},children:[Object(b.jsx)("span",{className:"fa fa-download mr-2"}),"Export to CSV"]}):""]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-12",children:!0===i&&"upload"===e.page_type&&Object(b.jsx)(Xe,{})}),Object(b.jsx)("div",{className:"col-md-12",children:(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(Je,{})}),Object(b.jsx)("div",{className:"col-md-12",children:!0===o&&"view"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)(Ve,{})})]})})]})})})}},{path:"/admin/mapping-teacher-subjects/:page_type?/:school_id?/:school_slug?/:teacher_id?/:teacher_slug?/:teacher_sub_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Mapping Teacher-Subject List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(t){e.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(Ye,{})}),Object(b.jsx)("div",{className:"col-md-9 ",children:Object(b.jsx)(Ze,{})})]})})]})})})}},{path:"/admin/mapping-teacher-class/:page_type?/:school_id?/:school_slug?/:teacher_id?/:teacher_slug?/:teacher_class_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Mapping Teacher-Class List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(t){e.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)($e,{})}),Object(b.jsx)("div",{className:"col-md-9 ",children:Object(b.jsx)(at,{})})]})})]})})})}},{path:"/admin/mapping-class-subjects/:page_type?/:class_id?/:class_slug?/:class_subject_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Mapping Class-Subject List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(t){e.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(nt,{})}),Object(b.jsx)("div",{className:"col-md-9 ",children:Object(b.jsx)(ot,{})})]})})]})})})}},{path:"/admin/question-bank/:page_type?/:class_id?/:subject_id?/:unit_id?/:chapter_id?/:qbank_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete");return Object(n.useEffect)((function(){!1===c&&!1===s&&t.push("/admin/question-bank")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"All Questions"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/question-bank/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Question"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/admin/question-bank/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload Question"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-7 pr-0",children:(!0===c||!0===s||!0===i)&&("create"===e.page_type||"update"===e.page_type||"upload"===e.page_type)&&Object(b.jsx)(jt,{})}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-5 pr-0":"col-md-12"),children:Object(b.jsx)(bt,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/mapping-subject-chapters/:page_type?/:class_id?/:class_slug?/:subject_id?/:subject_slug?/:unit_id?/:unit_slug?/:subject_chapter_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/mapping-subject-chapters")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"All Mapping"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.class_id)&&void 0!==(null===e||void 0===e?void 0:e.subject_id)?t.push("/admin/mapping-subject-chapters/create/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug)):t.push("/admin/mapping-subject-chapters/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Mapping"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.class_id)&&void 0!==(null===e||void 0===e?void 0:e.subject_id)?t.push("/admin/mapping-subject-chapters/upload/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.class_slug,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat(null===e||void 0===e?void 0:e.subject_slug)):t.push("/admin/mapping-subject-chapters/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload Mapping"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-4",children:(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type||"upload"===(null===e||void 0===e?void 0:e.page_type))&&Object(b.jsx)(Mt,{})}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-8":"col-md-12"),children:Object(b.jsx)(Et,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/manage-units/:page_type?/:class_id?/:subject_id?/:subject_name?/:unit_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete");return Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/units")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"All Units"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.class_id)&&void 0!==(null===e||void 0===e?void 0:e.subject_id)?t.push("/admin/manage-units/create/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.subject_id)):t.push("/admin/manage-units/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Units"]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.class_id)&&void 0!==(null===e||void 0===e?void 0:e.subject_id)?t.push("/admin/manage-units/upload/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.subject_id)):t.push("/admin/manage-units/upload")},children:[Object(b.jsx)("span",{className:"fa fa-upload mr-2"}),"Upload Units"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-4",children:(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type||"upload"===(null===e||void 0===e?void 0:e.page_type))&&Object(b.jsx)(yt,{})}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-8":"col-md-12"),children:Object(b.jsx)(kt,{update:s,Delete:o})})]})})]})})})}},{path:"/admin/manage-unit-test/:page_type?/:test_type?/:class_id?/:subject_id?/:unit_id?/:chapter_id?/:test_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload");return ve("delete"),Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/manage-unit-test")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Unit Test"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/manage-unit-test/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Unit Test"]})]})}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-12 pr-0",children:(!0===c||!0===s||!0===i)&&("create"===e.page_type||"update"===e.page_type||"upload"===e.page_type)&&Object(b.jsx)(wt,{})})})})]})})})}},{path:"/admin/assign-test/:page_type?/:school_id?/:test_type?/:class_id?/:test_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue(),c=Te().data,s=le().data,i=Object(E.useToasts)().addToast;Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var o=ve("create"),d=ve("update"),r=ve("upload"),u=ve("delete");return Object(n.useEffect)((function(){!1!==o&&!1!==d&&!1!==r||t.push("/admin/question-bank")}),[o,d,r]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Assigned Test List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(e){t.push("/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(a){(null===e||void 0===e?void 0:e.school_id)&&(null===e||void 0===e?void 0:e.test_type)&&(null===e||void 0===e?void 0:e.class_id)?t.push("/admin/assign-test/create/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type,"/").concat(null===e||void 0===e?void 0:e.class_id)):(null===e||void 0===e?void 0:e.school_id)&&(null===e||void 0===e?void 0:e.test_type)?t.push("/admin/assign-test/create/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type)):(null===e||void 0===e?void 0:e.school_id)?t.push("/admin/assign-test/create/".concat(null===e||void 0===e?void 0:e.school_id)):t.push("/admin/assign-test/create/")},children:[Object(b.jsx)("span",{className:"bi bi-assign"}),"Assign New Test"]}),Object(b.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(a){(null===e||void 0===e?void 0:e.school_id)&&(null===e||void 0===e?void 0:e.test_type)&&(null===e||void 0===e?void 0:e.class_id)?t.push("/admin/assign-test/view/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type,"/").concat(null===e||void 0===e?void 0:e.class_id)):(null===e||void 0===e?void 0:e.school_id)&&(null===e||void 0===e?void 0:e.test_type)?t.push("/admin/assign-test/view/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type)):(null===e||void 0===e?void 0:e.school_id)?t.push("/admin/assign-test/view/".concat(null===e||void 0===e?void 0:e.school_id)):t.push("/admin/assign-test/view/")},children:[Object(b.jsx)("span",{className:"bi bi-assign"}),"View Assign Test"]})]})}),("create"==(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"view"==(null===e||void 0===e?void 0:e.page_type))&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row pl-0",children:[Object(b.jsx)("div",{className:"col-md-2",children:Object(b.jsxs)("select",{className:"form-control",id:"aschool",value:null===e||void 0===e?void 0:e.school_id,onChange:function(a){t.push("/admin/assign-test/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(a.target.value)),document.getElementById("testType").selectedIndex="0"},children:[Object(b.jsx)("option",{value:"",children:"Select School"}),null===s||void 0===s?void 0:s.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.school_name})}))]})}),Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsxs)("select",{className:"form-control",id:"testType",value:null===e||void 0===e?void 0:e.test_type,onChange:function(a){if("undefined"==(null===e||void 0===e?void 0:e.school_id)||"string"!==typeof(null===e||void 0===e?void 0:e.school_id))return i("please select school id",{appearance:"error",autoDismiss:!0}),document.getElementById("testType").selectedIndex="0",void(document.getElementById("aschool").selectedIndex="0");t.push("/admin/assign-test/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.school_id,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Test Type"}),Object(b.jsx)("option",{value:"mock-test",children:"Mock Test"}),Object(b.jsx)("option",{value:"combine-test",children:"Rivision Test"}),Object(b.jsx)("option",{value:"single-test",children:"Single Test"}),Object(b.jsx)("option",{value:"upload-test",children:"Teacher Led Test"})]})}),"mock-test"==(null===e||void 0===e?void 0:e.test_type)&&Object(b.jsx)("div",{className:"form-group col-md-2",children:Object(b.jsxs)("select",{className:"form-control ",id:"testFor",value:localStorage.getItem("mock_test_for"),onChange:function(t){localStorage.setItem("mock_test_for",t.target.value),window.location.href="/admin/assign-test/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type)},children:[Object(b.jsx)("option",{value:"",children:"Mock Test For"}),Object(b.jsx)("option",{value:"student",children:"Student"}),Object(b.jsx)("option",{value:"teacher",children:"Teacher"}),Object(b.jsx)("option",{value:"principal",children:"Principal"})]})}),"mock-test"!==(null===e||void 0===e?void 0:e.test_type)&&Object(b.jsx)("div",{className:"col-md-2",children:Object(b.jsxs)("select",{className:"form-control",id:"tclass",value:null===e||void 0===e?void 0:e.class_id,onChange:function(a){t.push("/admin/assign-test/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.test_type,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{className:"_",children:"Classess"}),null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.class_name},null===e||void 0===e?void 0:e._id)}))]})})]})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-12",children:(!0===o||!0===d||!0===r)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(qt,{})}),"view"===(null===e||void 0===e?void 0:e.page_type)&&Object(b.jsx)("div",{className:"".concat((null===e||void 0===e||e.page_type,"col-md-12")),children:Object(b.jsx)(Bt,{update:d,Delete:u})})]})})]})})})}},{path:"/admin/view-all-test/:test_type?/:class_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload");ve("delete"),Object(n.useEffect)((function(){!1===c&&!1===s&&t.push("/admin/question-bank")}),[c,s,i]);var o=Te().data,d=Ct().data,r=Object(n.useState)({}),u=Object(j.a)(r,2),v=(u[0],u[1],St(),Tt());return v.data,v.isLoading,Object(n.useEffect)((function(){var e=document.createElement("script");e.id="editor",e.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",e.async=!0,document.body.appendChild(e)}),[]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"All Unit Tests"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),Object(b.jsxs)("select",{className:"form-control col-md-2",value:null===e||void 0===e?void 0:e.test_type,onChange:function(e){t.push("/admin/view-all-test/".concat(e.target.value)),document.getElementById("class").selectedIndex="0"},children:[Object(b.jsx)("option",{value:"",children:"Test Type"}),Object(b.jsx)("option",{value:"combine-test",children:"Combined Test"}),Object(b.jsx)("option",{value:"single-test",children:"Single Test"})]}),Object(b.jsxs)("select",{className:"form-control col-md-2 ml-2",id:"class",value:null===e||void 0===e?void 0:e.class_id,onChange:function(a){"_"===a.target.value?t.push("/admin/view-all-test"):t.push("/admin/view-all-test/".concat(null===e||void 0===e?void 0:e.test_type,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Class"}),null===o||void 0===o?void 0:o.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.class_name," Th"]})}))]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-12",style:{height:"500px",overflow:"hidden scroll"},children:[Object(b.jsxs)("div",{className:"col-md-12 row table-bordered ml-2 mr-2",children:[Object(b.jsx)("div",{className:"col-md-2 mt-2 mb-2 pl-0",children:Object(b.jsx)("b",{children:"Test Name"})}),Object(b.jsx)("div",{className:"col-md-1 mt-2 mb-2 pl-0",children:Object(b.jsx)("b",{children:"Question"})}),Object(b.jsx)("div",{className:"col-md-1 mt-2 mb-2 pl-0",children:Object(b.jsx)("b",{children:"Duration"})}),Object(b.jsx)("div",{className:"col-md-2 mt-2 mb-2 pl-0",children:Object(b.jsx)("b",{children:"Test Type"})}),Object(b.jsx)("div",{className:"col-md-2 mt-2 mb-2 pl-0",children:Object(b.jsx)("b",{children:"Test Subject"})})]}),null===d||void 0===d?void 0:d.map((function(e){var t="";return t="combine-test"===(null===e||void 0===e?void 0:e.test_type)?Array.prototype.map.call(null===e||void 0===e?void 0:e.test_subjects,(function(e){return e.subject_name})).join(","):null===e||void 0===e?void 0:e.subject_name,Object(b.jsxs)("div",{className:"col-md-12 row table-bordered ml-2 mr-2 pt-0 pb-0",children:[Object(b.jsx)("div",{className:"col-md-2 mt-1 mb-1 pl-0",children:Object(b.jsx)("b",{children:null===e||void 0===e?void 0:e.test_name})}),Object(b.jsx)("div",{className:"col-md-1 mt-1 mb-1 pl-0",children:Object(b.jsx)("b",{children:null===e||void 0===e?void 0:e.total_question})}),Object(b.jsx)("div",{className:"col-md-1 mt-1 mb-1 pl-0",children:Object(b.jsxs)("b",{children:[null===e||void 0===e?void 0:e.test_duration," Min"]})}),Object(b.jsx)("div",{className:"col-md-2 mt-1 mb-1 pl-0",children:Object(b.jsx)("b",{children:"combine-test"===(null===e||void 0===e?void 0:e.test_type)?"combine-test":"single-test"})}),Object(b.jsx)("div",{className:"col-md-2 mt-1 mb-1 pl-0",children:Object(b.jsx)("b",{children:t})})]})}))]})})})]})})})}},{path:"/admin/mock-test/:page_type?/:module_type?/:question_for?/:test_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload"),o=ve("delete"),d=ve("view");return Object(n.useEffect)((function(){!1===c&&!1===s&&t.push("/admin/mock-test")}),[c,s,i,o,d]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Mock Test"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.question_for)?t.push("/admin/mock-test/create/mock-test-question/".concat(null===e||void 0===e?void 0:e.question_for)):t.push("/admin/mock-test/create/mock-test-question")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Add Mock Test Question"]}),Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.question_for)?t.push("/admin/mock-test/create/mock-test/".concat(null===e||void 0===e?void 0:e.question_for)):t.push("/admin/mock-test/create/mock-test")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Mock Test"]})]}),d&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.question_for)?t.push("/admin/mock-test/view/mock-test-question/".concat(null===e||void 0===e?void 0:e.question_for)):t.push("/admin/mock-test/view/mock-test-question")},children:[Object(b.jsx)("span",{className:"fa fa-eye mr-2"}),"View Mock Test Question"]}),Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){void 0!==(null===e||void 0===e?void 0:e.question_for)?t.push("/admin/mock-test/view/mock-test/".concat(null===e||void 0===e?void 0:e.question_for)):t.push("/admin/mock-test/view/mock-test")},children:[Object(b.jsx)("span",{className:"fa fa-eye mr-2"}),"View Mock Test"]})]})]})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("select",{className:"form-control col-md-2",value:null===e||void 0===e?void 0:e.question_for,onChange:function(a){""!==a.target.value&&t.push("/admin/mock-test/".concat(null===e||void 0===e?void 0:e.page_type,"/").concat(null===e||void 0===e?void 0:e.module_type,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Question For"}),Object(b.jsx)("option",{value:"student",children:"Student"}),Object(b.jsx)("option",{value:"teacher",children:"Teacher"}),Object(b.jsx)("option",{value:"principal",children:"Principal"})]})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[!0===c&&"create"===(null===e||void 0===e?void 0:e.page_type)&&"mock-test-question"===(null===e||void 0===e?void 0:e.module_type)&&Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(Ot,{})}),!0===c&&"create"===(null===e||void 0===e?void 0:e.page_type)&&"mock-test"===(null===e||void 0===e?void 0:e.module_type)&&Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(ft,{})}),!0===d&&"view"===(null===e||void 0===e?void 0:e.page_type)&&"mock-test-question"===(null===e||void 0===e?void 0:e.module_type)&&Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(xt,{})}),!0===d&&"view"===(null===e||void 0===e?void 0:e.page_type)&&"mock-test"===(null===e||void 0===e?void 0:e.module_type)&&Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(gt,{})})]})})]})})})}},{path:"/admin/school-report/:school_id?/:class_id?/:test_type?/:report_type?/:test_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue(),c=Object(E.useToasts)().addToast;Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var s=ve("create"),i=ve("update"),o=ve("upload");ve("delete"),Object(n.useEffect)((function(){!1!==s&&!1!==i&&!1!==o||t.push("/admin/school-report")}),[s,i,o]);var d=le().data,r=Te().data;return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"School Report"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),Object(b.jsxs)("select",{className:"form-control col-md-3 ml-2",id:"rschool",value:null===e||void 0===e?void 0:e.school_id,onChange:function(e){t.push("/admin/school-report/".concat(e.target.value)),document.getElementById("rclass").selectedIndex="0"},children:[Object(b.jsx)("option",{value:"",children:"Select School"}),null===d||void 0===d?void 0:d.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.school_name},null===e||void 0===e?void 0:e._id)}))]}),Object(b.jsxs)("select",{className:"form-control col-md-2 ml-2",id:"rclass",value:null===e||void 0===e?void 0:e.class_id,onChange:function(a){if("undefined"==(null===e||void 0===e?void 0:e.school_id)||"string"!==typeof(null===e||void 0===e?void 0:e.school_id))return c("please select school id",{appearance:"error",autoDismiss:!0}),void(document.getElementById("rclass").selectedIndex="0");t.push("/admin/school-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Select Class"}),Object(b.jsx)("option",{value:"all",children:"All Class"}),null===r||void 0===r?void 0:r.map((function(e){return Object(b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.class_name,"Th "]})}))]}),(null===e||void 0===e?void 0:e.school_id)&&(null===e||void 0===e?void 0:e.class_id)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"dark ml-2",onClick:function(){t.push("/admin/school-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/combine-test"))},children:"Rivision Tests"}),Object(b.jsx)("button",{className:"dark ml-2",onClick:function(){t.push("/admin/school-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/single-test"))},children:"Assign Tests"}),Object(b.jsx)("button",{className:"dark ml-2",onClick:function(){t.push("/admin/school-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/mock-test"))},children:"Mock Test"}),Object(b.jsx)("button",{className:"dark ml-2",onClick:function(){t.push("/admin/school-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(null===e||void 0===e?void 0:e.class_id,"/upload-test"))},children:"Teacher Led Test"})]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsxs)("div",{className:"dash-cont-start",children:[("combine-test"===(null===e||void 0===e?void 0:e.test_type)||"single-test"===(null===e||void 0===e?void 0:e.test_type)||"mock-test"===(null===e||void 0===e?void 0:e.test_type)||"upload-test"===(null===e||void 0===e?void 0:e.test_type))&&Object(b.jsx)(Dt,{}),(null===e||void 0===e?void 0:e.test_id)&&("combine-test"===(null===e||void 0===e?void 0:e.test_type)||"single-test"===(null===e||void 0===e?void 0:e.test_type)||"mock-test"===(null===e||void 0===e?void 0:e.test_type)||"upload-test"===(null===e||void 0===e?void 0:e.test_type))&&Object(b.jsx)(At,{})]})]})})})}},{path:"/admin/activity-report/:school_id?/:startDate?/:endDate?/:report_type?/:user_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(E.useToasts)().addToast,Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload");ve("delete"),Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/activity-report")}),[c,s,i]);var o=Object(n.useState)(new Date),d=Object(j.a)(o,2),r=d[0],u=d[1],v=Object(n.useState)(new Date),m=Object(j.a)(v,2),p=m[0],h=m[1],O=le().data;return Te().data,Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"School Activity Report"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),Object(b.jsxs)("select",{className:"form-control col-md-2 ml-2",id:"rschool",value:null===e||void 0===e?void 0:e.school_id,onChange:function(e){t.push("/admin/activity-report/".concat(e.target.value))},children:[Object(b.jsx)("option",{value:"",children:"Select School"}),null===O||void 0===O?void 0:O.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.school_name},null===e||void 0===e?void 0:e._id)}))]}),Object(b.jsx)("div",{className:"ml-2 pl-2 pr-2",children:Object(b.jsx)(It.a,{className:"form-control",selected:r,value:r,onChange:function(e){return u(e)},isClearable:!0,showTimeSelect:!0,dateFormat:"MM/d/yyyy h:mm aa",maxDate:new Date})}),Object(b.jsx)("div",{className:"pl-2",children:Object(b.jsx)(It.a,{className:"form-control",selected:p,value:p,onChange:function(e){return h(e)},isClearable:!0,showTimeSelect:!0,dateFormat:"MM/d/yyyy h:mm aa",maxDate:new Date})}),(null===e||void 0===e?void 0:e.school_id)&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{className:"dark ml-2",onClick:function(){t.push("/admin/activity-report/".concat(null===e||void 0===e?void 0:e.school_id,"/").concat(r.toISOString().split("T")[0],"/").concat(p.toISOString().split("T")[0],"/login-report"))},children:"Login Report"})})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:"login-report"===(null===e||void 0===e?void 0:e.report_type)&&Object(b.jsx)(Lt,{})})]})})})}},{path:"/admin/view-all-questions/:class_id?/:subject_id?/:type?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload");ve("delete"),Object(n.useEffect)((function(){!1===c&&!1===s&&t.push("/admin/question-bank")}),[c,s,i]);var o=Te().data,d=ct().data,v=lt().data,m=function(){var e,t=Object(n.useContext)(S).state,a=Object(l.i)();return e="questions-".concat(null===a||void 0===a?void 0:a.class_id,"-").concat(null===a||void 0===a?void 0:a.subject_id),Object(D.a)("".concat(e),Object(u.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.access_token&&(null===a||void 0===a?void 0:a.class_id)&&(null===a||void 0===a?void 0:a.subject_id))){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/question-bank/all-questions/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.subject_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,p=Object(n.useState)({}),h=Object(j.a)(p,2);h[0],h[1],mt(),Object(n.useEffect)((function(){var e=document.createElement("script");e.id="editor",e.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",e.async=!0,document.body.appendChild(e)}),[]);var O=d&&(null===d||void 0===d?void 0:d.filter((function(t){return t.subject_id===(null===e||void 0===e?void 0:e.subject_id)}))),f=o&&(null===o||void 0===o?void 0:o.filter((function(t){return t._id===(null===e||void 0===e?void 0:e.class_id)})));console.log(O);var x=null===e||void 0===e?void 0:e.type;return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"All Questions"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),Object(b.jsxs)("select",{className:"form-control col-md-2 ml-2",value:null===e||void 0===e?void 0:e.class_id,onChange:function(e){"_"===e.target.value?t.push("/admin/view-all-questions"):t.push("/admin/view-all-questions/".concat(e.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Class"}),null===o||void 0===o?void 0:o.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.class_name})}))]}),Object(b.jsxs)("select",{className:"form-control col-md-2 ml-2",value:null===e||void 0===e?void 0:e.subject_id,onChange:function(a){"_"===a.target.value?t.push("/admin/view-all-questions/".concat(null===e||void 0===e?void 0:e.class_id)):t.push("/admin/view-all-questions/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(a.target.value))},children:[Object(b.jsx)("option",{value:"_",children:"Subject"}),null===d||void 0===d?void 0:d.map((function(e){return Object(b.jsx)("option",{value:null===e||void 0===e?void 0:e.subject_id,children:null===e||void 0===e?void 0:e.subject_name})}))]}),(null===e||void 0===e?void 0:e.subject_id)&&Object(b.jsxs)("button",{className:"btn btn-sm bg-success text-white ml-2",onClick:function(){t.push("/admin/view-all-questions/".concat(null===e||void 0===e?void 0:e.class_id,"/").concat(null===e||void 0===e?void 0:e.subject_id,"/").concat("Units"===x?"Chapters":"Units"))},children:["Units"===x?"Chapters":"Units"," Wise Report"]}),(null===e||void 0===e?void 0:e.subject_id)&&Object(b.jsxs)("button",{className:"ml-2 btn btn-sm bg-warning pull-right",onClick:function(){document.querySelector("table").outerHTML;var e="".concat(f&&f[0].class_name,"_").concat(O&&O[0].subject_name);ae(0,"".concat(e,".csv"))},children:[Object(b.jsx)("span",{className:"bi bi-download mr-2"}),"Download ",x," Report"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("table",{className:"table table-bordered col-md-12 flex",id:"printDiv",style:{height:"500px",overflow:"hidden scroll",flexWrap:"wrap"},children:[Object(b.jsxs)("tr",{className:"header flex col-md-12 ml-2 mr-2 pt-1 table-bordered",children:[Object(b.jsx)("td",{className:"col-md-1",children:"Sr."}),Object(b.jsxs)("td",{className:"col-md-10",children:[x," Name"]}),Object(b.jsx)("td",{className:"col-md-2",children:"Total"})]}),(null===m||void 0===m?void 0:m.length)>0&&(null===v||void 0===v?void 0:v.map((function(t,a){var n=null===m||void 0===m?void 0:m.filter((function(e){return(null===e||void 0===e?void 0:e.unit_id)===(null===t||void 0===t?void 0:t._id)})),c=n.map((function(e){return e.total_question})).reduce((function(e,t){return e+t}));return Object(b.jsxs)(b.Fragment,{children:["Units"===(null===e||void 0===e?void 0:e.type)&&Object(b.jsxs)("tr",{className:"flex col-md-12 ml-2 mr-2 pt-1 table-bordered",children:[Object(b.jsx)("td",{className:"col-md-1 pl-0",children:Object(b.jsx)("b",{children:a+1})}),Object(b.jsx)("td",{className:"col-md-10",children:Object(b.jsx)("b",{children:null===t||void 0===t?void 0:t.unit_name})}),Object(b.jsx)("td",{className:"col-md-2",children:Object(b.jsx)("b",{children:c})})]}),"Chapters"===(null===e||void 0===e?void 0:e.type)&&(null===n||void 0===n?void 0:n.map((function(e){var t;return Object(b.jsxs)("tr",{className:"flex col-md-12 ml-2 mr-2 pt-1 table-bordered",children:[Object(b.jsx)("td",{className:"col-md-1 pl-2",children:null===e||void 0===e?void 0:e.chapter_no}),Object(b.jsx)("td",{className:"col-md-10",children:null===e||void 0===e||null===(t=e.chapter_name)||void 0===t?void 0:t.replaceAll(","," ")}),Object(b.jsx)("td",{className:"col-md-2",children:null===e||void 0===e?void 0:e.total_question})]},null===e||void 0===e?void 0:e._id)})))]})})))]})})})]})})})}},{path:"/admin/school-management/:page_type?/:school_id?",component:function(){var e=Object(l.i)(),t=Object(l.g)(),a=ue();Object(n.useEffect)((function(){!1===a&&t.push("/403")}),[a]);var c=ve("create"),s=ve("update"),i=ve("upload");return ve("delete"),Object(n.useEffect)((function(){!1!==c&&!1!==s&&!1!==i||t.push("/admin/students-management")}),[c,s,i]),Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"School List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsxs)("div",{className:"col-md-12 row",children:[Object(b.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})}),c&&Object(b.jsxs)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){t.push("/admin/school-management/create")},children:[Object(b.jsx)("span",{className:"fa fa-plus mr-2"}),"Create Schools                                "]}),i&&Object(b.jsxs)("button",{className:"btn btn-sm dark",onClick:function(a){void 0==e.page_type||"create"==e.page_type?t.push("/admin/school-management/upload"):"upload"==e.page_type&&t.push("/admin/school-management")},children:[Object(b.jsx)("span",{className:"fa fa-upload"}),"   Upload Schools"]})]})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-3",children:[!0===i&&"upload"===e.page_type&&Object(b.jsx)(re,{}),(!0===c||!0===s)&&("create"===e.page_type||"update"===e.page_type)&&Object(b.jsx)(oe,{})]}),Object(b.jsx)("div",{className:"".concat("create"===(null===e||void 0===e?void 0:e.page_type)||"update"===(null===e||void 0===e?void 0:e.page_type)||"upload"===(null===e||void 0===e?void 0:e.page_type)?"col-md-9":"col-md-12"),children:Object(b.jsx)(de,{update:s})})]})})]})})})}}],Qt=[{path:"/admin/app-module/:module_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"App Modules List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(t){e.push("/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(me,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsx)(he,{})})]})})]})})})}},{path:"/admin/app-roles/:role_id?",component:function(){var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"App Roles List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(t){e.push("/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(Oe,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsx)(_e,{})})]})})]})})})}},{path:"/admin/app-permissions/:role_id?/:role_slug?/:role?/:admin_email?",component:function(){var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsxs)("h2",{children:[Object(b.jsx)("span",{className:"bi bi-gear-wide-connected text-warning mr-2"}),"App Permissions"]})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(t){e.push("/admin/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-4 pr-0",children:Object(b.jsx)(Ne,{})}),Object(b.jsx)("div",{className:"col-md-8 pr-0",children:Object(b.jsx)(we,{})})]})})]})})})}},{path:"/admin/manage-sub-admin/:page_type?/:role?/:admin_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(b.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(b.jsx)("div",{className:"main-area-all",children:Object(b.jsxs)("div",{className:"dashboard_main-container",children:[Object(b.jsx)("div",{className:"dash-main-head",children:Object(b.jsx)("h2",{children:"Sub Admin List"})}),Object(b.jsx)("div",{className:"dash-con-heading",children:Object(b.jsx)("div",{className:"col-md-12 row",children:Object(b.jsx)("button",{className:"btn btn-sm dark",onClick:function(t){e.push("/dashboard")},children:Object(b.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(b.jsx)("div",{className:"clearfix"}),Object(b.jsx)("div",{className:"dash-cont-start",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(ne,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsx)(ie,{})})]})})]})})})}}],Pt=new(a(220).a)({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});function Ht(){return Object(b.jsx)(o.a,{children:Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsx)("div",{className:"row no-gutters",children:Object(b.jsx)(X.a,{client:Pt,children:Object(b.jsx)(A,{children:Object(b.jsxs)(E.ToastProvider,{children:[Object(b.jsx)(z,{}),Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsxs)(l.d,{children:[null===zt||void 0===zt?void 0:zt.map((function(e){return Object(b.jsx)(l.b,{exact:!0,path:e.path,component:e.component},e.path)})),null===Ut||void 0===Ut?void 0:Ut.map((function(e){return Object(b.jsx)(Q,{exact:!0,path:e.path,component:e.component},e.path)})),null===Qt||void 0===Qt?void 0:Qt.map((function(e){return Object(b.jsx)(P,{exact:!0,path:e.path,component:e.component},e.path)}))]})})]})})})})})})}i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(Ht,{})}),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.29561927.chunk.js.map