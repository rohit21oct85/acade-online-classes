(this.webpackJsonpresources=this.webpackJsonpresources||[]).push([[0],{100:function(e,a,t){},101:function(e,a,t){},102:function(e,a,t){"use strict";t.r(a);var s=t(1),n=t.n(s),c=t(23),o=t.n(c),i=(t(59),t(7)),l=t(16),r=t(2),d=t.n(r),u=t(3),j=t(8),m=(t(61),t(105)),b=t(4),p=t(0),h=localStorage.getItem("fullname"),v=localStorage.getItem("email"),O=localStorage.getItem("role"),f=localStorage.getItem("user_type"),x=localStorage.getItem("school_id"),g=localStorage.getItem("school_slug"),_=localStorage.getItem("school_logo"),N=localStorage.getItem("created_at"),y=localStorage.getItem("isLoggedIn"),k=localStorage.getItem("access_token"),w=localStorage.getItem("refresh_token"),S={isLoggedIn:y||!1,fullname:h||null,email:v||null,role:O||null,user_type:f||null,school_id:x||null,school_slug:g||null,school_logo:_||null,created_at:N||null,access_token:k||null,refresh_token:w||null},C=n.a.createContext(S),A=function(e,a){switch(a.type){case"LOGIN":return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:a.payload.isLoggedIn,fullname:a.payload.fullname,email:a.payload.email,role:a.payload.role,user_type:a.payload.user_type,school_id:a.payload.school_id,school_slug:a.payload.school_slug,school_logo:a.payload.school_logo,created_at:a.payload.created_at,access_token:a.payload.access_token,refresh_token:a.payload.refresh_token});case"LOGOUT":return localStorage.clear(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("role"),localStorage.removeItem("school_id"),localStorage.removeItem("school_slug"),localStorage.removeItem("school_logo"),Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:!1,fullname:null,email:null,access_token:null,refresh_token:null});default:return e}};var D=function(e){var a=e.children,t=Object(s.useReducer)(A,S),n=Object(j.a)(t,2),c=n[0],o=n[1];return Object(p.jsx)(C.Provider,{value:{state:c,dispatch:o},children:a})},T=t(107),L=t(5),F=t.n(L),I="https://acade-online-classes.herokuapp.com/api/";function z(){var e=Object(s.useContext)(C).state;return Object(T.a)("app-modules",Object(u.a)(d.a.mark((function a(){var t;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token||"master_admin"!=(null===e||void 0===e?void 0:e.user_type)){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/module/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return t=a.sent,a.abrupt("return",t.data.data);case 5:case"end":return a.stop()}}),a)}))))}function B(e){var a=e.isLoading;return Object(p.jsx)("div",{children:a&&Object(p.jsx)("div",{className:"spinner-border",style:{width:"16px",height:"16px"},role:"status",children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})})}function P(){var e,a=Object(l.g)(),t=(Object(l.h)(),Object(l.i)(),Object(s.useContext)(C)),n=t.state,c=t.dispatch,o=z(),r=o.data,b=o.isLoading,h=function(){var e=Object(s.useContext)(C).state,a=null===e||void 0===e?void 0:e.user_type,t=null===e||void 0===e?void 0:e.school_slug;return Object(T.a)("other-modules",Object(u.a)(d.a.mark((function s(){var n;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.access_token||"school-admin"!=(null===e||void 0===e?void 0:e.user_type)){s.next=5;break}return s.next=3,F.a.get("".concat(I,"v1/permission/module/").concat(t,"/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return n=s.sent,s.abrupt("return",n.data.data);case 5:console.log("inside useOther Module");case 6:case"end":return s.stop()}}),s)}))))}(),v=h.data,O=h.isLoading,f=Object(s.useState)([]),x=Object(j.a)(f,2),g=x[0],_=x[1];function N(){return(N=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"master_admin"==(null===n||void 0===n?void 0:n.user_type)?_(r):"school-admin"==(null===n||void 0===n?void 0:n.user_type)&&_(v);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return N.apply(this,arguments)}),[n,r,v]),Object(p.jsx)(p.Fragment,{children:n.isLoggedIn&&Object(p.jsxs)("div",{className:"login_menu col-lg-2 col-md-2 col-12",bg:"dark",variant:"dark",expand:"lg",children:[Object(p.jsx)("div",{className:"webLogo",children:Object(p.jsx)("img",{src:"/logo.png",style:{width:"62%"},alt:"User"})}),Object(p.jsxs)("div",{className:"user_area",children:[Object(p.jsx)("div",{className:"col-md-12 user_icon",children:Object(p.jsxs)("div",{className:"col-md-12 p-0",children:["master_admin"==(null===n||void 0===n?void 0:n.user_type)&&Object(p.jsx)("img",{src:"/profile.jpg",className:"profileImage"}),"master_admin"!==(null===n||void 0===n?void 0:n.user_type)&&Object(p.jsx)("img",{src:"https://drive.google.com/uc?export=view&id=".concat(null===n||void 0===n?void 0:n.school_logo),className:"profileImage"})]})}),Object(p.jsxs)("div",{className:"user_options mt-1",children:[Object(p.jsx)("div",{className:"col-md-12 p-0 user_details",children:Object(p.jsx)("span",{className:"user_name",children:null===n||void 0===n?void 0:n.email})}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{as:i.b,children:Object(p.jsxs)("button",{className:"bg-warning dark br-10 pl-2 pr-2",children:[Object(p.jsx)("span",{className:"fa fa-lock mr-2"})," ",null===n||void 0===n||null===(e=n.user_type)||void 0===e?void 0:e.replace("_"," ")]})}),Object(p.jsx)("li",{as:i.b,onClick:function(){c({type:"LOGOUT"}),"master_admin"===(null===n||void 0===n?void 0:n.user_type)?a.push("/"):"school-admin"===(null===n||void 0===n?void 0:n.user_type)?a.push("/school/admin/login"):"school-teacher"===(null===n||void 0===n?void 0:n.user_type)?a.push("/school/teacher/login"):"school-student"===(null===n||void 0===n?void 0:n.user_type)&&a.push("/school/student/login")},alt:"Logout",children:Object(p.jsxs)("button",{className:"bg-danger dark br-10  pl-2 pr-2",children:[Object(p.jsx)("span",{className:"fa fa-power-off mr-2"}),"Logout"]})})]})]})]}),Object(p.jsx)("div",{className:"navbar_menus",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsxs)(m.a,{className:"ml-auto",children:["master_admin"==(null===n||void 0===n?void 0:n.user_type)&&Object(p.jsxs)(i.c,{to:"/admin/dashboard",children:[" ",Object(p.jsx)("span",{className:"fa fa-dashboard"})," Dashboard"]}),"master_admin"!==(null===n||void 0===n?void 0:n.user_type)&&Object(p.jsxs)(i.c,{to:"/school/".concat(null===n||void 0===n?void 0:n.school_slug,"/admin/dashboard"),children:[" ",Object(p.jsx)("span",{className:"fa fa-dashboard"})," Dashboard"]})]})}),"master_admin"===(null===n||void 0===n?void 0:n.user_type)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/admin/app-module",children:[" ",Object(p.jsx)("span",{className:"bi bi-list-ol text-warning"})," App Module "]})})}),Object(p.jsx)("li",{children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/admin/app-roles",children:[" ",Object(p.jsx)("span",{className:"bi bi-person-circle text-warning"})," App Roles "]})})}),Object(p.jsx)("li",{children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/admin/app-permissions",children:[" ",Object(p.jsx)("span",{className:"bi bi-gear-wide-connected text-warning"})," App Permissions "]})})}),Object(p.jsx)("li",{children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/admin/school-management",children:[" ",Object(p.jsx)("span",{className:"bi bi-building text-warning"})," School Management "]})})})]}),"master_admin"==(null===n||void 0===n?void 0:n.user_type)&&b&&Object(p.jsx)(B,{isLoading:b}),"master_admin"==(null===n||void 0===n?void 0:n.user_type)&&(null===g||void 0===g?void 0:g.map((function(e){return Object(p.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/admin/".concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(p.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e?void 0:e.module_name," "]})})},null===e||void 0===e?void 0:e._id)}))),"school-admin"==(null===n||void 0===n?void 0:n.user_type)&&O&&Object(p.jsx)(B,{isLoading:O}),null===g||void 0===g?void 0:g.map((function(e){var a;return Object(p.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(p.jsx)(m.a,{className:"ml-auto",children:Object(p.jsxs)(i.c,{to:"/school/".concat(null===n||void 0===n?void 0:n.school_slug,"/admin/").concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(p.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e||null===(a=e.module_slug)||void 0===a?void 0:a.replaceAll("-"," ")," "]})})},null===e||void 0===e?void 0:e._id)}))]})})]})})}t(89);var U=t(27),E=function(e){var a=e.component,t=Object(U.a)(e,["component"]),n=Object(s.useContext)(C).state;return Object(p.jsx)(l.b,Object(b.a)(Object(b.a)({},t),{},{render:function(e){return n.isLoggedIn?Object(p.jsx)(a,Object(b.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/admin/login"}})}}))},Q=function(e){var a=e.component,t=Object(U.a)(e,["component"]),n=Object(s.useContext)(C).state;return Object(p.jsx)(l.b,Object(b.a)(Object(b.a)({},t),{},{render:function(e){return"1"==n.role?Object(p.jsx)(a,Object(b.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/403"}})}}))},M=function(e){var a=e.component,t=Object(U.a)(e,["component"]),n=Object(s.useContext)(C).state;return Object(p.jsx)(l.b,Object(b.a)(Object(b.a)({},t),{},{render:function(e){return"1"==n.role?Object(p.jsx)(a,Object(b.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/403"}})}}))},R=(t(90),t(10));function H(){var e=Object(l.g)(),a=(Object(l.h)(),Object(R.useToasts)().addToast),t=Object(s.useRef)(),n=Object(s.useRef)(),c=Object(s.useState)(null),o=Object(j.a)(c,2),r=(o[0],o[1],Object(s.useContext)(C)),m=r.dispatch,b=r.state,h=Object(s.useState)(!1),v=Object(j.a)(h,2),O=v[0],f=v[1],x=function(){var s=Object(u.a)(d.a.mark((function s(c){var o,i,l,r,u,j,b,p,h,v,O,x,g,_,N,y,k,w,S,C,A,D,T,L;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c.preventDefault(),o=t.current.value,i=n.current.value,""!==o){s.next=8;break}return a("Please enter email address",{appearance:"error",autoDismiss:!0}),s.abrupt("return",!1);case 8:if(""!==i){s.next=14;break}return a("Please enter password",{appearance:"error",autoDismiss:!0}),n.current.focus(),s.abrupt("return",!1);case 14:return f(!0),r={email:t.current.value,password:n.current.value},s.next=18,F.a.post("".concat(I,"v1/admin/login"),r);case 18:203===(null===(u=s.sent)||void 0===u||null===(l=u.data)||void 0===l?void 0:l.status)?(a("".concat(null===u||void 0===u||null===(j=u.data)||void 0===j?void 0:j.message),{appearance:"error",autoDismiss:!0}),f(!1)):(k=null===u||void 0===u||null===(b=u.data)||void 0===b?void 0:b.accessToken,w=null===u||void 0===u||null===(p=u.data)||void 0===p?void 0:p.refreshToken,S=null===u||void 0===u||null===(h=u.data)||void 0===h||null===(v=h.admin)||void 0===v?void 0:v.fullname,C=null===u||void 0===u||null===(O=u.data)||void 0===O||null===(x=O.admin)||void 0===x?void 0:x.email,A=null===u||void 0===u||null===(g=u.data)||void 0===g||null===(_=g.admin)||void 0===_?void 0:_.role,D="master_admin",T=null===u||void 0===u||null===(N=u.data)||void 0===N||null===(y=N.admin)||void 0===y?void 0:y.created_at,L=!0,localStorage.setItem("access_token",k),localStorage.setItem("refresh_token",w),localStorage.setItem("fullname",S),localStorage.setItem("email",C),localStorage.setItem("role",A),localStorage.setItem("user_type",D),localStorage.setItem("created_at",T),localStorage.setItem("isLoggedIn",L),m({type:"LOGIN",payload:{isLoggedIn:L,fullname:S,email:C,role:A,user_type:D,created_at:T,access_token:k,refresh_token:w}}),e.push("/admin/dashboard"));case 20:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();function g(){return(g=Object(u.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:!0===(null===b||void 0===b?void 0:b.isLoggedIn)?"1"===(null===b||void 0===b?void 0:b.role)?e.push("/admin/dashboard"):e.push("/dashboard"):e.push("/admin/login");case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return g.apply(this,arguments)}),[b]),Object(p.jsxs)("div",{className:"container-fluid p-0 m-0 text-center LoginBg",style:{background:"url('/bg.jpg')"},children:[Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(i.c,{to:"/",children:Object(p.jsx)("img",{className:"logo",alt:"company Logo",src:"/logo.png"})})}),Object(p.jsx)("div",{className:"row no-gutter",children:Object(p.jsxs)("div",{className:"col-md-3 adminLoginDiv",children:[Object(p.jsx)("h4",{children:"Administrator Login "}),Object(p.jsx)("hr",{}),Object(p.jsxs)("form",{autoComplete:"Off",onSubmit:x,children:[Object(p.jsxs)("div",{className:"form-group text-left",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsx)("span",{className:"fa fa-send mr-2"})," Email address"]}),Object(p.jsx)("input",{className:"form-control",type:"email",autoComplete:"off",ref:t,placeholder:"Enter email"}),Object(p.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your email with anyone else."})]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("div",{className:"form-group text-left",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsx)("span",{className:"fa fa-lock mr-2"})," Password"]}),Object(p.jsx)("input",{className:"form-control",type:"password",autoComplete:"Off",ref:n,placeholder:"Password"}),Object(p.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your password with anyone else."})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("button",{className:"btn btn-md btn-block btn-success dark w-100",type:"submit",disabled:O,children:O?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2",children:" "})," Authenticating..."]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-lock mr-2",children:" "})," Login Your Account"]})}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{children:"Do you have an Account details provided by your Schools ?"}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(p.jsxs)("button",{className:"btn btn-sm dark mb-2",onClick:function(a){return e.push("/school/admin/login")},children:[Object(p.jsx)("span",{className:"fa fa-lock text-warning mr-2"}),"Login As School Admin"]}),Object(p.jsxs)("button",{className:"btn btn-sm dark mb-2",onClick:function(a){return e.push("/school/teacher/login")},children:[Object(p.jsx)("span",{className:"fa fa-lock text-warning mr-2"}),"Login As School Teacher"]}),Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(a){return e.push("/school/student/login")},children:[Object(p.jsx)("span",{className:"fa fa-lock text-warning mr-2"}),"Login As School Student"]})]})]})]})})]})}t(97);function G(){var e=Object(l.g)(),a=Object(l.h)(),t=null===a||void 0===a?void 0:a.pathname,n=Object(s.useContext)(C).state;function c(){return(c=Object(u.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"/admin/"===t&&e.push("/admin/dashboard");case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return c.apply(this,arguments)}),[n]),Object(p.jsx)(p.Fragment,{children:n.isLoggedIn&&Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Dashboard"})}),Object(p.jsx)("div",{className:"dash_over_view",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12 pl-0",children:1===n.role&&Object(p.jsx)("div",{className:"col-md-3 card ml-3  pt-2 pb-2 main-box gradient-ibiza",children:Object(p.jsxs)("div",{className:"card-body pt-0 pb-0 pl-0",children:[Object(p.jsxs)("div",{className:"box-head",children:[Object(p.jsx)("h4",{children:"Admin"}),Object(p.jsx)("div",{className:"box-icon",children:Object(p.jsx)("span",{className:"fa fa-users"})})]}),Object(p.jsx)("div",{className:"main-box-text",children:Object(p.jsx)("b",{children:"Total: 1 "})})]})})})})})]})})})})}var W=t(13),q=(t(52),function(e){var a,t,s;return null===e||void 0===e||null===(a=e.trim())||void 0===a||null===(t=a.toLowerCase())||void 0===t||null===(s=t.replace(/[^\w ]+/g,""))||void 0===s?void 0:s.replace(/ +/g,"-")});var $=t(29),Y=t(108);function Z(){Object(l.h)().pathname;var e=Object(l.g)(),a=Object($.b)(),t={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(s.useContext)(C).state.access_token}},n=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/role/delete"),e,t)}),{onSuccess:function(){a.invalidateQueries("roles"),e.push("/admin/app-roles"),n("Role deleted successfully",{appearance:"success",autoDismiss:!0})}})}function J(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(R.useToasts)().addToast,n=function(e){Object(l.i)();var a=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(e),Object(u.a)(d.a.mark((function t(){var s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=5;break}return t.next=3,F.a.get("".concat(I,"v1/school/view/").concat(e),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+a.access_token}});case 3:return s=t.sent,t.abrupt("return",s.data.data);case 5:case"end":return t.stop()}}),t)}))))}(null===a||void 0===a?void 0:a.school_id).data,c=Object(s.useState)({}),o=Object(j.a)(c,2),i=o[0],r=o[1],m={name:"",address:"",logo:"",zip_code:"",admin_email:"",admin_mobile:""},h=Object(s.useState)({}),v=Object(j.a)(h,2),O=v[0],f=v[1];Object(s.useEffect)((function(){f(m),r(m)}),[null===a||void 0===a?void 0:a.page_type]),Object(s.useEffect)((function(){void 0!==n&&r(n)}),[n]);var x=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},o=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/school/create"),e,c)}),{onSuccess:function(){a.invalidateQueries("schools"),o("School added successfully",{appearance:"success",autoDismiss:!0}),n.push("/admin/school-management")}})}(),g=function(e){var a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(l.g)(),c=Object($.b)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(s.useContext)(C).state.access_token}},i=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.school_id;return F.a.patch("".concat(I,"v1/school/update/").concat(t),e,o)}),{onSuccess:function(){c.invalidateQueries("schools"),i("Category Updated successfully",{appearance:"success",autoDismiss:!0}),n.push("".concat(t))}})}(),_=Z(),N=function(){var e=Object(u.a)(d.a.mark((function e(s){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),O.name=(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.name:null===O||void 0===O?void 0:O.name,O.admin_name=(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.admin_name:null===O||void 0===O?void 0:O.admin_name,O.admin_password=(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.admin_password:null===O||void 0===O?void 0:O.admin_password,O.slug=q((null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.name:null===O||void 0===O?void 0:O.name),!(null===a||void 0===a?void 0:a.school_id)){e.next=10;break}return e.next=8,g.mutate(i);case 8:e.next=36;break;case 10:if(""!=(null===O||void 0===O?void 0:O.name)){e.next=14;break}t("Please Enter school name",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 14:if(""!=(null===O||void 0===O?void 0:O.admin_email)){e.next=18;break}t("Please provide admin email",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 18:if(!1!==S(null===O||void 0===O?void 0:O.zip_code)){e.next=22;break}t("Please enter numbers only",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 22:if(!((null===O||void 0===O||null===(n=O.zip_code)||void 0===n?void 0:n.length)<6)){e.next=26;break}t("Please provide valid zip code",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 26:if(!((null===O||void 0===O||null===(c=O.mobile)||void 0===c?void 0:c.length)<10)){e.next=30;break}t("Please enter valid mobile number",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 30:if(!1!==S(null===O||void 0===O?void 0:O.mobile)){e.next=34;break}t("Please enter valid mobile number",{appearance:"error",autoDismiss:!0}),e.next=36;break;case 34:return e.next=36,x.mutate(O);case 36:f({}),r({});case 38:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function y(){return(y=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(null===a||void 0===a?void 0:a.school_id)){e.next=5;break}return O.school_id=null===a||void 0===a?void 0:a.school_id,e.next=5,_.mutate(O);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.school_id)?r(Object(b.a)(Object(b.a)({},i),{},Object(W.a)({},t.target.name,t.target.value))):f(Object(b.a)(Object(b.a)({},O),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var a=(e=e||window.event).which?e.which:e.keyCode;return!(a>31&&(a<48||a>57))}function A(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(d.a.mark((function e(a){var s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===S(a.target.value)?(t("Please provide valid ".concat(a.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(a.target.name))[0].innerText="",document.getElementsByName("".concat(a.target.name))[0].focus()):("mobile"===a.target.name&&(null===(s=a.target.value)||void 0===s?void 0:s.length)<10||"zip_code"===a.target.name&&(null===(n=a.target.value)||void 0===n?void 0:n.length)<6)&&(t("Please provide valid ".concat(a.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(a.target.name))[0].innerHTML=null,document.getElementsByName("".concat(a.target.name))[0].focus());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a.target.value).toLowerCase())&&(t("Please provide valid ".concat(a.target.name),{appearance:"error",autoDismiss:!0}),document.getElementsByName("".concat(a.target.name))[0].innerHTML=null,document.getElementsByName("".concat(a.target.name))[0].focus());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(u.a)(d.a.mark((function e(t){var s,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s=t.target.value,n=s.split("/"),c=n[5],s.length>0&&((null===a||void 0===a?void 0:a.school_id)?r(Object(b.a)(Object(b.a)({},i),{},{logo:c})):f(Object(b.a)(Object(b.a)({},O),{},{logo:c})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New School"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:N,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"name",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.name:null===O||void 0===O?void 0:O.name,onChange:k,autoComplete:"no-password",placeholder:"School Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"domain",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.domain:null===O||void 0===O?void 0:O.domain,onChange:k,autoComplete:"no-password",placeholder:"Domain Name"})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"text",className:"form-control",name:"logo",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.logo:null===O||void 0===O?void 0:O.logo,onChange:k,onBlur:function(e){return z.apply(this,arguments)},autoComplete:"no-password",placeholder:"School logo image urls"}),Object(p.jsx)("span",{style:{fontSize:"0.7rem"},children:"Note: Please copy public image url."})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"address",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.address:null===O||void 0===O?void 0:O.address,onChange:k,autoComplete:"no-password",placeholder:"address"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"zip_code",maxLength:6,value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.zip_code:null===O||void 0===O?void 0:O.zip_code,onChange:k,autoComplete:"no-password",onBlur:A,placeholder:"zip_code"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"admin_name",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.admin_name:null===O||void 0===O?void 0:O.admin_name,onChange:k,autoComplete:"no-password",placeholder:"admin_name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"admin_email",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.admin_email:null===O||void 0===O?void 0:O.admin_email,onChange:k,onBlur:function(e){return L.apply(this,arguments)},autoComplete:"no-password",placeholder:"admin_email"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"admin_mobile",value:(null===a||void 0===a?void 0:a.school_id)?null===i||void 0===i?void 0:i.admin_mobile:null===O||void 0===O?void 0:O.admin_mobile,onChange:k,maxLength:10,onBlur:A,autoComplete:"no-password",placeholder:"admin_mobile"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"admin_password",onChange:k,autoComplete:"no-password",placeholder:"admin_password"})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark br-5",children:x.isLoading||g.isLoading?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.school_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"}),"Update"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"}),"Save"]})})}),(null===a||void 0===a?void 0:a.school_id)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("button",{type:"button",className:"btn btn-sm bg-danger br-5 text-white ml-2",onClick:function(a){a.preventDefault(),f({}),r({}),e.push("/admin/school-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(p.jsxs)("button",{type:"button",className:"btn btn-sm bg-warning br-5 text-white ml-2",onClick:function(e){return y.apply(this,arguments)},children:[_.isLoading?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(p.jsx)("span",{className:"fa fa-trash mr-2"}),"Delete"]})]})]})]})]})}function K(){var e=Object(s.useContext)(C).state;return Object(T.a)("schools",Object(u.a)(d.a.mark((function a(){var t;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/school/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return t=a.sent,a.abrupt("return",t.data.data);case 5:case"end":return a.stop()}}),a)}))))}function V(){var e=K(),a=e.data,t=e.isLoading,s=Object(l.g)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New School"]}),Object(p.jsx)("hr",{className:"mt-1"}),t&&Object(p.jsx)(B,{isLoading:t}),Object(p.jsx)("div",{className:"col-md-12 row",style:{height:"auto !important",maxHeight:"400px",overflow:"scroll"},children:!t&&(null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)("div",{className:"card mb-2 pl-3 pr-3 col-md-6 no-gutter",style:{display:"flex",justifyContent:"space-between"},children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3 pl-2 pt-2",children:Object(p.jsx)("img",{src:"https://drive.google.com/uc?export=view&id=".concat(null===e||void 0===e?void 0:e.logo),style:{width:"90px",height:"90px"},className:"img-responsive"})}),Object(p.jsxs)("div",{className:"col-md-9 pr-3 pl-3",children:[Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"name-label",children:"School Name:"}),Object(p.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.name})]}),Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"name-label",children:"School Domain:"}),Object(p.jsx)("div",{className:"name-main",children:Object(p.jsx)("a",{href:"http://www.".concat(null===e||void 0===e?void 0:e.domain,".com"),target:"__blank",children:null===e||void 0===e?void 0:e.domain})})]}),Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"name-label",children:"Zipcode:"}),Object(p.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.zip_code})]}),Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"name-label",children:"Admin Email:"}),Object(p.jsx)("div",{className:"name-main text-lower",children:null===e||void 0===e?void 0:e.admin_email})]}),Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"name-label",children:"Admin Mobile:"}),Object(p.jsx)("div",{className:"name-main",children:null===e||void 0===e?void 0:e.admin_mobile})]})]}),Object(p.jsxs)("div",{className:"col-md-12 pl-0 pr-0 pb-2",children:[Object(p.jsx)("hr",{className:"mb-1"}),Object(p.jsx)("div",{className:"pl-2 pr-2",children:Object(p.jsx)("span",{className:"fa fa-pencil text-warning mr-2 pointer",onClick:function(a){s.push("/admin/school-management/modify-school/".concat(null===e||void 0===e?void 0:e._id))}})})]})]})},null===e||void 0===e?void 0:e._id)})))})]})}t(98);function X(){var e,a=Object(l.g)(),t=Object(l.i)(),n=(Object(l.h)().pathname,Object(R.useToasts)().addToast,Object(s.useContext)(C).state,Object(s.useState)("")),c=Object(j.a)(n,2),o=c[0],i=c[1],r=Object(s.useState)(""),m=Object(j.a)(r,2),h=m[0],v=m[1],O=Object(s.useState)(!1),f=Object(j.a)(O,2),x=f[0],g=f[1],_=function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.module_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/module/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,N=Object(s.useState)(),y=Object(j.a)(N,2),k=y[0],w=y[1],S=Object(s.useState)({}),A=Object(j.a)(S,2),D=A[0];A[1];function L(){i(""),v(""),w({}),g(!1)}Object(s.useEffect)((function(){w(_)}),[_]);var z=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=(Object(l.i)(),Object(l.h)().pathname),c=Object(l.g)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},i=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/module/create"),e,o)}),{onSuccess:function(){a.invalidateQueries("app-modules"),i("App Module added successfully",{appearance:"success",autoDismiss:!0}),c.push("".concat(n))},onError:function(){i("Error White Creating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),B=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=Object(l.i)(),c=(Object(l.h)().pathname,Object(l.g)()),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},i=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.patch("".concat(I,"v1/module/update/").concat(null===n||void 0===n?void 0:n.module_id),e,o)}),{onSuccess:function(){a.invalidateQueries("app-modules"),i("Module updated successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/app-module")},onError:function(){i("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),P=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=Object(l.i)(),c=(Object(l.h)().pathname,Object(l.g)()),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},i=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/module/delete/").concat(null===n||void 0===n?void 0:n.module_id),e,o)}),{onSuccess:function(){a.invalidateQueries("app-modules"),i("Module deleted successfully",{appearance:"success",autoDismiss:!0}),c.push("/admin/app-module")},onError:function(){i("Error White Updating Modules",{appearance:"error",autoDismiss:!0})},retry:3})}(),U=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g(!0),D.module_name=(null===t||void 0===t?void 0:t.module_id)?null===k||void 0===k?void 0:k.module_name:o,D.module_slug=q((null===t||void 0===t?void 0:t.module_id)?null===k||void 0===k?void 0:k.module_name:o),D.module_icon=(null===t||void 0===t?void 0:t.module_id)?null===k||void 0===k?void 0:k.module_icon:h,!(null===t||void 0===t?void 0:t.module_id)){e.next=10;break}return e.next=8,B.mutate(D);case 8:e.next=12;break;case 10:return e.next=12,z.mutate(D);case 12:L();case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function E(){return(E=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),D.module_id=null===t||void 0===t?void 0:t.module_id,e.next=4,P.mutate(D);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Create App Module"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:U,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",value:(null===t||void 0===t?void 0:t.module_id)?null===k||void 0===k?void 0:k.module_name:o,onChange:function(e){(null===t||void 0===t?void 0:t.module_id)?w(Object(b.a)(Object(b.a)({},k),{},{module_name:e.target.value})):i(e.target.value)},placeholder:"Module Name"})}),Object(p.jsxs)("div",{className:"form-group p-rel",children:[Object(p.jsx)("input",{type:"text",className:"form-control ".concat((null===t||void 0===t?void 0:t.module_id)?"pl6x":""),value:(null===t||void 0===t?void 0:t.module_id)?null===k||void 0===k?void 0:k.module_icon:h,placeholder:"Module Icon",onChange:function(e){(null===t||void 0===t?void 0:t.module_id)?w(Object(b.a)(Object(b.a)({},k),{},{module_icon:e.target.value})):v(e.target.value)}}),Object(p.jsx)("span",{className:"fa p-abs tl10 ".concat(null===k||void 0===k?void 0:k.module_icon)})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark br-5",children:x?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})}):Object(p.jsx)(p.Fragment,{children:(null===t||void 0===t?void 0:t.module_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===t||void 0===t?void 0:t.module_id)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("button",{className:"btn btn-sm dark bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),L(),w({}),a.push("/admin/app-module")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(p.jsx)("button",{className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return E.apply(this,arguments)},disbaled:null===P||void 0===P||null===(e=P.isLoading)||void 0===e?void 0:e.toString(),children:(null===P||void 0===P?void 0:P.isLoading)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})]})]})]})]})}function ee(e){var a=e.module,t=Object(l.g)();return Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:[Object(p.jsx)("span",{className:"fa fa-pencil-square mr-2 text-success pointer",onClick:function(e){e.preventDefault(),t.push("/admin/app-module/".concat(null===a||void 0===a?void 0:a._id))}}),Object(p.jsx)("span",{className:"fa fa-eye mr-2 pointer text-danger",onClick:function(e){return t.push("/admin/".concat(null===a||void 0===a?void 0:a.module_slug))}})]})}function ae(e){var a=e.module;return Object(p.jsx)("div",{className:"lg-card",children:Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsxs)("div",{className:"name-main",children:[Object(p.jsx)("span",{className:"fa ".concat(null===a||void 0===a?void 0:a.module_icon," mt-1 mr-2")}),null===a||void 0===a?void 0:a.module_name]}),Object(p.jsx)(ee,{module:a})]})})}function te(){var e=z(),a=e.data,t=e.isLoading;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Modules"]}),Object(p.jsx)("hr",{className:"mt-1"}),t&&Object(p.jsx)(B,{isLoading:t}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container pr-0",children:null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)(ae,{module:e},null===e||void 0===e?void 0:e._id)}))})]})}t(99);function se(){var e=Object(s.useContext)(C).state;return Object(T.a)("roles",Object(u.a)(d.a.mark((function a(){var t;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/role/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return t=a.sent,a.abrupt("return",t.data.data);case 5:case"end":return a.stop()}}),a)}))))}function ne(){var e,a=Object(l.g)(),t=Object(l.i)(),n=(Object(l.h)(),Object(s.useContext)(C).state,Object(s.useState)("")),c=Object(j.a)(n,2),o=c[0],i=c[1],r=Object(s.useState)(!1),m=Object(j.a)(r,2),h=(m[0],m[1]),v=function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.role_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/role/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,O=se().data,f=Object(s.useState)(),x=Object(j.a)(f,2),g=x[0],_=x[1];Object(s.useEffect)((function(){w(O&&(null===O||void 0===O?void 0:O.length))}),[O]);var N=Object(s.useState)(),y=Object(j.a)(N,2),k=y[0],w=y[1];function S(){return(S=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),(null===t||void 0===t?void 0:t.role_id)?_(Object(b.a)(Object(b.a)({},g),{},{role_id:(null===g||void 0===g?void 0:g.role_id)+1})):w(void 0===k?1:+k+1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),(null===t||void 0===t?void 0:t.role_id)?k===(null===g||void 0===g?void 0:g.role_id)?_(Object(b.a)(Object(b.a)({},g),{},{role_id:k})):_(Object(b.a)(Object(b.a)({},g),{},{role_id:k-1})):k>1&&w(k-1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=Object(s.useState)({}),L=Object(j.a)(D,2),z=L[0],B=L[1];function P(){i(""),w(O&&(null===O||void 0===O?void 0:O.length)),_({})}Object(s.useEffect)((function(){w(null===v||void 0===v?void 0:v.role_id),_(v)}),[v]);var U=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=(Object(l.i)(),Object(l.h)().pathname,Object(l.g)()),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},o=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/role/create"),e,c)}),{onSuccess:function(){a.invalidateQueries("roles"),o("Roles added successfully",{appearance:"success",autoDismiss:!0}),n.push("/admin/app-roles")}})}(),E=function(e){var a=Object(l.i)(),t=(Object(l.h)().pathname,Object(l.g)()),n=Object($.b)(),c={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(s.useContext)(C).state.access_token}},o=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.role_id;return F.a.patch("".concat(I,"v1/role/update/").concat(t),e,c)}),{onSuccess:function(){n.invalidateQueries("roles"),o("Category Updated successfully",{appearance:"success",autoDismiss:!0}),t.push("/admin/app-roles")}})}(),Q=Z(),M=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),h(!0),(null===g||void 0===g?void 0:g.role_name)!==o&&(null===t||void 0===t?void 0:t.role_id)?(z.role_name=null===g||void 0===g?void 0:g.role_name,z.role_slug=q(null===g||void 0===g?void 0:g.role_name)):(z.role_name=o,z.role_slug=q(o)),(null===g||void 0===g?void 0:g.role_id)!==k&&(null===t||void 0===t?void 0:t.role_id)?z.role_id=k:(null===g||void 0===g?void 0:g.role_id)===k&&(null===t||void 0===t?void 0:t.role_id)?z.role_id=null===g||void 0===g?void 0:g.role_id:z.role_id=k,!(null===t||void 0===t?void 0:t.role_id)){e.next=9;break}return e.next=7,E.mutate(z);case 7:e.next=11;break;case 9:return e.next=11,U.mutate(z);case 11:P();case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function H(){return(H=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),B(Object(b.a)(Object(b.a)({},z),{},{role_id:null===t||void 0===t?void 0:t.role_id})),e.next=4,Q.mutate(z);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Create App Role"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:M,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",value:(null===t||void 0===t?void 0:t.role_id)?null===g||void 0===g?void 0:g.role_name:o,onChange:function(e){(null===t||void 0===t?void 0:t.role_id)?_(Object(b.a)(Object(b.a)({},g),{},{role_name:e.target.value})):i(e.target.value)},placeholder:"Role Name"})}),Object(p.jsxs)("div",{className:"form-group p-rel flex",children:[Object(p.jsx)("input",{className:"form-control",type:"text",value:(null===t||void 0===t?void 0:t.role_id)?null===g||void 0===g?void 0:g.role_id:k,readOnly:!0}),Object(p.jsx)("button",{onClick:function(e){return S.apply(this,arguments)},type:"button",className:"bi bi-arrow-up dark btn btn-sm",style:{fontSize:"0.9rem"},activestyle:"outline: none"}),Object(p.jsx)("button",{onClick:function(e){return A.apply(this,arguments)},type:"button",className:"bi bi-arrow-down red btn btn-sm",style:{fontSize:"0.9rem"},activestyle:"outline: none"})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark br-5",disabled:(null===U||void 0===U?void 0:U.isLoading)||(null===E||void 0===E?void 0:E.isLoading),children:(null===U||void 0===U?void 0:U.isLoading)||(null===E||void 0===E?void 0:E.isLoading)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===t||void 0===t?void 0:t.role_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===t||void 0===t?void 0:t.role_id)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("button",{type:"button",className:"btn btn-sm bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),P(),_({}),a.push("/admin/app-roles")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),Object(p.jsx)("button",{type:"button",className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return H.apply(this,arguments)},disbaled:null===Q||void 0===Q||null===(e=Q.isLoading)||void 0===e?void 0:e.toString(),children:(null===Q||void 0===Q?void 0:Q.isLoading)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})]})]})]})]})}function ce(e){var a=e.role,t=Object(l.g)();return Object(p.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(e){e.preventDefault(),t.push("/admin/app-roles/".concat(null===a||void 0===a?void 0:a._id))},children:[Object(p.jsx)("span",{className:"fa fa-pencil-square mr-2"}),"Edit"]})})}function oe(e){var a=e.role;return Object(p.jsx)("div",{className:"lg-card",children:Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsxs)("div",{className:"name-main",children:["RoleName: ",null===a||void 0===a?void 0:a.role_name]}),Object(p.jsxs)("div",{className:"name-main",children:["RoleID: ",null===a||void 0===a?void 0:a.role_id]}),Object(p.jsx)(ce,{role:a})]})})}function ie(){var e=se(),a=e.data,t=e.isLoading;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Roles"]}),Object(p.jsx)("hr",{className:"mt-1"}),t&&Object(p.jsx)(B,{isLoading:t}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)(oe,{role:e},null===e||void 0===e?void 0:e._id)}))})]})}t(100);function le(){var e=Object(s.useContext)(C).state,a=Object(l.i)(),t=null===a||void 0===a?void 0:a.school_slug,n=null===a||void 0===a?void 0:a.role_slug;return Object(T.a)(["permissions-".concat(t,"-").concat(n)],Object(u.a)(d.a.mark((function a(){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===e||void 0===e?void 0:e.access_token)||void 0===t||void 0===n){a.next=5;break}return a.next=3,F.a.get("".concat(I,"v1/permission/view-all/").concat(t,"/").concat(n),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return s=a.sent,a.abrupt("return",s.data.data);case 5:case"end":return a.stop()}}),a)}))))}function re(){var e,a=Object(l.g)(),t=Object(l.i)(),n=Object(s.useState)(!1),c=Object(j.a)(n,2),o=(c[0],c[1]),i=(function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.permission_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-permission-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/permission/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,le().data,K().data),r=se().data,m=z().data,h=Object(s.useState)(),v=Object(j.a)(h,2),O=(v[0],v[1]),f=Object(s.useState)(new Array(null===m||void 0===m?void 0:m.length).fill({checked:!1})),x=Object(j.a)(f,2),g=(x[0],x[1],Object(s.useState)({})),_=Object(j.a)(g,2),N=_[0],y=_[1],k=Object(s.useState)([]),w=Object(j.a)(k,2);w[0],w[1];function S(){O({}),Array.from(document.querySelectorAll(".checkbox")).map((function(e){e.checked=!1}))}var A=function(e){var a=Object($.b)(),t=Object(s.useContext)(C).state,n=Object(l.i)(),c=Object(l.h)().pathname,o=Object(l.g)(),i={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}},r=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/permission/create"),e,i)}),{onSuccess:function(){a.invalidateQueries(["permissions-".concat(null===n||void 0===n?void 0:n.school_slug,"-").concat(null===n||void 0===n?void 0:n.role_slug)]),r("Permission added successfully",{appearance:"success",autoDismiss:!0}),o.push("".concat(c))}})}(),D=function(e){var a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(l.g)(),c=Object($.b)(),o={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(s.useContext)(C).state.access_token}},i=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.permission_id;return F.a.patch("".concat(I,"v1/permission/update/").concat(t),e,o)}),{onSuccess:function(){c.invalidateQueries("permissions"),i("Permissions Updated successfully",{appearance:"success",autoDismiss:!0}),n.push("".concat(t))}})}(),L=function(){Object(l.h)().pathname;var e=Object(l.g)(),a=Object($.b)(),t={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+Object(s.useContext)(C).state.access_token}},n=Object(R.useToasts)().addToast;return Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/permission/delete"),e,t)}),{onSuccess:function(){a.invalidateQueries(["permissions"]),e.push("/admin/app-permissions"),n("Permission deleted successfully",{appearance:"success",autoDismiss:!0})}})}(),B=function(){var e=Object(u.a)(d.a.mark((function e(a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o(!0),!(null===t||void 0===t?void 0:t.permission_id)){e.next=7;break}return e.next=5,D.mutate(N);case 5:e.next=15;break;case 7:return s=[],Array.from(document.querySelectorAll(".checkbox")).map((function(e){if(!0===e.checked){var a=e.value,n=a.split("_")[0],c=a.split("_")[1],o=a.split("_")[2];s.push({role_id:null===t||void 0===t?void 0:t.role_id,role_slug:null===t||void 0===t?void 0:t.role_slug,school_id:null===t||void 0===t?void 0:t.school_id,school_slug:null===t||void 0===t?void 0:t.school_slug,module_id:n,module_slug:c,module_icon:o})}})),console.log(s),N.school_id=null===t||void 0===t?void 0:t.school_id,N.role_id=null===t||void 0===t?void 0:t.role_id,N.modules=s,e.next=15,A.mutate(N);case 15:S();case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function P(){return(P=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(Object(b.a)(Object(b.a)({},N),{},{permission_id:null===t||void 0===t?void 0:t.permission_id})),e.next=4,L.mutate(N);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){e.preventDefault();var a=e.target.value.split("_")[0];Array.from(document.querySelectorAll(".checkbox")).map((function(e){(null===e||void 0===e?void 0:e._id)===a&&(e.checked=!0)}))}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Permission"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:B,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control",value:"".concat(null===t||void 0===t?void 0:t.role_id,"_").concat(null===t||void 0===t?void 0:t.role_slug),onChange:function(e){if("_"!==e.target.value){var t=e.target.value,s=t.split("_")[0],n=t.split("_")[1];a.push("/admin/app-permissions/".concat(s,"/").concat(n))}else a.push("/admin/app-permissions")},children:[Object(p.jsx)("option",{value:"_",children:"Select Roles"}),null===r||void 0===r?void 0:r.map((function(e){if("master-admin"!==(null===e||void 0===e?void 0:e.role_slug))return Object(p.jsx)("option",{value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.role_slug),children:null===e||void 0===e?void 0:e.role_name},null===e||void 0===e?void 0:e._id)}))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control",value:"".concat(null===t||void 0===t?void 0:t.school_id,"_").concat(null===t||void 0===t?void 0:t.school_slug),onChange:function(e){if("_"!==e.target.value){var s=e.target.value,n=s.split("_")[0],c=s.split("_")[1];a.push("/admin/app-permissions/".concat(null===t||void 0===t?void 0:t.role_id,"/").concat(null===t||void 0===t?void 0:t.role_slug,"/").concat(n,"/").concat(c))}else a.push("/admin/app-permissions")},children:[Object(p.jsx)("option",{value:"_",children:"Select School"}),null===i||void 0===i?void 0:i.map((function(e){return Object(p.jsx)("option",{value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.slug),children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("div",{className:"col-md-12 pl-0 pr-2",style:{minHeight:"280px",maxHeight:"280px",overflow:"scroll"},children:null===m||void 0===m?void 0:m.map((function(e,a){var t;return Object(p.jsx)("div",{className:"card pl-2 pt-0 pb-0 mb-2",children:Object(p.jsxs)("label",{className:"pb-0 mb-0",htmlFor:"custom-checkbox-".concat(a),children:[Object(p.jsx)("input",{className:"mr-2 checkbox",type:"checkbox",id:"custom-checkbox-".concat(a),name:"module-".concat(null===e||void 0===e?void 0:e._id),value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.module_slug,"_").concat(null===e||void 0===e?void 0:e.module_icon),onChange:U,checked:null===e||void 0===e||null===(t=e.checked)||void 0===t?void 0:t.toString()}),Object(p.jsx)("span",{className:"bi ".concat(null===e||void 0===e?void 0:e.module_icon," mr-2")}),null===e||void 0===e?void 0:e.module_name]})},null===e||void 0===e?void 0:e._id)}))})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark br-5",disabled:(null===A||void 0===A?void 0:A.isLoading)||(null===D||void 0===D?void 0:D.isLoading),children:(null===A||void 0===A?void 0:A.isLoading)||(null===D||void 0===D?void 0:D.isLoading)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===t||void 0===t?void 0:t.permission_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save"]})})}),(null===t||void 0===t?void 0:t.school_id)&&(null===t||void 0===t?void 0:t.role_id)&&Object(p.jsxs)("button",{type:"button",className:"btn btn-sm bg-warning ml-2 br-5",onClick:function(e){e.preventDefault(),S(),a.push("/admin/app-permissions")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]}),(null===t||void 0===t?void 0:t.permission_id)&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:"button",className:"btn btn-sm dark bg-danger ml-2 br-5",onClick:function(e){return P.apply(this,arguments)},disbaled:null===L||void 0===L||null===(e=L.isLoading)||void 0===e?void 0:e.toString(),children:(null===L||void 0===L?void 0:L.isLoading)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"})," ... "]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-trash mr-2"})," Delete"]})})})]})]})]})}function de(e){e.permission,Object(l.g)();return Object(p.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:Object(p.jsx)("button",{className:"btn btn-sm dark",children:Object(p.jsx)("span",{className:"fa fa-trash"})})})}function ue(e){var a=e.permission;return Object(p.jsx)("div",{className:"lg-card",children:Object(p.jsxs)("div",{className:"admin-name",children:[Object(p.jsx)("div",{className:"label-name",children:"Module Name:"}),Object(p.jsxs)("div",{className:"label-name",children:[Object(p.jsx)("span",{className:"fa ".concat(null===a||void 0===a?void 0:a.module_icon," mt-1 mr-2")}),null===a||void 0===a?void 0:a.module_slug]}),Object(p.jsx)(de,{permission:a})]})})}function je(){var e,a,t=le(),s=t.data,n=t.isLoading,c=Object(l.i)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Permissions -",Object(p.jsx)("span",{className:"badge-success br-5 ml-2 p-1",style:{fontSize:"0.90rem"},children:null===c||void 0===c||null===(e=c.school_slug)||void 0===e?void 0:e.replaceAll("-"," ")}),Object(p.jsx)("span",{className:"badge-danger br-5 ml-2 p-1",style:{fontSize:"0.90rem"},children:null===c||void 0===c||null===(a=c.role_slug)||void 0===a?void 0:a.replaceAll("-"," ")})]}),Object(p.jsx)("hr",{className:"mt-1"}),n&&Object(p.jsx)(B,{isLoading:n}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:null===s||void 0===s?void 0:s.map((function(e){return Object(p.jsx)(ue,{permission:e},null===e||void 0===e?void 0:e._id)}))})]})}t(101);function me(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object(s.useState)(!1),i=Object(j.a)(o,2),r=i[0],m=i[1],h=Object(s.useState)("admin"),v=Object(j.a)(h,2),O=(v[0],v[1],function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.class_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/class/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data),f=K(),x=f.data,g=f.isLoading,_=Object(s.useState)({}),N=Object(j.a)(_,2),y=N[0],k=N[1],w=Object(s.useState)(),S=Object(j.a)(w,2),A=(S[0],S[1],{class_name:"",section:"",capacity:"",class_teacher:"",school_id:"",teacher_id:""}),D=Object(s.useState)(A),L=Object(j.a)(D,2),z=L[0],B=L[1];Object(s.useEffect)((function(){k(O)}),[O]);var P=Object($.b)(),U={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},E=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/class/create"),e,U)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;P.invalidateQueries("classes-".concat(s)),m(!1),B(A),e.push("".concat(t)),n("Class added successfully",{appearance:"success",autoDismiss:!0})}}),Q=Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.class_id;return F.a.patch("".concat(I,"v1/class/update/").concat(t),e,U)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;P.invalidateQueries("classes-".concat(s)),m(!1),B(A),e.push("".concat(t)),n("Class Updated successfully",{appearance:"success",autoDismiss:!0})}}),M=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===a||void 0===a?void 0:a.class_id)){e.next=7;break}return e.next=5,Q.mutate(y);case 5:e.next=15;break;case 7:if(z.school_id=a.school_id?a.school_id:"",""!=z.school_id){e.next=13;break}m(!1),n("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=15;break;case 13:return e.next=15,E.mutate(z);case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function H(e){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.class_id)?k(Object(b.a)(Object(b.a)({},y),{},Object(W.a)({},t.target.name,t.target.value))):B(Object(b.a)(Object(b.a)({},z),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.class_id)?(k(Object(b.a)(Object(b.a)({},y),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/class-management/select-school/".concat(s.target.value,"/").concat(a.class_id))):(B(Object(b.a)(Object(b.a)({},z),{},Object(W.a)({},"school_id",s.target.value))),e.push("/admin/class-management/select-school/".concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Class"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:M,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return q.apply(this,arguments)},value:a.school_id?a.school_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select School"}),!g&&(null===x||void 0===x?void 0:x.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"class_name",value:(null===a||void 0===a?void 0:a.class_id)?null===y||void 0===y?void 0:y.class_name:null===z||void 0===z?void 0:z.class_name,onChange:H,placeholder:"Class Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"section",value:(null===a||void 0===a?void 0:a.class_id)?null===y||void 0===y?void 0:y.section:null===z||void 0===z?void 0:z.section,onChange:H,placeholder:"Section"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"number",className:"form-control",name:"capacity",value:(null===a||void 0===a?void 0:a.class_id)?null===y||void 0===y?void 0:y.capacity:null===z||void 0===z?void 0:z.capacity,onChange:H,placeholder:"Class Capacity"})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.class_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update Class"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save Class"]})})}),((null===a||void 0===a?void 0:a.class_id)||(null===a||void 0===a?void 0:a.school_id))&&Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/class-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function be(){var e=new FormData,a=Object(s.useState)(!1),t=Object(j.a)(a,2),n=t[0],c=t[1],o=Object(s.useState)(!0),i=Object(j.a)(o,2),r=i[0],m=i[1],b=Object(s.useContext)(C).state,h=Object(R.useToasts)().addToast,v=Object(s.useState)(null),O=Object(j.a)(v,2),f=O[0],x=O[1],g=Object(s.useState)(),_=Object(j.a)(g,2),N=_[0],y=_[1],k=Object(s.useState)(!1),w=Object(j.a)(k,2),S=w[0],A=w[1],D=Object(s.useState)("admin"),T=Object(j.a)(D,2),L=(T[0],T[1],Object(l.g)()),z=K(),B=z.data,P=z.isLoading,U=Object($.b)(),E={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+b.access_token}};function Q(){return(Q=Object(u.a)(d.a.mark((function a(t){var s,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=t.target.files[0].name,console.log("file onchange ",s),n=s.split(".")[1],console.log(n),"csv"===n?(m(!1),x(t.target.files[0]),e.append("test","testdata")):(m(!0),h("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var M=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/class/upload"),e,E)}),{onSuccess:function(){U.invalidateQueries("classes"),c(!1),h("Classes added successfully",{appearance:"success",autoDismiss:!0})}}),H=function(){var a=Object(u.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),S){a.next=4;break}return h("Please Select a School",{appearance:"error",autoDismiss:!0}),a.abrupt("return");case 4:return e.append("file",f),e.append("school_id",N),a.next=8,M.mutate(e);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Classes"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)("a",{href:"/sampledata/classes.csv",download:!0,children:"Download Sample File"}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:H,method:"POST",encType:"multipart/form-data",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){y(e.target.value),A(!0)},children:[Object(p.jsx)("option",{children:"Select School"}),!P&&(null===B||void 0===B?void 0:B.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return Q.apply(this,arguments)},placeholder:"Upload .csv"}),Object(p.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",disabled:r,children:n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(e){e.preventDefault(),L.push("/admin/class-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function pe(){var e=Object(s.useContext)(C).state,a=Object(l.i)(),t=a.school_id?"classes-".concat(a.school_id):"classes";return Object(T.a)(t,Object(u.a)(d.a.mark((function t(){var s,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=12;break}if(a.school_id){t.next=8;break}return t.next=4,F.a.get("".concat(I,"v1/class/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 4:return s=t.sent,t.abrupt("return",s.data.data);case 8:return t.next=10,F.a.get("".concat(I,"v1/class/class-by-school-id/").concat(a.school_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 10:return n=t.sent,t.abrupt("return",n.data.data);case 12:case"end":return t.stop()}}),t)}))))}function he(){var e,a=Object(l.i)(),t=Object(l.g)(),n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object($.b)(),i=pe(),r=i.data,j=(i.isLoading,K()),m=j.data,b=(j.schoolIsLoading,null===m||void 0===m?void 0:m.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===a||void 0===a?void 0:a.school_id)}))),h={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},v=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/class/delete/").concat(e),h)}),{onSuccess:function(){var e=(null===a||void 0===a?void 0:a.school_id)?"classes-".concat(a.school_id):"classes";o.invalidateQueries(e),n("Class Deleted successfully",{appearance:"success",autoDismiss:!0})}}),O=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.mutate(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),b&&(null===(e=b[0])||void 0===e?void 0:e.name)?"School: "+b[0].name:"All Classes"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"Class Name"}),Object(p.jsx)("th",{scope:"col",children:"Section"}),Object(p.jsx)("th",{scope:"col",children:"Capacity"}),Object(p.jsx)("th",{scope:"col",children:"Action"})]})}),Object(p.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e,s){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:s}),Object(p.jsx)("td",{children:e.class_name}),Object(p.jsx)("td",{children:e.section}),Object(p.jsx)("td",{children:e.capacity}),Object(p.jsxs)("td",{children:[Object(p.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(s){a.school_id?t.push("/admin/class-management/modify-class/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(null===e||void 0===e?void 0:e._id)):t.push("/admin/class-management/modify-class/".concat(e.school_id,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(p.jsx)("span",{className:"fa fa-edit"})}),Object(p.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return O(null===e||void 0===e?void 0:e._id)},children:Object(p.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function ve(){var e=Object(l.i)(),a=Object(l.g)();Object(l.h)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Class List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsxs)("div",{className:"col-md-12 row",children:[Object(p.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){a.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})}),Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(t){void 0==e.page_type?a.push("/admin/class-management/upload"):"upload"==e.page_type&&a.push("/admin/class-management")},children:[Object(p.jsx)("span",{className:"fa fa-upload"}),"   Upload Classes"]})]})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:"upload"==e.page_type?Object(p.jsx)(be,{}):Object(p.jsx)(me,{})}),Object(p.jsx)("div",{className:"col-md-9 ",children:Object(p.jsx)(he,{})})]})})]})})})}function Oe(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object(s.useState)(!1),i=Object(j.a)(o,2),r=i[0],m=i[1],h=function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.subject_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/subject/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,v=Object(s.useState)({}),O=Object(j.a)(v,2),f=O[0],x=O[1],g=K(),_=g.data,N=g.isLoading,y={subject_name:"",subject_slug:""},k=Object(s.useState)(y),w=Object(j.a)(k,2),S=w[0],A=w[1];Object(s.useEffect)((function(){x(h)}),[h]);var D=Object($.b)(),L={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},z=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/subject/create"),e,L)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;D.invalidateQueries("subjects-".concat(s)),m(!1),A(y),e.push("".concat(t)),n("Subject added successfully",{appearance:"success",autoDismiss:!0})}}),B=Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.subject_id;return F.a.patch("".concat(I,"v1/subject/update/").concat(t),e,L)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;D.invalidateQueries("subjects-".concat(s)),m(!1),A(y),e.push("".concat(t)),n("Subject Updated successfully",{appearance:"success",autoDismiss:!0})}}),P=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===a||void 0===a?void 0:a.subject_id)){e.next=7;break}return e.next=5,B.mutate(f);case 5:e.next=20;break;case 7:if(S.school_id=a.school_id?a.school_id:"",""!=S.school_id){e.next=13;break}m(!1),n("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 13:if(""!=S.subject_name){e.next=18;break}m(!1),n("Please Enter a Subject Name",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 18:return e.next=20,z.mutate(S);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function U(){return(U=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.subject_id)?x(Object(b.a)(Object(b.a)({},f),{},Object(W.a)({},t.target.name,t.target.value))):A(Object(b.a)(Object(b.a)({},S),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.subject_id)?(x(Object(b.a)(Object(b.a)({},f),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/subject-management/select-school/".concat(s.target.value,"/").concat(a.subject_id))):(A(Object(b.a)(Object(b.a)({},S),{},Object(W.a)({},"school_id",s.target.value))),e.push("/admin/subject-management/select-school/".concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Subejct"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:P,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return E.apply(this,arguments)},value:a.school_id?a.school_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select School"}),!N&&(null===_||void 0===_?void 0:_.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"subject_name",value:(null===a||void 0===a?void 0:a.subject_id)?null===f||void 0===f?void 0:f.subject_name:null===S||void 0===S?void 0:S.subject_name,onChange:function(e){return U.apply(this,arguments)},placeholder:"Subject Name"})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.subject_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update Subject"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save Subject"]})})}),((null===a||void 0===a?void 0:a.subject_id)||(null===a||void 0===a?void 0:a.school_id))&&Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/subject-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function fe(){var e=Object(s.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)(!0),o=Object(j.a)(c,2),i=o[0],r=o[1],m=Object(s.useContext)(C).state,b=Object(R.useToasts)().addToast,h=Object(s.useState)(null),v=Object(j.a)(h,2),O=v[0],f=v[1],x=Object(s.useState)(),g=Object(j.a)(x,2),_=g[0],N=g[1],y=Object(s.useState)(!1),k=Object(j.a)(y,2),w=k[0],S=k[1],A=Object(l.g)(),D=K(),T=D.data,L=D.isLoading,z=Object($.b)(),B={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+m.access_token}},P=new FormData;function U(){return(U=Object(u.a)(d.a.mark((function e(a){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files[0].name,console.log("file onchange ",t),s=t.split(".")[1],console.log(s),"csv"===s?(r(!1),f(a.target.files[0]),P.append("file",a.target.files[0]),P.append("test","testdata")):(r(!0),b("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=Object(Y.a)((function(e){return console.log(e.file),F.a.post("".concat(I,"v1/subject/upload"),e,B)}),{onSuccess:function(){z.invalidateQueries("subjects"),n(!1),b("Subjects added successfully",{appearance:"success",autoDismiss:!0})}}),Q=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),w){e.next=4;break}return b("Please Select a School",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 4:return P.append("file",O),P.append("school_id",_),e.next=8,E.mutate(P);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Subjects"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)("a",{href:"/sampledata/subjects.csv",download:!0,children:"Download Sample File"}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:Q,method:"POST",encType:"multipart/form-data",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){N(e.target.value),S(!0)},children:[Object(p.jsx)("option",{children:"Select School"}),!L&&(null===T||void 0===T?void 0:T.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return U.apply(this,arguments)},placeholder:"Upload .csv"}),Object(p.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(e){e.preventDefault(),A.push("/admin/subject-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function xe(){var e=Object(s.useContext)(C).state,a=Object(l.i)(),t=a.school_id?"subjects-".concat(a.school_id):"subjects";return Object(T.a)(t,Object(u.a)(d.a.mark((function t(){var s,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=12;break}if(a.school_id){t.next=8;break}return t.next=4,F.a.get("".concat(I,"v1/subject/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 4:return s=t.sent,t.abrupt("return",s.data.data);case 8:return t.next=10,F.a.get("".concat(I,"v1/subject/subject-by-school-id/").concat(a.school_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 10:return n=t.sent,t.abrupt("return",n.data.data);case 12:case"end":return t.stop()}}),t)}))))}function ge(){var e,a=Object(l.g)(),t=Object(R.useToasts)().addToast,n=Object(s.useContext)(C).state,c=Object($.b)(),o=Object(l.i)(),i=xe(),r=i.data,j=i.isLoading,m=K(),b=m.data,h=(m.schoolIsLoading,null===b||void 0===b?void 0:b.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===o||void 0===o?void 0:o.school_id)}))),v={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+n.access_token}},O=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/subject/delete/").concat(e),v)}),{onSuccess:function(){var e=(null===o||void 0===o?void 0:o.school_id)?"subjects-".concat(o.school_id):"subjects";c.invalidateQueries(e),t("Subject Deleted successfully",{appearance:"success",autoDismiss:!0})}}),f=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.mutate(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),h&&(null===(e=h[0])||void 0===e?void 0:e.name)?"School: "+h[0].name:"All Subjects"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)(B,{isLoading:j}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"Subject Name"}),Object(p.jsx)("th",{scope:"col",children:"Action"})]})}),Object(p.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:t}),Object(p.jsx)("td",{children:e.subject_name}),Object(p.jsxs)("td",{children:[Object(p.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){o.school_id?a.push("/admin/subject-management/modify-subject/".concat(null===o||void 0===o?void 0:o.school_id,"/").concat(null===e||void 0===e?void 0:e._id)):a.push("/admin/subject-management/modify-subject/".concat(e.school_id,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(p.jsx)("span",{className:"fa fa-edit"})}),Object(p.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return f(null===e||void 0===e?void 0:e._id)},children:Object(p.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function _e(){var e=Object(l.i)(),a=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Subjects List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsxs)("div",{className:"col-md-12 row",children:[Object(p.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){a.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})}),Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(t){void 0==e.page_type?a.push("/admin/subject-management/upload"):"upload"==e.page_type&&a.push("/admin/subject-management")},children:[Object(p.jsx)("span",{className:"fa fa-upload"}),"   Upload Subjects"]})]})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:"upload"==e.page_type?Object(p.jsx)(fe,{}):Object(p.jsx)(Oe,{})}),Object(p.jsx)("div",{className:"col-md-9 ",children:Object(p.jsx)(ge,{})})]})})]})})})}function Ne(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object(s.useState)(!1),i=Object(j.a)(o,2),r=i[0],m=i[1],h=function(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.student_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/student/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,v=/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/,O=Object(s.useState)({}),f=Object(j.a)(O,2),x=f[0],g=f[1],_=K(),N=_.data,y=_.schoolIsLoading,k=pe(),w=k.data,S=k.classesIsLoading,A={first_name:"",last_name:"",class_id:"",class_name:"",guardian_name:"",guardian_phone_no:"",school_id:"",username:""},D=Object(s.useState)(A),L=Object(j.a)(D,2),z=L[0],B=L[1];Object(s.useEffect)((function(){g(h)}),[h]);var P=Object($.b)(),U={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},E=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/student/create"),e,U)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id,c=null===a||void 0===a?void 0:a.class_id;P.invalidateQueries("students-".concat(s,"-").concat(c)),m(!1),B(A),e.push("".concat(t)),n("Student added successfully",{appearance:"success",autoDismiss:!0})}}),Q=Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.student_id;return F.a.patch("".concat(I,"v1/student/update/").concat(t),e,U)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id,c=null===a||void 0===a?void 0:a.class_id;P.invalidateQueries("students-".concat(s,"-").concat(c)),m(!1),B(A),e.push("".concat(t)),n("Student Updated successfully",{appearance:"success",autoDismiss:!0})}}),M=function(){var e=Object(u.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===a||void 0===a?void 0:a.student_id)){e.next=7;break}return e.next=5,Q.mutate(x);case 5:e.next=29;break;case 7:if(z.school_id=a.school_id?a.school_id:"",""!=z.school_id){e.next=13;break}m(!1),n("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=29;break;case 13:if(z.class_id=a.class_id?a.class_id:"",z.password="password",""!=z.class_id){e.next=20;break}m(!1),n("Please Select a Class",{appearance:"error",autoDismiss:!0}),e.next=29;break;case 20:if(v.test(z.guardian_phone_no)){e.next=25;break}m(!1),n("Please Enter a valid 10 digit phone no",{appearance:"error",autoDismiss:!0}),e.next=29;break;case 25:return s=N.filter((function(e){return e._id==a.school_id})),z.username=z.first_name+z.guardian_phone_no.substr(-4)+"@".concat(s[0].domain),e.next=29,E.mutate(z);case 29:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function H(e){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.student_id)?g(Object(b.a)(Object(b.a)({},x),{},Object(W.a)({},t.target.name,t.target.value))):B(Object(b.a)(Object(b.a)({},z),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.student_id)?(g(Object(b.a)(Object(b.a)({},x),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/student-management/select-school/".concat(s.target.value,"/").concat(null===a||void 0===a?void 0:a.class_id,"/").concat(null===a||void 0===a?void 0:a.student_id))):(B(Object(b.a)(Object(b.a)({},z),{},Object(W.a)({},"school_id",s.target.value))),a.class_id?e.push("/admin/student-management/select-school/".concat(s.target.value,"/").concat(null===a||void 0===a?void 0:a.class_id)):e.push("/admin/student-management/select-school/".concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return(Z=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.student_id)?(g(Object(b.a)(Object(b.a)({},x),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/student-management/select-school/".concat(null===a||void 0===a?void 0:a.school_id,"/").concat(s.target.value,"/").concat(null===a||void 0===a?void 0:a.student_id))):(B(Object(b.a)(Object(b.a)({},z),{},Object(W.a)({},"class_id",s.target.value))),e.push("/admin/student-management/select-school/".concat(a.school_id,"/").concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Student"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:M,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return q.apply(this,arguments)},value:a.school_id?a.school_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select School"}),!y&&(null===N||void 0===N?void 0:N.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"class_id",onChange:function(e){return Z.apply(this,arguments)},value:a.class_id?a.class_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select Class"}),!S&&(null===w||void 0===w?void 0:w.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.class_name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"first_name",value:(null===a||void 0===a?void 0:a.student_id)?null===x||void 0===x?void 0:x.first_name:null===z||void 0===z?void 0:z.first_name,onChange:H,placeholder:"First Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"last_name",value:(null===a||void 0===a?void 0:a.student_id)?null===x||void 0===x?void 0:x.last_name:null===z||void 0===z?void 0:z.last_name,onChange:H,placeholder:"Last Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"guardian_name",value:(null===a||void 0===a?void 0:a.student_id)?null===x||void 0===x?void 0:x.guardian_name:null===z||void 0===z?void 0:z.guardian_name,onChange:H,placeholder:"Guardian Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"guardian_phone_no",value:(null===a||void 0===a?void 0:a.student_id)?null===x||void 0===x?void 0:x.guardian_phone_no:null===z||void 0===z?void 0:z.guardian_phone_no,onChange:H,placeholder:"Guardian Phone"})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.student_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update Student"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save Student"]})})}),((null===a||void 0===a?void 0:a.student_id)||(null===a||void 0===a?void 0:a.school_id))&&Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/students-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function ye(){var e=Object(s.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)(!0),o=Object(j.a)(c,2),i=o[0],r=o[1],m=Object(l.i)(),h=Object(s.useContext)(C).state,v=Object(R.useToasts)().addToast,O=Object(s.useState)(null),f=Object(j.a)(O,2),x=f[0],g=f[1],_=Object(s.useState)(null),N=Object(j.a)(_,2),y=N[0],k=N[1],w=Object(s.useState)(null),S=Object(j.a)(w,2),A=S[0],D=S[1],T=Object(l.g)(),L=Object($.b)(),z={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+h.access_token}},B=new FormData,P=K(),U=P.data,E=P.schoolIsLoading,Q=pe(),M=Q.data,H=Q.classesIsLoading;function G(){return(G=Object(u.a)(d.a.mark((function e(a){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files[0].name,console.log("file onchange ",t),s=t.split(".")[1],console.log(s),"csv"===s?(r(!1),g(a.target.files[0]),B.append("file",a.target.files[0]),B.append("test","testdata")):(r(!0),v("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=Object(Y.a)((function(e){return console.log(e.file),F.a.post("".concat(I,"v1/student/upload"),e,z)}),{onSuccess:function(){null===m||void 0===m||m.school_id,null===m||void 0===m||m.class_id;L.invalidateQueries("students"),n(!1),v("Student added successfully",{appearance:"success",autoDismiss:!0})}}),Z=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),B.append("file",x),B.append("school_id",y),B.append("class_id",A),y){e.next=8;break}v("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=17;break;case 8:if(A){e.next=12;break}v("Please Select a Class",{appearance:"error",autoDismiss:!0}),e.next=17;break;case 12:return console.log(B.get("file")),console.log(B.get("school_id")),console.log(B.get("class_id")),e.next=17,q.mutate(B);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function J(){return(J=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===m||void 0===m?void 0:m.student_id)?setSingleStudent(Object(b.a)(Object(b.a)({},SingleStudent),{},Object(W.a)({},a.target.name,a.target.value))):(B.append(["school_id"],a.target.value),m.class_id?T.push("/admin/student-management/upload/".concat(a.target.value,"/").concat(null===m||void 0===m?void 0:m.class_id)):T.push("/admin/student-management/upload/".concat(a.target.value))),k(a.target.value);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===m||void 0===m?void 0:m.student_id)?setSingleStudent(Object(b.a)(Object(b.a)({},SingleStudent),{},Object(W.a)({},a.target.name,a.target.value))):(B.append(["class_id"],a.target.value),T.push("/admin/student-management/upload/".concat(m.school_id,"/").concat(a.target.value))),D(a.target.value);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Students"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)("a",{href:"/sampledata/students.csv",download:!0,children:"Download Sample File"}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:Z,method:"POST",encType:"multipart/form-data",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return J.apply(this,arguments)},value:m.school_id,children:[Object(p.jsx)("option",{children:"Select School"}),!E&&(null===U||void 0===U?void 0:U.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"class_id",onChange:function(e){return V.apply(this,arguments)},children:[Object(p.jsx)("option",{children:"Select Class"}),!H&&(null===M||void 0===M?void 0:M.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.class_name},e._id)})))]})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return G.apply(this,arguments)},placeholder:"Upload .csv"}),Object(p.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(e){e.preventDefault(),T.push("/admin/students-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function ke(){var e,a,t=Object(l.g)(),n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object($.b)(),i=Object(l.i)(),r=function(){var e=Object(s.useContext)(C).state,a=Object(l.i)(),t=a.school_id&&a.class_id?"students-".concat(a.school_id,"-").concat(a.class_id):"students";return Object(T.a)(t,Object(u.a)(d.a.mark((function t(){var s,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=12;break}if(a.school_id||a.class_id){t.next=8;break}return t.next=4,F.a.get("".concat(I,"v1/student/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 4:return s=t.sent,t.abrupt("return",s.data.data);case 8:return t.next=10,F.a.get("".concat(I,"v1/student/student-by-school-id-class-id/").concat(a.school_id,"/").concat(a.class_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 10:return n=t.sent,t.abrupt("return",n.data.data);case 12:case"end":return t.stop()}}),t)}))))}(),j=r.data,m=r.isLoading,b=K(),h=b.data,v=(b.schoolIsLoading,pe()),O=v.data,f=(v.classIsLoading,null===h||void 0===h?void 0:h.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===i||void 0===i?void 0:i.school_id)}))),x=null===O||void 0===O?void 0:O.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===i||void 0===i?void 0:i.class_id)})),g={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},_=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/student/delete/").concat(e),g)}),{onSuccess:function(){var e=i.school_id&&i.class_id?"students-".concat(i.school_id,"-").concat(i.class_id):"students";o.invalidateQueries(e),n("Student Deleted successfully",{appearance:"success",autoDismiss:!0})}}),N=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.mutate(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),f&&(null===(e=f[0])||void 0===e?void 0:e.name)?"School: "+f[0].name+" - Class: "+(x&&(null===(a=x[0])||void 0===a?void 0:a.class_name)?x[0].class_name:""):"All Students"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)(B,{isLoading:m}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"First Name"}),Object(p.jsx)("th",{scope:"col",children:"Last Name"}),Object(p.jsx)("th",{scope:"col",children:"Guardian Name"}),Object(p.jsx)("th",{scope:"col",children:"Guardian Phone"})]})}),Object(p.jsx)("tbody",{children:null===j||void 0===j?void 0:j.map((function(e,a){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:a}),Object(p.jsx)("td",{children:e.first_name}),Object(p.jsx)("td",{children:e.last_name}),Object(p.jsx)("td",{children:e.guardian_name}),Object(p.jsx)("td",{children:e.guardian_phone_no}),Object(p.jsxs)("td",{children:[Object(p.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(a){t.push("/admin/student-management/modify-student/".concat(e.school_id,"/").concat(e.class_id,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(p.jsx)("span",{className:"fa fa-edit"})}),Object(p.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return N(null===e||void 0===e?void 0:e._id)},children:Object(p.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function we(){var e=Object(l.i)(),a=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Student List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsxs)("div",{className:"col-md-12 row",children:[Object(p.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){a.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})}),Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(t){void 0==e.page_type?a.push("/admin/student-management/upload"):"upload"==e.page_type&&a.push("/admin/student-management")},children:[Object(p.jsx)("span",{className:"fa fa-upload"}),"   Upload Students"]})]})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:"upload"==e.page_type?Object(p.jsx)(ye,{}):Object(p.jsx)(Ne,{})}),Object(p.jsx)("div",{className:"col-md-9 ",children:Object(p.jsx)(ke,{})})]})})]})})})}function Se(){var e=Object(l.i)(),a=null===e||void 0===e?void 0:e.teacher_id,t=Object(s.useContext)(C).state;return Object(T.a)("single-module-".concat(a),Object(u.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,F.a.get("".concat(I,"v1/teacher/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return s=e.sent,e.abrupt("return",s.data.data);case 5:case"end":return e.stop()}}),e)}))))}function Ce(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object(s.useState)(!1),i=Object(j.a)(o,2),r=i[0],m=i[1],h=Se().data,v=Object(s.useState)({}),O=Object(j.a)(v,2),f=O[0],x=O[1],g=K(),_=g.data,N=g.isLoading,y=/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/,k={first_name:"",last_name:"",phone_no:""},w=Object(s.useState)(k),S=Object(j.a)(w,2),A=S[0],D=S[1];Object(s.useEffect)((function(){x(h)}),[h]);var T=Object($.b)(),L={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},z=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher/create"),e,L)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;T.invalidateQueries("teachers-".concat(s)),m(!1),D(k),e.push("".concat(t)),n("Teacher added successfully",{appearance:"success",autoDismiss:!0})}}),B=Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.teacher_id;return F.a.patch("".concat(I,"v1/teacher/update/").concat(t),e,L)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;T.invalidateQueries("teachers-".concat(s)),m(!1),D(k),e.push("".concat(t)),n("Teacher Updated successfully",{appearance:"success",autoDismiss:!0})}}),P=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===a||void 0===a?void 0:a.teacher_id)){e.next=7;break}return e.next=5,B.mutate(f);case 5:e.next=20;break;case 7:if(A.school_id=a.school_id?a.school_id:"",""!=A.school_id){e.next=13;break}m(!1),n("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 13:if(y.test(A.phone_no)){e.next=18;break}m(!1),n("Please Enter a valid 10 digit phone no",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 18:return e.next=20,z.mutate(A);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function U(e){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.teacher_id)?x(Object(b.a)(Object(b.a)({},f),{},Object(W.a)({},t.target.name,t.target.value))):D(Object(b.a)(Object(b.a)({},A),{},Object(W.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.teacher_id)?(x(Object(b.a)(Object(b.a)({},f),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/teachers-management/select-school/".concat(s.target.value,"/").concat(a.teacher_id))):(D(Object(b.a)(Object(b.a)({},A),{},Object(W.a)({},"school_id",s.target.value))),e.push("/admin/teachers-management/select-school/".concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Teacher"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:P,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){return Q.apply(this,arguments)},value:a.school_id?a.school_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select School"}),!N&&(null===_||void 0===_?void 0:_.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"first_name",value:(null===a||void 0===a?void 0:a.teacher_id)?null===f||void 0===f?void 0:f.first_name:null===A||void 0===A?void 0:A.first_name,onChange:U,placeholder:"First Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"last_name",value:(null===a||void 0===a?void 0:a.teacher_id)?null===f||void 0===f?void 0:f.last_name:null===A||void 0===A?void 0:A.last_name,onChange:U,placeholder:"Last Name"})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"phone_no",value:(null===a||void 0===a?void 0:a.teacher_id)?null===f||void 0===f?void 0:f.phone_no:null===A||void 0===A?void 0:A.phone_no,onChange:U,placeholder:"Phone no"})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.teacher_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update Teacher"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save Teacher"]})})}),((null===a||void 0===a?void 0:a.teacher_id)||a.school_id)&&Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/teachers-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function Ae(){var e=Object(s.useState)(!1),a=Object(j.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)(!0),o=Object(j.a)(c,2),i=o[0],r=o[1],m=Object(s.useContext)(C).state,b=Object(R.useToasts)().addToast,h=Object(s.useState)(null),v=Object(j.a)(h,2),O=v[0],f=v[1],x=Object(s.useState)(),g=Object(j.a)(x,2),_=g[0],N=g[1],y=Object(s.useState)(!1),k=Object(j.a)(y,2),w=k[0],S=k[1],A=Object(l.g)(),D=K(),T=D.data,L=D.isLoading,z=Object($.b)(),B={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+m.access_token}},P=new FormData;function U(){return(U=Object(u.a)(d.a.mark((function e(a){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files[0].name,console.log("file onchange ",t),s=t.split(".")[1],console.log(s),"csv"===s?(r(!1),f(a.target.files[0]),P.append("file",a.target.files[0]),P.append("test","testdata")):(r(!0),b("Only .csv files are allowed",{appearance:"error",autoDismiss:!0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher/upload"),e,B)}),{onSuccess:function(){z.invalidateQueries("teachers"),n(!1),b("Teacher added successfully",{appearance:"success",autoDismiss:!0})}}),Q=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),w){e.next=4;break}return b("Please Select a School",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 4:return P.append("file",O),P.append("school_id",_),e.next=8,E.mutate(P);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Upload Teachers"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)("a",{href:"/sampledata/teachers.csv",download:!0,children:"Download Sample File"}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:Q,method:"POST",encType:"multipart/form-data",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"school_id",onChange:function(e){N(e.target.value),S(!0)},children:[Object(p.jsx)("option",{children:"Select School"}),!L&&(null===T||void 0===T?void 0:T.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.name},e._id)})))]})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"file",className:"form-control",name:"file",onChange:function(e){return U.apply(this,arguments)},placeholder:"Upload .csv"}),Object(p.jsx)("small",{id:"passwordHelpInline",class:"text-muted",children:"Upload Classes File in .csv format only."})]}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",disabled:i,children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Upload"]})})}),Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(e){e.preventDefault(),A.push("/admin/teachers-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function De(){var e=Object(s.useContext)(C).state,a=Object(l.i)(),t=a.school_id?"teachers-".concat(a.school_id):"teachers";return Object(T.a)(t,Object(u.a)(d.a.mark((function t(){var s,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.access_token){t.next=12;break}if(a.school_id){t.next=8;break}return t.next=4,F.a.get("".concat(I,"v1/teacher/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 4:return s=t.sent,t.abrupt("return",s.data.data);case 8:return t.next=10,F.a.get("".concat(I,"v1/teacher/teacher-by-school-id/").concat(a.school_id),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 10:return n=t.sent,t.abrupt("return",n.data.data);case 12:case"end":return t.stop()}}),t)}))))}function Te(){var e,a=Object(l.g)(),t=Object(R.useToasts)().addToast,n=Object(s.useContext)(C).state,c=Object(l.i)(),o=Object($.b)(),i=De(),r=i.data,j=i.isLoading,m=K(),b=m.data,h=(m.schoolIsLoading,null===b||void 0===b?void 0:b.filter((function(e){return(null===e||void 0===e?void 0:e._id)==(null===c||void 0===c?void 0:c.school_id)}))),v={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+n.access_token}},O=Object(Y.a)((function(e){return F.a.delete("".concat(I,"v1/teacher/delete/").concat(e),v)}),{onSuccess:function(){var e=(null===c||void 0===c?void 0:c.school_id)?"teachers-".concat(c.school_id):"teachers";o.invalidateQueries(e),t("Teacher Deleted successfully",{appearance:"success",autoDismiss:!0})}}),f=function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.mutate(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),h&&(null===(e=h[0])||void 0===e?void 0:e.name)?"School: "+h[0].name:"All Teachers"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsx)(B,{isLoading:j}),Object(p.jsx)("div",{className:"col-md-12 row no-gutter data-container-category",children:Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"First Name"}),Object(p.jsx)("th",{scope:"col",children:"Last Name"}),Object(p.jsx)("th",{scope:"col",children:"Phone no"})]})}),Object(p.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:t}),Object(p.jsx)("td",{children:e.first_name}),Object(p.jsx)("td",{children:e.last_name}),Object(p.jsx)("td",{children:e.phone_no}),Object(p.jsxs)("td",{children:[Object(p.jsx)("button",{className:"btn bg-primary text-white btn-sm mr-2",onClick:function(t){c.school_id?a.push("/admin/teachers-management/modify-subject/".concat(null===c||void 0===c?void 0:c.school_id,"/").concat(null===e||void 0===e?void 0:e._id)):a.push("/admin/teachers-management/modify-subject/".concat(e.school_id,"/").concat(null===e||void 0===e?void 0:e._id))},children:Object(p.jsx)("span",{className:"fa fa-edit"})}),Object(p.jsx)("button",{className:"btn bg-danger text-white btn-sm",onClick:function(){return f(null===e||void 0===e?void 0:e._id)},children:Object(p.jsx)("span",{className:"fa fa-trash"})})]})]},null===e||void 0===e?void 0:e._id)}))})]})})]})}function Le(){var e=Object(l.i)(),a=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Teacher List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsxs)("div",{className:"col-md-12 row",children:[Object(p.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(e){a.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})}),Object(p.jsxs)("button",{className:"btn btn-sm dark",onClick:function(t){void 0==e.page_type?a.push("/admin/teachers-management/upload"):"upload"==e.page_type&&a.push("/admin/teachers-management")},children:[Object(p.jsx)("span",{className:"fa fa-upload"}),"   Upload Teachers"]})]})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:"upload"==e.page_type?Object(p.jsx)(Ae,{}):Object(p.jsx)(Ce,{})}),Object(p.jsx)("div",{className:"col-md-9 ",children:Object(p.jsx)(Te,{})})]})})]})})})}function Fe(){var e=Object(l.g)(),a=Object(l.i)(),t=Object(l.h)().pathname,n=Object(R.useToasts)().addToast,c=Object(s.useContext)(C).state,o=Object(s.useState)(!1),i=Object(j.a)(o,2),r=i[0],m=i[1],h=Se().data,v=Object(s.useState)({}),O=Object(j.a)(v,2),f=O[0],x=O[1],g=De(),_=g.data,N=g.teacherIsLoading,y=xe(),k=y.data,w=(y.subjectIsLoading,/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/),S={first_name:"",last_name:"",phone_no:""},A=Object(s.useState)(S),D=Object(j.a)(A,2),T=D[0],L=D[1];Object(s.useEffect)((function(){x(h)}),[h]);var z=Object($.b)(),B={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+c.access_token}},P=Object(Y.a)((function(e){return F.a.post("".concat(I,"v1/teacher/create"),e,B)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;z.invalidateQueries("teachers-".concat(s)),m(!1),L(S),e.push("".concat(t)),n("Teacher added successfully",{appearance:"success",autoDismiss:!0})}}),U=Object(Y.a)((function(e){var t=null===a||void 0===a?void 0:a.teacher_id;return F.a.patch("".concat(I,"v1/teacher/update/").concat(t),e,B)}),{onSuccess:function(){var s=null===a||void 0===a?void 0:a.school_id;z.invalidateQueries("teachers-".concat(s)),m(!1),L(S),e.push("".concat(t)),n("Teacher Updated successfully",{appearance:"success",autoDismiss:!0})}}),E=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(!0),!(null===a||void 0===a?void 0:a.teacher_id)){e.next=7;break}return e.next=5,U.mutate(f);case 5:e.next=20;break;case 7:if(T.school_id=a.school_id?a.school_id:"",""!=T.school_id){e.next=13;break}m(!1),n("Please Select a School",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 13:if(w.test(T.phone_no)){e.next=18;break}m(!1),n("Please Enter a valid 10 digit phone no",{appearance:"error",autoDismiss:!0}),e.next=20;break;case 18:return e.next=20,P.mutate(T);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();function Q(){return(Q=Object(u.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:999!=s.target.value&&((null===a||void 0===a?void 0:a.teacher_id)?(x(Object(b.a)(Object(b.a)({},f),{},Object(W.a)({},s.target.name,s.target.value))),e.push("/admin/teachers-management/select-school/".concat(s.target.value,"/").concat(a.teacher_id))):(L(Object(b.a)(Object(b.a)({},T),{},Object(W.a)({},"school_id",s.target.value))),e.push("/admin/teachers-management/select-school/".concat(s.target.value))));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(e){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s=t.target.value,console.log(s),document.getElementById("".concat(module_id)).style.checked=!0,AppModules.push({role_id:null===a||void 0===a?void 0:a.role_id,role_slug:null===a||void 0===a?void 0:a.role_slug,school_id:null===a||void 0===a?void 0:a.school_id,school_slug:null===a||void 0===a?void 0:a.school_slug,module_id:module_id,module_slug:module_slug});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{className:"form-heading",children:[Object(p.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Add New Teacher"]}),Object(p.jsx)("hr",{className:"mt-1"}),Object(p.jsxs)("form",{onSubmit:E,children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("select",{className:"form-control","aria-label":"Default select example",name:"teacher_id",onChange:function(e){return Q.apply(this,arguments)},value:(null===a||void 0===a?void 0:a.teacher_id)?null===a||void 0===a?void 0:a.teacher_id:999,children:[Object(p.jsx)("option",{value:"999",children:"Select Teacher"}),!N&&(null===_||void 0===_?void 0:_.map((function(e){return Object(p.jsx)("option",{value:e._id,children:e.first_name+" "+e.last_name},e._id)})))]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("div",{className:"col-md-12 pl-0 pr-2",style:{minHeight:"280px",maxHeight:"280px",overflow:"scroll"},children:null===k||void 0===k?void 0:k.map((function(e){return Object(p.jsx)("div",{className:"card pl-2 pt-0 pb-0 mb-2",children:Object(p.jsxs)("label",{className:"pb-0 mb-0",children:[Object(p.jsx)("input",{className:"mr-2",type:"checkbox",name:null===e||void 0===e?void 0:e.subject_name,value:"".concat(null===e||void 0===e?void 0:e._id,"_").concat(null===e||void 0===e?void 0:e.module_slug),onChange:M}),null===e||void 0===e?void 0:e.subject_name]})},null===e||void 0===e?void 0:e._id)}))})}),Object(p.jsxs)("div",{className:"form-group flex",children:[Object(p.jsx)("button",{className:"btn btn-sm dark",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(p.jsx)(p.Fragment,{children:(null===a||void 0===a?void 0:a.teacher_id)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Update Teacher"]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-save mr-2"})," Save Teacher"]})})}),((null===a||void 0===a?void 0:a.teacher_id)||a.school_id)&&Object(p.jsxs)("button",{className:"btn btn-sm red ml-2",onClick:function(a){a.preventDefault(),e.push("/admin/teachers-management")},children:[Object(p.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}var Ie=[{path:"/",component:H},{path:"/admin/login",component:H},{path:"/403",component:function(){var e=Object(s.useContext)(C).state;return Object(p.jsx)(p.Fragment,{children:e.isLoggedIn&&Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container pt-5 text-center",children:[Object(p.jsx)("img",{src:"/403.jpg",alt:"Not authorized"}),Object(p.jsx)("p",{children:"You are not authorized to access this resource"}),Object(p.jsxs)(i.b,{to:"/dashboard",children:[Object(p.jsx)("span",{className:"fa fa-home"}),Object(p.jsx)("span",{className:"ml-3",children:"Go to Dashboard"})]})]})})})})}},{path:"/school/:user_type?/login",component:function(){var e=Object(l.g)(),a=Object(l.h)(),t=Object(l.i)(),n=Object(R.useToasts)().addToast,c=Object(s.useRef)(),o=Object(s.useRef)(),r=Object(s.useState)(null),m=Object(j.a)(r,2),b=(m[0],m[1],Object(s.useContext)(C)),h=b.dispatch,v=b.state,O=Object(s.useState)(!1),f=Object(j.a)(O,2),x=f[0],g=f[1],_=function(){var a=Object(u.a)(d.a.mark((function a(t){var s,i,l,r,u,j,m,b,p,v,O,f,x,_,N;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),s=c.current.value,i=o.current.value,""!==s){a.next=8;break}return n("Please enter email address",{appearance:"error",autoDismiss:!0}),a.abrupt("return",!1);case 8:if(""!==i){a.next=14;break}return n("Please enter password",{appearance:"error",autoDismiss:!0}),o.current.focus(),a.abrupt("return",!1);case 14:return g(!0),l={email:c.current.value,password:o.current.value},a.next=18,F.a.post("".concat(I,"v1/school-admin-auth/login"),l);case 18:203===(null===(r=a.sent)||void 0===r?void 0:r.status)?(n("".concat(null===r||void 0===r||null===(u=r.data)||void 0===u?void 0:u.message),{appearance:"error",autoDismiss:!0}),g(!1)):(j=r.data.accessToken,m=r.data.refreshToken,b=r.data.admin.admin_name,p=r.data.admin.admin_email,1,v="school-admin",O=r.data.admin._id,f=r.data.admin.slug,x=r.data.admin.logo,_=r.data.admin.created_at,N=!0,localStorage.setItem("access_token",j),localStorage.setItem("refresh_token",m),localStorage.setItem("fullname",b),localStorage.setItem("email",p),localStorage.setItem("role",1),localStorage.setItem("user_type",v),localStorage.setItem("school_id",O),localStorage.setItem("school_slug",f),localStorage.setItem("school_logo",x),localStorage.setItem("created_at",_),localStorage.setItem("isLoggedIn",N),h({type:"LOGIN",payload:{isLoggedIn:N,fullname:b,email:p,role:1,user_type:v,school_id:O,school_slug:f,school_logo:x,created_at:_,access_token:j,refresh_token:m}}),e.push("/school/".concat(f,"/admin/dashboard")));case 20:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function N(){return(N=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!0===(null===v||void 0===v?void 0:v.isLoggedIn)?"1"===(null===v||void 0===v?void 0:v.role)&&e.push("/school/admin/dashboard"):"/school/admin/login"===(null===a||void 0===a?void 0:a.pathname)&&e.push("/school/admin/login");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){return N.apply(this,arguments)}),[v]),Object(p.jsxs)("div",{className:"container-fluid p-0 m-0 text-center SchoolAdminLoginBg",style:{background:"url('/bg.jpg')"},children:[Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(i.c,{to:"/",children:Object(p.jsx)("img",{className:"logo",alt:"company Logo",src:"/logo.png"})})}),Object(p.jsx)("div",{className:"row no-gutter",children:Object(p.jsxs)("div",{className:"col-md-3 schoolAdminLoginDiv",children:[Object(p.jsxs)("h4",{children:["School ",null===t||void 0===t?void 0:t.user_type," Login "]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("form",{autoComplete:"Off",onSubmit:_,children:[Object(p.jsxs)("div",{className:"form-group text-left",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsx)("span",{className:"fa fa-send mr-2"})," Email address"]}),Object(p.jsx)("input",{className:"form-control",type:"email",autoComplete:"off",ref:c,placeholder:"Enter email"}),Object(p.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your email with anyone else."})]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("div",{className:"form-group text-left",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsx)("span",{className:"fa fa-lock mr-2"})," Password"]}),Object(p.jsx)("input",{className:"form-control",type:"password",autoComplete:"Off",ref:o,placeholder:"Password"}),Object(p.jsx)("p",{className:"text-muted mt-2",children:"We'll never share your password with anyone else."})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("button",{className:"btn btn-md btn-block btn-success dark w-100",type:"submit",children:x?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-spinner mr-2",children:" "})," Authenticating..."]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"fa fa-lock mr-2",children:" "})," Login Your Account"]})})]})]})})]})}}],ze=[{path:"/admin/dashboard",component:G},{path:"/admin",component:G},{path:"/admin/school-management/:page_type?/:school_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"School List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsx)("div",{className:"col-md-12 row",children:Object(p.jsx)("button",{className:"btn btn-sm dark",onClick:function(a){e.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)(J,{})}),Object(p.jsx)("div",{className:"col-md-9 ",children:Object(p.jsx)(V,{})})]})})]})})})}},{path:"/admin/class-management/:page_type?/:school_id?/:class_id?",component:ve},{path:"/admin/student-management/:page_type?/:school_id?/:class_id?/:student_id?",component:we},{path:"/admin/students-management/:page_type?/:student_id?",component:we},{path:"/admin/subject-management/:page_type?/:school_id?/:subject_id?",component:_e},{path:"/admin/auth-management/:page_type?/:school_id?/:school_admin_email?/:school_admin_id?",component:SchoolAuthList},{path:"/admin/teachers-management/:page_type?/:school_id?/:teacher_id?",component:Le},{path:"/admin/mapping-teacher-subjects/:page_type?/:school_id?/:teacher_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"Teacher List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsx)("div",{className:"col-md-12 row",children:Object(p.jsx)("button",{className:"btn btn-sm dark mr-2",onClick:function(a){e.push("/admin/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)(Fe,{})}),Object(p.jsx)("div",{className:"col-md-9 "})]})})]})})})}}],Be=[{path:"/admin/app-module/:module_id?",component:function(){Object(l.i)();var e=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"App Modules List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsx)("div",{className:"col-md-12 row",children:Object(p.jsx)("button",{className:"btn btn-sm dark",onClick:function(a){e.push("/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)(X,{})}),Object(p.jsx)("div",{className:"col-md-9",children:Object(p.jsx)(te,{})})]})})]})})})}},{path:"/admin/app-roles/:role_id?",component:function(){var e=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsx)("h2",{children:"App Roles List"})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsx)("div",{className:"col-md-12 row",children:Object(p.jsx)("button",{className:"btn btn-sm dark",onClick:function(a){e.push("/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)(ne,{})}),Object(p.jsx)("div",{className:"col-md-9",children:Object(p.jsx)(ie,{})})]})})]})})})}},{path:"/admin/app-permissions/:role_id?/:role_slug?/:school_id?/:school_slug?/:permission_id?",component:function(){var e=Object(l.g)();return Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"dash-main-head",children:Object(p.jsxs)("h2",{children:[Object(p.jsx)("span",{className:"bi bi-gear-wide-connected text-warning mr-2"}),"App Permissions"]})}),Object(p.jsx)("div",{className:"dash-con-heading",children:Object(p.jsx)("div",{className:"col-md-12 row",children:Object(p.jsx)("button",{className:"btn btn-sm dark",onClick:function(a){e.push("/dashboard")},children:Object(p.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"dash-cont-start",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-3",children:Object(p.jsx)(re,{})}),Object(p.jsx)("div",{className:"col-md-9",children:Object(p.jsx)(je,{})})]})})]})})})}}],Pe=[{path:"/school/:school_slug/admin/dashboard",component:function(){var e,a=Object(s.useContext)(C).state;return Object(p.jsx)(p.Fragment,{children:a.isLoggedIn&&Object(p.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(p.jsx)("div",{className:"main-area-all",children:Object(p.jsxs)("div",{className:"dashboard_main-container",children:[Object(p.jsx)("div",{className:"",children:Object(p.jsx)("div",{className:"dash-main-head row",children:Object(p.jsx)("div",{className:"col-md-12 pt-0",children:Object(p.jsxs)("h2",{style:{padding:"7px 15px"},children:["Welcome, ",null===a||void 0===a||null===(e=a.school_slug)||void 0===e?void 0:e.replaceAll("-"," "),Object(p.jsx)("img",{className:"img-responsive ml-2",src:"https://drive.google.com/uc?export=view&id=".concat(null===a||void 0===a?void 0:a.school_logo),style:{width:"50px"}})]})})})}),Object(p.jsx)("div",{className:"dash_over_view",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12 pl-0"})})})]})})})})}},{path:"/school/:school_slug/admin/class-management/:page_type?/:school_id?",component:ve},{path:"/school/:school_slug/admin/student-management/:page_type?/:school_id?/:class_id?/:student_id?",component:we},{path:"/school/:school_slug/admin/students-management/:page_type?/:student_id?",component:we},{path:"/school/:school_slug/admin/subject-management/:page_type?/:subject_id?",component:_e},{path:"/school/:school_slug/admin/teachers-management/:page_type?/:teacher_id?",component:Le}],Ue=new(t(106).a)({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});function Ee(){return Object(p.jsx)(i.a,{children:Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsx)("div",{className:"row no-gutters",children:Object(p.jsx)($.a,{client:Ue,children:Object(p.jsx)(D,{children:Object(p.jsxs)(R.ToastProvider,{children:[Object(p.jsx)(P,{}),Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsxs)(l.d,{children:[null===Ie||void 0===Ie?void 0:Ie.map((function(e){return Object(p.jsx)(l.b,{exact:!0,path:e.path,component:e.component},e.path)})),null===ze||void 0===ze?void 0:ze.map((function(e){return Object(p.jsx)(E,{exact:!0,path:e.path,component:e.component},e.path)})),null===Be||void 0===Be?void 0:Be.map((function(e){return Object(p.jsx)(Q,{exact:!0,path:e.path,component:e.component},e.path)})),null===Pe||void 0===Pe?void 0:Pe.map((function(e){return Object(p.jsx)(M,{exact:!0,path:e.path,component:e.component},e.path)}))]})})]})})})})})})}o.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(Ee,{})}),document.getElementById("root"))},59:function(e,a,t){},61:function(e,a,t){},90:function(e,a,t){},97:function(e,a,t){},98:function(e,a,t){},99:function(e,a,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.6b524fe5.chunk.js.map